/*! For license information please see main.894b4e31.js.LICENSE.txt */
!function(){var e={694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var u in n)r.call(n,u)&&n[u]&&e.push(u)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,It,St,Et=!1,Tt=[],Ct=null,Nt=null,Dt=null,At=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==Dt&&Ut(Dt)&&(Dt=null),At.forEach(jt),Pt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==Dt&&Bt(Dt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return In}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Dn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Ir={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Or=Ar[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=yn;break;case Nr:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Xn;else if(Wn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Di=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Di=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ei(Ci,e)):Si(Ni),Ei(Ni,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){qi[Wi++]=Hi,qi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Xi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Wi],qi[Wi]=null,Hi=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Si(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Di:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Di:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),$a=Ya(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ns.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:$o,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:$o,useReducer:Do,useRef:Vo,useState:function(){return Do(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),hu(0,t)},n}function vu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Xa(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Rs,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Rs,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Rs,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Rs,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Di:Ci.current;return a=Ai(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ai(t,c=Pi(n)?Di:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Da=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Da?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Da||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ai(t,s=Pi(n)?Di:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Da?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Da||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ru,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=$i,Gi[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),Xa(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":X(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*$e()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,$u="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Xu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,hs(e,t,n),Xu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $u),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ic(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=$e())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,vs(t,e),Xu=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Ju=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Ju=s):xs(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,Yu=u,Xu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function xs(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var _s,Is=Math.ceil,Ss=b.ReactCurrentDispatcher,Es=b.ReactCurrentOwner,Ts=b.ReactCurrentBatchConfig,Cs=0,Ns=null,Ds=null,As=0,Ps=0,Rs=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,Us=0,js=null,Vs=null,Bs=0,zs=1/0,qs=null,Ws=!1,Ks=null,Hs=null,Gs=!1,Qs=null,Ys=0,Xs=0,$s=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?$e():-1!==Js?Js:Js=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==As?As&-As:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xs)throw Xs=0,$s=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,As)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=$e()+500,ji&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?As:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?As:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&As===t||(qs=null,zs=$e()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Ss.current=o,Cs=i,null!==Ds?t=0:(Ns=null,As=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,$e()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vs,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vs,qs),t);break}wc(e,Vs,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vs,qs),r);break}wc(e,Vs,qs);break;default:throw Error(a(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vs,Vs=n,null!==t&&oc(t)),e}function oc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vs,qs),rc(e,$e()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=$e()+500,ji&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&zi()}}function fc(){Ps=Rs.current,Si(Rs)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,Ds=e=Rc(e.current,null),As=Ps=t,Os=0,Ls=null,Us=Fs=Ms=0,Vs=js=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=Ds;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Es.current=null,null===n||null===n.return){Os=1,Ls=t,Ds=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=As,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function pc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,As)}function mc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&As===t||(qs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Ss.current=r,null!==Ds)throw Error(a(261));return Ns=null,As=0,Os}function yc(){for(;null!==Ds;)kc(Ds)}function gc(){for(;null!==Ds&&!Ye();)kc(Ds)}function kc(e){var t=_s(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?bc(e):Ds=t,Es.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Ps)))return void(Ds=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(Ds=n);if(null===e)return Os=6,void(Ds=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Os&&(Os=5)}function wc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Ds=Ns=null,As=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Es.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Xe(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,Ys=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===$s?Xs++:(Xs=0,$s=e):Xs=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=bt(Ys),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function _c(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(As&n)===n&&(4===Os||3===Os&&(130023424&As)===As&&500>$e()-Bs?hc(e,0):Us|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Nc(e,t){return Ge(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Dc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Ac(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case D:return(e=Ac(19,n,t,i)).elementType=D,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case A:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,$e()),0===(6&Cs)&&(zs=$e()+500,zi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,R(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,S=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function D(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(I=!1,S=null)}}else I=!1}if("function"===typeof k)_=function(){k(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=D,_=function(){P.postMessage(null)}}else _=function(){y(D,0)};function R(e){S=e,I||(I=!0,_())}function O(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(E),E=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,R(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".e0d44d36.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="tweeter:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Twitter-Clone/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunktweeter=self.webpackChunktweeter||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return re},SDK_VERSION:function(){return lt},_DEFAULT_ENTRY_NAME:function(){return $e},_addComponent:function(){return tt},_addOrOverwriteComponent:function(){return nt},_apps:function(){return Ze},_clearComponents:function(){return ot},_components:function(){return et},_getProvider:function(){return it},_registerComponent:function(){return rt},_removeServiceInstance:function(){return at},deleteApp:function(){return pt},getApp:function(){return ht},getApps:function(){return dt},initializeApp:function(){return ft},onLog:function(){return yt},registerVersion:function(){return mt},setLogLevel:function(){return gt}});var t=n(791),r=n.t(t,2),i=n(250);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}function l(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function p(e,t){if(null==e)return{};var n,r,i=d(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var v=n(694),m=n.n(v),y=n(184),g=["xxl","xl","lg","md","sm","xs"],k=t.createContext({prefixes:{},breakpoints:g,minBreakpoint:"xs"});k.Consumer,k.Provider;function b(e,n){var r=(0,t.useContext)(k).prefixes;return e||r[n]||n}var w=["bsPrefix","fluid","as","className"],x=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,a=void 0===i?"div":i,o=e.className,u=p(e,w),s=b(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,y.jsx)(a,h(h({ref:t},u),{},{className:m()(o,r?"".concat(s).concat(c):s)}))}));x.displayName="Container",x.defaultProps={fluid:!1};var _=x;function I(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(){S=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(D){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var m={};c(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var c=f(e[r],e,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==s(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,u)}))}u(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),c(k,u,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function E(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){E(a,r,i,o,u,"next",e)}function u(e){E(a,r,i,o,u,"throw",e)}o(void 0)}))}}function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function A(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function O(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function M(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function F(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function U(e){var t=M();return function(){var n,r=L(e);if(t){var i=L(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return F(this,n)}}function j(e,t,n){return j=M()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&R(i,n.prototype),i},j.apply(null,arguments)}function V(e){var t="function"===typeof Map?new Map:void 0;return V=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return j(e,arguments,L(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),R(n,e)},V(e)}var B=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},z={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(B(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},q=function(e){return function(e){var t=B(e);return z.encodeByteArray(t,!0)}(e).replace(/\./g,"")},W=function(e){try{return z.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function K(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=K(e[n],t[n]));return e}function H(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function G(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Q(){return"object"===typeof indexedDB}var Y=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},X=function(){try{return Y()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Twitter-Clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&W(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},$=function(e){var t,n;return null===(n=null===(t=X())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},J=function(e){var t=$(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},Z=function(){var e;return null===(e=X())||void 0===e?void 0:e.config},ee=function(e){var t;return null===(t=X())||void 0===t?void 0:t["_".concat(e)]},te=function(){function e(){var t=this;N(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return A(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ne(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[q(JSON.stringify({alg:"none",type:"JWT"})),q(JSON.stringify(a)),""].join(".")}var re=function(e){O(n,e);var t=U(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(P(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(P(a),ie.prototype.create),a}return A(n)}(V(Error)),ie=function(){function e(t,n,r){N(this,e),this.service=t,this.serviceName=n,this.errors=r}return A(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ae(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new re(n,a,t);return o}}]),e}();function ae(e,t){return e.replace(oe,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var oe=/\{\$([^}]+)}/g;function ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function se(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ce(u)&&ce(s)){if(!se(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ce(e){return null!==e&&"object"===typeof e}function le(e){for(var t=[],n=function(){var e=u(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function fe(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=u(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function he(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function de(e,t){var n=new pe(e,t);return n.subscribe.bind(n)}var pe=function(){function e(t,n){var r=this;N(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return A(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=C(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ve),void 0===r.error&&(r.error=ve),void 0===r.complete&&(r.complete=ve);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ve(){}function me(e){return e&&e._delegate?e._delegate:e}var ye=function(){function e(t,n,r){N(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return A(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ge="[DEFAULT]",ke=function(){function e(t,n){N(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return A(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new te;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ge})}catch(c){}var t,n=C(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=T(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(I(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),I(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=C(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Xv){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ge?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Xv){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;return this.component?this.component.multipleInstances?e:ge:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var be,we,xe=function(){function e(t){N(this,e),this.name=t,this.providers=new Map}return A(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ke(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),_e=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(we||(we={}));var Ie={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},Se=we.INFO,Ee=(l(be={},we.DEBUG,"log"),l(be,we.VERBOSE,"log"),l(be,we.INFO,"info"),l(be,we.WARN,"warn"),l(be,we.ERROR,"error"),be),Te=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ee[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ce=function(){function e(t){N(this,e),this.name=t,this._logLevel=Se,this._logHandler=Te,this._userLogHandler=null,_e.push(this)}return A(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in we))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ie[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,we.DEBUG].concat(t)),this._logHandler.apply(this,[this,we.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,we.VERBOSE].concat(t)),this._logHandler.apply(this,[this,we.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,we.INFO].concat(t)),this._logHandler.apply(this,[this,we.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,we.WARN].concat(t)),this._logHandler.apply(this,[this,we.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,we.ERROR].concat(t)),this._logHandler.apply(this,[this,we.ERROR].concat(t))}}]),e}();var Ne,De;var Ae=new WeakMap,Pe=new WeakMap,Re=new WeakMap,Oe=new WeakMap,Le=new WeakMap;var Me={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Pe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Re.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return je(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Fe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(De||(De=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ve(this),n),je(Ae.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return je(e.apply(Ve(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ve(this),t].concat(r));return Re.set(a,t.sort?t.sort():[t]),je(a)}}function Ue(e){return"function"===typeof e?Fe(e):(e instanceof IDBTransaction&&function(e){if(!Pe.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Pe.set(e,t)}}(e),t=e,(Ne||(Ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Me):e);var t}function je(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(je(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ae.set(t,e)})).catch((function(){})),Le.set(t,e),t}(e);if(Oe.has(e))return Oe.get(e);var t=Ue(e);return t!==e&&(Oe.set(e,t),Le.set(t,e)),t}var Ve=function(e){return Le.get(e)};var Be,ze,qe=["get","getKey","getAll","getAllKeys","count"],We=["put","add","delete","clear"],Ke=new Map;function He(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ke.get(t))return Ke.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=We.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||qe.includes(n))){var a=function(){var e=T(S().mark((function e(t){var a,o,u,s,c,l,f=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ke.set(t,a),a}}}Me=function(e){return h(h({},e),{},{get:function(t,n,r){return He(t,n)||e.get(t,n,r)},has:function(t,n){return!!He(t,n)||e.has(t,n)}})}(Me);var Ge=function(){function e(t){N(this,e),this.container=t}return A(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Qe="@firebase/app",Ye="0.8.4",Xe=new Ce("@firebase/app"),$e="[DEFAULT]",Je=(l(Be={},Qe,"fire-core"),l(Be,"@firebase/app-compat","fire-core-compat"),l(Be,"@firebase/analytics","fire-analytics"),l(Be,"@firebase/analytics-compat","fire-analytics-compat"),l(Be,"@firebase/app-check","fire-app-check"),l(Be,"@firebase/app-check-compat","fire-app-check-compat"),l(Be,"@firebase/auth","fire-auth"),l(Be,"@firebase/auth-compat","fire-auth-compat"),l(Be,"@firebase/database","fire-rtdb"),l(Be,"@firebase/database-compat","fire-rtdb-compat"),l(Be,"@firebase/functions","fire-fn"),l(Be,"@firebase/functions-compat","fire-fn-compat"),l(Be,"@firebase/installations","fire-iid"),l(Be,"@firebase/installations-compat","fire-iid-compat"),l(Be,"@firebase/messaging","fire-fcm"),l(Be,"@firebase/messaging-compat","fire-fcm-compat"),l(Be,"@firebase/performance","fire-perf"),l(Be,"@firebase/performance-compat","fire-perf-compat"),l(Be,"@firebase/remote-config","fire-rc"),l(Be,"@firebase/remote-config-compat","fire-rc-compat"),l(Be,"@firebase/storage","fire-gcs"),l(Be,"@firebase/storage-compat","fire-gcs-compat"),l(Be,"@firebase/firestore","fire-fst"),l(Be,"@firebase/firestore-compat","fire-fst-compat"),l(Be,"fire-js","fire-js"),l(Be,"firebase","fire-js-all"),Be),Ze=new Map,et=new Map;function tt(e,t){try{e.container.addComponent(t)}catch(n){Xe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function nt(e,t){e.container.addOrOverwriteComponent(t)}function rt(e){var t=e.name;if(et.has(t))return Xe.debug("There were multiple attempts to register component ".concat(t,".")),!1;et.set(t,e);var n,r=C(Ze.values());try{for(r.s();!(n=r.n()).done;){tt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function it(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function at(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$e;it(e,t).clearInstance(n)}function ot(){et.clear()}var ut=(l(ze={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),l(ze,"bad-app-name","Illegal App name: '{$appName}"),l(ze,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),l(ze,"app-deleted","Firebase App named '{$appName}' already deleted"),l(ze,"no-options","Need to provide options, when not being deployed to hosting via source."),l(ze,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),l(ze,"invalid-log-argument","First argument to `onLog` must be null or a function."),l(ze,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),l(ze,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),l(ze,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),l(ze,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),ze),st=new ie("app","Firebase",ut),ct=function(){function e(t,n,r){var i=this;N(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ye("app",(function(){return i}),"PUBLIC"))}return A(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw st.create("app-deleted",{appName:this._name})}}]),e}(),lt="9.14.0";function ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:$e,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw st.create("bad-app-name",{appName:String(a)});if(n||(n=Z()),!n)throw st.create("no-options");var o=Ze.get(a);if(o){if(se(n,o.options)&&se(i,o.config))return o;throw st.create("duplicate-app",{appName:a})}var u,s=new xe(a),c=C(et.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new ct(n,i,s);return Ze.set(a,f),f}function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=Ze.get(e);if(!t&&e===$e)return ft();if(!t)throw st.create("no-app",{appName:e});return t}function dt(){return Array.from(Ze.values())}function pt(e){return vt.apply(this,arguments)}function vt(){return vt=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ze.has(n)){e.next=6;break}return Ze.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),vt.apply(this,arguments)}function mt(e,t,n){var r,i=null!==(r=Je[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Xe.warn(u.join(" "))}rt(new ye("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function yt(e,t){if(null!==e&&"function"!==typeof e)throw st.create("invalid-log-argument");!function(e,t){var n,r=C(_e);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ie[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:we[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function gt(e){var t;t=e,_e.forEach((function(e){e.setLogLevel(t)}))}var kt="firebase-heartbeat-store",bt=null;function wt(){return bt||(bt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=je(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(je(u.result),e.oldVersion,e.newVersion,je(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(kt)}}).catch((function(e){throw st.create("idb-open",{originalErrorMessage:e.message})}))),bt}function xt(e){return _t.apply(this,arguments)}function _t(){return _t=T(S().mark((function e(t){var n,r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wt();case 3:return r=e.sent,e.abrupt("return",r.transaction(kt).objectStore(kt).get(Et(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof re?Xe.warn(e.t0.message):(i=st.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),Xe.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),_t.apply(this,arguments)}function It(e,t){return St.apply(this,arguments)}function St(){return St=T(S().mark((function e(t,n){var r,i,a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wt();case 3:return i=e.sent,a=i.transaction(kt,"readwrite"),o=a.objectStore(kt),e.next=8,o.put(n,Et(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof re?Xe.warn(e.t0.message):(u=st.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),Xe.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),St.apply(this,arguments)}function Et(e){return"".concat(e.name,"!").concat(e.options.appId)}var Tt=function(){function e(t){var n=this;N(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new At(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return A(e,[{key:"triggerHeartbeat",value:function(){var e=T(S().mark((function e(){var t,n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ct(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=T(S().mark((function e(){var t,n,r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ct(),n=Nt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=q(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ct(){return(new Date).toISOString().substring(0,10)}function Nt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=C(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Pt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Pt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Dt,At=function(){function e(t){N(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return A(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=T(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,xt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=T(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",It(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=T(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",It(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(I(r.heartbeats),I(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Pt(e){return q(JSON.stringify({version:2,heartbeats:e})).length}Dt="",rt(new ye("platform-logger",(function(e){return new Ge(e)}),"PRIVATE")),rt(new ye("heartbeat",(function(e){return new Tt(e)}),"PRIVATE")),mt(Qe,Ye,Dt),mt(Qe,Ye,"esm2017"),mt("fire-js","");function Rt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function Ot(){return Ot="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Rt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ot.apply(this,arguments)}mt("firebase","9.14.0","app");var Lt,Mt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ft={},Ut=Ut||{},jt=Mt||self;function Vt(){}function Bt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function zt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var qt="closure_uid_"+(1e9*Math.random()>>>0),Wt=0;function Kt(e,t,n){return e.call.apply(e.bind,arguments)}function Ht(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Gt(e,t,n){return(Gt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kt:Ht).apply(null,arguments)}function Qt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Yt(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Xt(){this.s=this.s,this.o=this.o}Xt.prototype.s=!1,Xt.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,qt)&&e[qt]||(e[qt]=++Wt))},Xt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var $t=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Jt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Zt(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Bt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function en(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}en.prototype.h=function(){this.defaultPrevented=!0};var tn=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{jt.addEventListener("test",Vt,t),jt.removeEventListener("test",Vt,t)}catch(n){}return e}();function nn(e){return/^[\s\xa0]*$/.test(e)}var rn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function an(e,t){return e<t?-1:e>t?1:0}function on(){var e=jt.navigator;return e&&(e=e.userAgent)?e:""}function un(e){return-1!=on().indexOf(e)}function sn(e){return sn[" "](e),e}sn[" "]=Vt;var cn,ln=un("Opera"),fn=un("Trident")||un("MSIE"),hn=un("Edge"),dn=hn||fn,pn=un("Gecko")&&!(-1!=on().toLowerCase().indexOf("webkit")&&!un("Edge"))&&!(un("Trident")||un("MSIE"))&&!un("Edge"),vn=-1!=on().toLowerCase().indexOf("webkit")&&!un("Edge");function mn(){var e=jt.document;return e?e.documentMode:void 0}e:{var yn="",gn=function(){var e=on();return pn?/rv:([^\);]+)(\)|;)/.exec(e):hn?/Edge\/([\d\.]+)/.exec(e):fn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):vn?/WebKit\/(\S+)/.exec(e):ln?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(gn&&(yn=gn?gn[1]:""),fn){var kn=mn();if(null!=kn&&kn>parseFloat(yn)){cn=String(kn);break e}}cn=yn}var bn,wn={};function xn(){return function(e){var t=wn;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=rn(String(cn)).split("."),n=rn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=an(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||an(0==a[2].length,0==o[2].length)||an(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(jt.document&&fn){var _n=mn();bn=_n||(parseInt(cn,10)||void 0)}else bn=void 0;var In=bn;function Sn(e,t){if(en.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(pn){e:{try{sn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:En[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Sn.X.h.call(this)}}Yt(Sn,en);var En={2:"touch",3:"pen",4:"mouse"};Sn.prototype.h=function(){Sn.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Tn="closure_listenable_"+(1e6*Math.random()|0),Cn=0;function Nn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Cn,this.ba=this.ea=!1}function Dn(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function An(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Pn(e){var t={};for(var n in e)t[n]=e[n];return t}var Rn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function On(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Rn.length;a++)n=Rn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ln(e){this.src=e,this.g={},this.h=0}function Mn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=$t(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Dn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Fn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Ln.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Fn(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Nn(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Un="closure_lm_"+(1e6*Math.random()|0),jn={};function Vn(e,t,n,r,i){if(r&&r.once)return zn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Vn(e,t[a],n,r,i);return null}return n=Yn(n),e&&e[Tn]?e.N(t,n,zt(r)?!!r.capture:!!r,i):Bn(e,t,n,!1,r,i)}function Bn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=zt(i)?!!i.capture:!!i,u=Gn(e);if(u||(e[Un]=u=new Ln(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Hn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)tn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Kn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function zn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)zn(e,t[a],n,r,i);return null}return n=Yn(n),e&&e[Tn]?e.O(t,n,zt(r)?!!r.capture:!!r,i):Bn(e,t,n,!0,r,i)}function qn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)qn(e,t[a],n,r,i);else r=zt(r)?!!r.capture:!!r,n=Yn(n),e&&e[Tn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Fn(a=e.g[t],n,r,i))&&(Dn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Gn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Fn(t,n,r,i)),(n=-1<e?t[e]:null)&&Wn(n))}function Wn(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Tn])Mn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Kn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Gn(t))?(Mn(n,e),0==n.h&&(n.src=null,t[Un]=null)):Dn(e)}}}function Kn(e){return e in jn?jn[e]:jn[e]="on"+e}function Hn(e,t){if(e.ba)e=!0;else{t=new Sn(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Wn(e),e=n.call(r,t)}return e}function Gn(e){return(e=e[Un])instanceof Ln?e:null}var Qn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yn(e){return"function"===typeof e?e:(e[Qn]||(e[Qn]=function(t){return e.handleEvent(t)}),e[Qn])}function Xn(){Xt.call(this),this.i=new Ln(this),this.P=this,this.I=null}function $n(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new en(t,e);else if(t instanceof en)t.target=t.target||e;else{var i=t;On(t=new en(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Jn(o,r,!0,t)&&i}if(i=Jn(o=t.g=e,r,!0,t)&&i,i=Jn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Jn(o=t.g=n[a],r,!1,t)&&i}function Jn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Mn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Yt(Xn,Xt),Xn.prototype[Tn]=!0,Xn.prototype.removeEventListener=function(e,t,n,r){qn(this,e,t,n,r)},Xn.prototype.M=function(){if(Xn.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Dn(n[r]);delete t.g[e],t.h--}}this.I=null},Xn.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Xn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Zn=jt.JSON.stringify;function er(){var e=sr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var tr,nr=function(){function e(){N(this,e),this.h=this.g=null}return A(e,[{key:"add",value:function(e,t){var n=rr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),rr=new(function(){function e(t,n){N(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return A(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ir}),(function(e){return e.reset()})),ir=function(){function e(){N(this,e),this.next=this.g=this.h=null}return A(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ar(e){jt.setTimeout((function(){throw e}),0)}function or(e,t){tr||function(){var e=jt.Promise.resolve(void 0);tr=function(){e.then(cr)}}(),ur||(tr(),ur=!0),sr.add(e,t)}var ur=!1,sr=new nr;function cr(){for(var e;e=er();){try{e.h.call(e.g)}catch(n){ar(n)}var t=rr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ur=!1}function lr(e,t){Xn.call(this),this.h=e||1,this.g=t||jt,this.j=Gt(this.lb,this),this.l=Date.now()}function fr(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function hr(e,t,n){if("function"===typeof e)n&&(e=Gt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Gt(e.handleEvent,e)}return 2147483647<Number(t)?-1:jt.setTimeout(e,t||0)}function dr(e){e.g=hr((function(){e.g=null,e.i&&(e.i=!1,dr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Yt(lr,Xn),(Lt=lr.prototype).ca=!1,Lt.R=null,Lt.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),$n(this,"tick"),this.ca&&(fr(this),this.start()))}},Lt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Lt.M=function(){lr.X.M.call(this),fr(this),delete this.g};var pr=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return A(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:dr(this)}},{key:"M",value:function(){Ot(L(n.prototype),"M",this).call(this),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Xt);function vr(e){Xt.call(this),this.h=e,this.g={}}Yt(vr,Xt);var mr=[];function yr(e,t,n,r){Array.isArray(n)||(n&&(mr[0]=n.toString()),n=mr);for(var i=0;i<n.length;i++){var a=Vn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function gr(e){An(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Wn(e)}),e),e.g={}}function kr(){this.g=!0}function br(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Zn(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}vr.prototype.M=function(){vr.X.M.call(this),gr(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kr.prototype.Aa=function(){this.g=!1},kr.prototype.info=function(){};var wr={},xr=null;function _r(){return xr=xr||new Xn}function Ir(e){en.call(this,wr.Pa,e)}function Sr(e){var t=_r();$n(t,new Ir(t))}function Er(e,t){en.call(this,wr.STAT_EVENT,e),this.stat=t}function Tr(e){var t=_r();$n(t,new Er(t,e))}function Cr(e,t){en.call(this,wr.Qa,e),this.size=t}function Nr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return jt.setTimeout((function(){e()}),t)}wr.Pa="serverreachability",Yt(Ir,en),wr.STAT_EVENT="statevent",Yt(Er,en),wr.Qa="timingevent",Yt(Cr,en);var Dr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ar={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Pr(){}function Rr(e){return e.h||(e.h=e.i())}function Or(){}Pr.prototype.h=null;var Lr,Mr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Fr(){en.call(this,"d")}function Ur(){en.call(this,"c")}function jr(){}function Vr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new vr(this),this.O=zr,e=dn?125:void 0,this.T=new lr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Br}function Br(){this.i=null,this.g="",this.h=!1}Yt(Fr,en),Yt(Ur,en),Yt(jr,Pr),jr.prototype.g=function(){return new XMLHttpRequest},jr.prototype.i=function(){return{}},Lr=new jr;var zr=45e3,qr={},Wr={};function Kr(e,t,n){e.K=1,e.v=li(ai(t)),e.s=n,e.P=!0,Hr(e,null)}function Hr(e,t){e.F=Date.now(),Xr(e),e.A=ai(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),_i(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Br,e.g=Ia(e.l,n?t:null,!e.s),0<e.N&&(e.L=new pr(Gt(e.La,e,e.g),e.N)),yr(e.S,e.g,"readystatechange",e.ib),t=e.H?Pn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),Sr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Gr(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Qr(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Yr(e,n))==Wr){4==t&&(e.o=4,Tr(14),i=!1),br(e.j,e.m,null,"[Incomplete Response]");break}if(r==qr){e.o=4,Tr(15),br(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}br(e.j,e.m,r,null),ti(e,r)}Gr(e)&&r!=Wr&&r!=qr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Tr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ma(t),t.K=!0,Tr(11))):(br(e.j,e.m,n,"[Invalid Chunked Response]"),ei(e),Zr(e))}function Yr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Wr:(n=Number(t.substring(n,r)),isNaN(n)?qr:(r+=1)+n>t.length?Wr:(t=t.substr(r,n),e.C=r+n,t))}function Xr(e){e.V=Date.now()+e.O,$r(e,e.O)}function $r(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Nr(Gt(e.gb,e),t)}function Jr(e){e.B&&(jt.clearTimeout(e.B),e.B=null)}function Zr(e){0==e.l.G||e.I||ka(e.l,e)}function ei(e){Jr(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,fr(e.T),gr(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ti(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ai(n.h,e)))if(!e.J&&Ai(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ga(n),sa(n)}va(n),Tr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Nr(Gt(n.cb,n),6e3));if(1>=Di(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else wa(n,11)}else if((e.J||n.g==e)&&ga(n),!nn(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Pi(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,ci(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=_a(r,r.H?r.ka:null,r.V),d.J){Ri(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Jr(p),Xr(p)),r.g=d}else pa(r);0<n.i.length&&la(n)}else"stop"!=a[0]&&"close"!=a[0]||wa(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?wa(n,7):ua(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}Sr()}catch(a){}}function ni(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Bt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Bt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Bt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Lt=Vr.prototype).setTimeout=function(e){this.O=e},Lt.ib=function(e){e=e.target;var t=this.L;t&&3==ta(e)?t.l():this.La(e)},Lt.La=function(e){try{if(e==this.g)e:{var t=ta(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||dn||this.g&&(this.h.h||this.g.fa()||na(this.g)))){this.I||4!=t||7==n||Sr(),Jr(this);var r=this.g.aa();this.Y=r;t:if(Gr(this)){var i=na(this.g);e="";var a=i.length,o=4==ta(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ei(this),Zr(this);var u="";break t}this.h.i=new jt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nn(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Tr(12),ei(this),Zr(this);break e}br(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ti(this,r)}this.P?(Qr(this,t,u),dn&&this.i&&3==t&&(yr(this.S,this.T,"tick",this.hb),this.T.start())):(br(this.j,this.m,u,null),ti(this,u)),4==t&&ei(this),this.i&&!this.I&&(4==t?ka(this.l,this):(this.i=!1,Xr(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Tr(12)):(this.o=0,Tr(13)),ei(this),Zr(this)}}}catch(t){}},Lt.hb=function(){if(this.g){var e=ta(this.g),t=this.g.fa();this.C<t.length&&(Jr(this),Qr(this,e,t),this.i&&4!=e&&Xr(this))}},Lt.cancel=function(){this.I=!0,ei(this)},Lt.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Sr(),Tr(17)),ei(this),this.o=2,Zr(this)):$r(this,this.V-e)};var ri=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ii(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ii){this.h=void 0!==t?t:e.h,oi(this,e.j),this.s=e.s,this.g=e.g,ui(this,e.m),this.l=e.l,t=e.i;var n=new ki;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),si(this,n),this.o=e.o}else e&&(n=String(e).match(ri))?(this.h=!!t,oi(this,n[1]||"",!0),this.s=fi(n[2]||""),this.g=fi(n[3]||"",!0),ui(this,n[4]),this.l=fi(n[5]||"",!0),si(this,n[6]||"",!0),this.o=fi(n[7]||"")):(this.h=!!t,this.i=new ki(null,this.h))}function ai(e){return new ii(e)}function oi(e,t,n){e.j=n?fi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ui(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function si(e,t,n){t instanceof ki?(e.i=t,function(e,t){t&&!e.j&&(bi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wi(this,t),_i(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=hi(t,yi)),e.i=new ki(t,e.h))}function ci(e,t,n){e.i.set(t,n)}function li(e){return ci(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function fi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function hi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,di),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function di(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ii.prototype.toString=function(){var e=[],t=this.j;t&&e.push(hi(t,pi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(hi(t,pi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(hi(n,"/"==n.charAt(0)?mi:vi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",hi(n,gi)),e.join("")};var pi=/[#\/\?@]/g,vi=/[#\?:]/g,mi=/[#\?]/g,yi=/[#\?@]/g,gi=/#/g;function ki(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wi(e,t){bi(e),t=Ii(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function xi(e,t){return bi(e),t=Ii(e,t),e.g.has(t)}function _i(e,t,n){wi(e,t),0<n.length&&(e.i=null,e.g.set(Ii(e,t),Jt(n)),e.h+=n.length)}function Ii(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Lt=ki.prototype).add=function(e,t){bi(this),this.i=null,e=Ii(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Lt.forEach=function(e,t){bi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Lt.oa=function(){bi(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Lt.W=function(e){bi(this);var t=[];if("string"===typeof e)xi(this,e)&&(t=t.concat(this.g.get(Ii(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Lt.set=function(e,t){return bi(this),this.i=null,xi(this,e=Ii(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Lt.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Si=A((function e(t,n){N(this,e),this.h=t,this.g=n}));function Ei(e){this.l=e||Ci,jt.PerformanceNavigationTiming?e=0<(e=jt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(jt.g&&jt.g.Ga&&jt.g.Ga()&&jt.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ti,Ci=10;function Ni(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Di(e){return e.h?1:e.g?e.g.size:0}function Ai(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Pi(e,t){e.g?e.g.add(t):e.h=t}function Ri(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Oi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=C(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Jt(e.i)}function Li(){}function Mi(){this.g=new Li}function Fi(e,t,n){var r=n||"";try{ni(e,(function(e,n){var i=e;zt(e)&&(i=Zn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ui(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ji(e){this.l=e.ac||null,this.j=e.jb||!1}function Vi(e,t){Xn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Bi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ei.prototype.cancel=function(){if(this.i=Oi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=C(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Li.prototype.stringify=function(e){return jt.JSON.stringify(e,void 0)},Li.prototype.parse=function(e){return jt.JSON.parse(e,void 0)},Yt(ji,Pr),ji.prototype.g=function(){return new Vi(this.l,this.j)},ji.prototype.i=(Ti={},function(){return Ti}),Yt(Vi,Xn);var Bi=0;function zi(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function qi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Wi(e)}function Wi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Lt=Vi.prototype).open=function(e,t){if(this.readyState!=Bi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Wi(this)},Lt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||jt).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qi(this)),this.readyState=Bi},Lt.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof jt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zi(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Lt.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qi(this):Wi(this),3==this.readyState&&zi(this)}},Lt.Va=function(e){this.g&&(this.response=this.responseText=e,qi(this))},Lt.Ua=function(e){this.g&&(this.response=e,qi(this))},Lt.ga=function(){this.g&&qi(this)},Lt.setRequestHeader=function(e,t){this.v.append(e,t)},Lt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Lt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ki=jt.JSON.parse;function Hi(e){Xn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Gi,this.K=this.L=!1}Yt(Hi,Xn);var Gi="",Qi=/^https?$/i,Yi=["POST","PUT"];function Xi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$i(e),Zi(e)}function $i(e){e.D||(e.D=!0,$n(e,"complete"),$n(e,"error"))}function Ji(e){if(e.h&&"undefined"!=typeof Ut&&(!e.C[1]||4!=ta(e)||2!=e.aa()))if(e.v&&4==ta(e))hr(e.Ha,0,e);else if($n(e,"readystatechange"),4==ta(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ri)[1]||null;if(!a&&jt.self&&jt.self.location){var o=jt.self.location.protocol;a=o.substr(0,o.length-1)}i=!Qi.test(a?a.toLowerCase():"")}t=i}if(t)$n(e,"complete"),$n(e,"success");else{e.m=6;try{var u=2<ta(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",$i(e)}}finally{Zi(e)}}}function Zi(e,t){if(e.g){ea(e);var n=e.g,r=e.C[0]?Vt:null;e.g=null,e.C=null,t||$n(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ea(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(jt.clearTimeout(e.A),e.A=null)}function ta(e){return e.g?e.g.readyState:0}function na(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Gi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Va){return null}}function ra(e){var t="";return An(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ia(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ra(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ci(e,t,n))}function aa(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function oa(e){this.Ca=0,this.i=[],this.j=new kr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=aa("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=aa("baseRetryDelayMs",5e3,e),this.bb=aa("retryDelaySeedMs",1e4,e),this.$a=aa("forwardChannelMaxRetries",2,e),this.ta=aa("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Ei(e&&e.concurrentRequestLimit),this.Fa=new Mi,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ua(e){if(ca(e),3==e.G){var t=e.U++,n=ai(e.F);ci(n,"SID",e.I),ci(n,"RID",t),ci(n,"TYPE","terminate"),ha(e,n),(t=new Vr(e,e.j,t,void 0)).K=2,t.v=li(ai(n)),n=!1,jt.navigator&&jt.navigator.sendBeacon&&(n=jt.navigator.sendBeacon(t.v.toString(),"")),!n&&jt.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ia(t.l,null),t.g.da(t.v)),t.F=Date.now(),Xr(t)}xa(e)}function sa(e){e.g&&(ma(e),e.g.cancel(),e.g=null)}function ca(e){sa(e),e.u&&(jt.clearTimeout(e.u),e.u=null),ga(e),e.h.cancel(),e.m&&("number"===typeof e.m&&jt.clearTimeout(e.m),e.m=null)}function la(e){Ni(e.h)||e.m||(e.m=!0,or(e.Ja,e),e.C=0)}function fa(e,t){var n;n=t?t.m:e.U++;var r=ai(e.F);ci(r,"SID",e.I),ci(r,"RID",n),ci(r,"AID",e.T),ha(e,r),e.o&&e.s&&ia(r,e.o,e.s),n=new Vr(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=da(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Pi(e.h,n),Kr(n,r,t)}function ha(e,t){e.ia&&An(e.ia,(function(e,n){ci(t,n,e)})),e.l&&ni({},(function(e,n){ci(t,n,e)}))}function da(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Gt(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Fi(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function pa(e){e.g||e.u||(e.Z=1,or(e.Ia,e),e.A=0)}function va(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Nr(Gt(e.Ia,e),ba(e,e.A)),e.A++,!0)}function ma(e){null!=e.B&&(jt.clearTimeout(e.B),e.B=null)}function ya(e){e.g=new Vr(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=ai(e.sa);ci(t,"RID","rpc"),ci(t,"SID",e.I),ci(t,"CI",e.L?"0":"1"),ci(t,"AID",e.T),ci(t,"TYPE","xmlhttp"),ha(e,t),e.o&&e.s&&ia(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=li(ai(t)),n.s=null,n.P=!0,Hr(n,e)}function ga(e){null!=e.v&&(jt.clearTimeout(e.v),e.v=null)}function ka(e,t){var n=null;if(e.g==t){ga(e),ma(e),e.g=null;var r=2}else{if(!Ai(e.h,t))return;n=t.D,Ri(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;$n(r=_r(),new Cr(r,n)),la(e)}else pa(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Di(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Nr(Gt(e.Ja,e,t),ba(e,e.C)),e.C++,!0))}(e,t)||2==r&&va(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:wa(e,5);break;case 4:wa(e,10);break;case 3:wa(e,6);break;default:wa(e,2)}}function ba(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function wa(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Gt(e.kb,e);n||(n=new ii("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||oi(n,"https"),li(n)),function(e,t){var n=new kr;if(jt.Image){var r=new Image;r.onload=Qt(Ui,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Qt(Ui,n,r,"TestLoadImage: error",!1,t),r.onabort=Qt(Ui,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Qt(Ui,n,r,"TestLoadImage: timeout",!1,t),jt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Tr(2);e.G=0,e.l&&e.l.va(t),xa(e),ca(e)}function xa(e){if(e.G=0,e.la=[],e.l){var t=Oi(e.h);0==t.length&&0==e.i.length||(Zt(e.la,t),Zt(e.la,e.i),e.h.i.length=0,Jt(e.i),e.i.length=0),e.l.ua()}}function _a(e,t,n){var r=n instanceof ii?ai(n):new ii(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),ui(r,r.m);else{var i=jt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new ii(null,void 0);r&&oi(a,r),t&&(a.g=t),i&&ui(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&ci(r,n,t),ci(r,"VER",e.ma),ha(e,r),r}function Ia(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Hi(new ji({jb:!0})):new Hi(e.ra)).Ka(e.H),t}function Sa(){}function Ea(){if(fn&&!(10<=Number(In)))throw Error("Environmental error: no available transport.")}function Ta(e,t){Xn.call(this),this.g=new oa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!nn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!nn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Da(this)}function Ca(e){Fr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Na(){Ur.call(this),this.status=1}function Da(e){this.g=e}(Lt=Hi.prototype).Ka=function(e){this.L=e},Lt.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Lr.g(),this.C=this.u?Rr(this.u):Rr(Lr),this.g.onreadystatechange=Gt(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Xi(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=C(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=jt.FormData&&e instanceof jt.FormData,!(0<=$t(Yi,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=C(n);try{for(l.s();!(c=l.n()).done;){var f=u(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ea(this),0<this.B&&((this.K=function(e){return fn&&xn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gt(this.qa,this)):this.A=hr(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Xi(this,s)}},Lt.qa=function(){"undefined"!=typeof Ut&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$n(this,"timeout"),this.abort(8))},Lt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,$n(this,"complete"),$n(this,"abort"),Zi(this))},Lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zi(this,!0)),Hi.X.M.call(this)},Lt.Ha=function(){this.s||(this.F||this.v||this.l?Ji(this):this.fb())},Lt.fb=function(){Ji(this)},Lt.aa=function(){try{return 2<ta(this)?this.g.status:-1}catch(Ti){return-1}},Lt.fa=function(){try{return this.g?this.g.responseText:""}catch(Ti){return""}},Lt.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ki(t)}},Lt.Ea=function(){return this.m},Lt.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Lt=oa.prototype).ma=8,Lt.G=1,Lt.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Vr(this,this.j,e,void 0),n=this.s;if(this.S&&(n?On(n=Pn(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=da(this,t,r),ci(i=ai(this.F),"RID",e),ci(i,"CVER",22),this.D&&ci(i,"X-HTTP-Session-Id",this.D),ha(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(ra(n)))+"&"+r:this.o&&ia(i,this.o,n)),Pi(this.h,t),this.Ya&&ci(i,"TYPE","init"),this.O?(ci(i,"$req",r),ci(i,"SID","null"),t.Z=!0,Kr(t,i,null)):Kr(t,i,r),this.G=2}}else 3==this.G&&(e?fa(this,e):0==this.i.length||Ni(this.h)||fa(this))},Lt.Ia=function(){if(this.u=null,ya(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Nr(Gt(this.eb,this),e)}},Lt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Tr(10),sa(this),ya(this))},Lt.cb=function(){null!=this.v&&(this.v=null,sa(this),va(this),Tr(19))},Lt.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Tr(2)):(this.j.info("Failed to ping google.com"),Tr(1))},(Lt=Sa.prototype).xa=function(){},Lt.wa=function(){},Lt.va=function(){},Lt.ua=function(){},Lt.Ra=function(){},Ea.prototype.g=function(e,t){return new Ta(e,t)},Yt(Ta,Xn),Ta.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Tr(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=_a(e,null,e.V),la(e)},Ta.prototype.close=function(){ua(this.g)},Ta.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Zn(e),e=n);t.i.push(new Si(t.ab++,e)),3==t.G&&la(t)},Ta.prototype.M=function(){this.g.l=null,delete this.j,ua(this.g),delete this.g,Ta.X.M.call(this)},Yt(Ca,Fr),Yt(Na,Ur),Yt(Da,Sa),Da.prototype.xa=function(){$n(this.g,"a")},Da.prototype.wa=function(e){$n(this.g,new Ca(e))},Da.prototype.va=function(e){$n(this.g,new Na)},Da.prototype.ua=function(){$n(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,Ta.prototype.send=Ta.prototype.u,Ta.prototype.open=Ta.prototype.m,Ta.prototype.close=Ta.prototype.close,Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,Ar.COMPLETE="complete",Or.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",Xn.prototype.listen=Xn.prototype.N,Hi.prototype.listenOnce=Hi.prototype.O,Hi.prototype.getLastError=Hi.prototype.Oa,Hi.prototype.getLastErrorCode=Hi.prototype.Ea,Hi.prototype.getStatus=Hi.prototype.aa,Hi.prototype.getResponseJson=Hi.prototype.Sa,Hi.prototype.getResponseText=Hi.prototype.fa,Hi.prototype.send=Hi.prototype.da,Hi.prototype.setWithCredentials=Hi.prototype.Ka;var Aa=Ft.createWebChannelTransport=function(){return new Ea},Pa=Ft.getStatEventTarget=function(){return _r()},Ra=Ft.ErrorCode=Dr,Oa=Ft.EventType=Ar,La=Ft.Event=wr,Ma=Ft.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Fa=Ft.FetchXmlHttpFactory=ji,Ua=Ft.WebChannel=Or,ja=Ft.XhrIo=Hi,Va="@firebase/firestore",Ba=function(){function e(t){N(this,e),this.uid=t}return A(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ba.UNAUTHENTICATED=new Ba(null),Ba.GOOGLE_CREDENTIALS=new Ba("google-credentials-uid"),Ba.FIRST_PARTY=new Ba("first-party-uid"),Ba.MOCK_USER=new Ba("mock-user");var za="9.14.0",qa=new Ce("@firebase/firestore");function Wa(){return qa.logLevel}function Ka(e){if(qa.logLevel<=we.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Qa);qa.debug.apply(qa,["Firestore (".concat(za,"): ").concat(e)].concat(I(i)))}}function Ha(e){if(qa.logLevel<=we.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Qa);qa.error.apply(qa,["Firestore (".concat(za,"): ").concat(e)].concat(I(i)))}}function Ga(e){if(qa.logLevel<=we.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Qa);qa.warn.apply(qa,["Firestore (".concat(za,"): ").concat(e)].concat(I(i)))}}function Qa(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(za,") INTERNAL ASSERTION FAILED: ")+e;throw Ha(t),new Error(t)}function Xa(e,t){e||Ya()}function $a(e,t){return e}var Ja={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Za=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return A(n)}(re),eo=A((function e(){var t=this;N(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),to=A((function e(t,n){N(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),no=function(){function e(){N(this,e)}return A(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ba.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ro=function(){function e(t){N(this,e),this.token=t,this.changeListener=null}return A(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),io=function(){function e(t){N(this,e),this.t=t,this.currentUser=Ba.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return A(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new eo;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new eo,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Ka("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Ka("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new eo)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ka("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Xa("string"==typeof n.accessToken),new to(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Xa(null===e||"string"==typeof e),new Ba(e)}}]),e}(),ao=function(){function e(t,n,r,i){N(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Ba.FIRST_PARTY,this.p=new Map}return A(e,[{key:"I",value:function(){return this.g?this.g():(Xa(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),oo=function(){function e(t,n,r,i){N(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return A(e,[{key:"getToken",value:function(){return Promise.resolve(new ao(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ba.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),uo=A((function e(t){N(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),so=function(){function e(t){N(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return A(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Ka("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,Ka("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Ka("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):Ka("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Xa("string"==typeof t.token),e.A=t.token,new uo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function co(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var lo=function(){function e(){N(this,e)}return A(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=co(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function fo(e,t){return e<t?-1:e>t?1:0}function ho(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function po(e){return e+"\0"}var vo=function(){function e(t,n){if(N(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Za(Ja.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Za(Ja.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Za(Ja.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Za(Ja.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return A(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?fo(this.nanoseconds,e.nanoseconds):fo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),mo=function(){function e(t){N(this,e),this.timestamp=t}return A(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new vo(0,0))}},{key:"max",value:function(){return new e(new vo(253402300799,999999999))}}]),e}(),yo=function(){function e(t,n,r){N(this,e),void 0===n?n=0:n>t.length&&Ya(),void 0===r?r=t.length-n:r>t.length-n&&Ya(),this.segments=t,this.offset=n,this.len=r}return A(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),go=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.apply(this,arguments)}return A(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Za(Ja.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,I(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(yo),ko=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bo=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.apply(this,arguments)}return A(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return ko.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Za(Ja.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Za(Ja.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Za(Ja.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Za(Ja.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(yo),wo=function(){function e(t){N(this,e),this.path=t}return A(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===go.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(go.fromString(t))}},{key:"fromName",value:function(t){return new e(go.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(go.emptyPath())}},{key:"comparator",value:function(e,t){return go.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new go(t.slice()))}}]),e}(),xo=A((function e(t,n,r,i){N(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function _o(e){return e.fields.find((function(e){return 2===e.kind}))}function Io(e){return e.fields.filter((function(e){return 2!==e.kind}))}xo.UNKNOWN_ID=-1;var So=A((function e(t,n){N(this,e),this.fieldPath=t,this.kind=n}));var Eo=function(){function e(t,n){N(this,e),this.sequenceNumber=t,this.offset=n}return A(e,null,[{key:"empty",value:function(){return new e(0,No.min())}}]),e}();function To(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=mo.fromTimestamp(1e9===r?new vo(n+1,0):new vo(n,r));return new No(i,wo.empty(),t)}function Co(e){return new No(e.readTime,e.key,-1)}var No=function(){function e(t,n,r){N(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return A(e,null,[{key:"min",value:function(){return new e(mo.min(),wo.empty(),-1)}},{key:"max",value:function(){return new e(mo.max(),wo.empty(),-1)}}]),e}();function Do(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=wo.comparator(e.documentKey,t.documentKey))?n:fo(e.largestBatchId,t.largestBatchId)}var Ao="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Po=function(){function e(){N(this,e),this.onCommittedListeners=[]}return A(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Ro(e){return Oo.apply(this,arguments)}function Oo(){return Oo=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ja.FAILED_PRECONDITION&&t.message===Ao){e.next=2;break}throw t;case 2:Ka("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}var Lo=function(){function e(t){var n=this;N(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return A(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ya(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=C(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Mo=function(){function e(t,n){var r=this;N(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new eo,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new jo(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=Wo(e.target.error);r.P.reject(new jo(t,n))}}return A(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(Ka("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Bo(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new jo(n,t)}}}]),e}(),Fo=function(){function e(t,n,r){N(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(H())&&Ha("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return A(e,[{key:"F",value:function(){var e=T(S().mark((function e(t){var n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Ka("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new jo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Za(Ja.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Za(Ja.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new jo(t,n))},i.onupgradeneeded=function(e){Ka("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){Ka("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=T(S().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(S().mark((function e(){var n,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=Mo.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Lo.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,Ka("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Ka("SimpleDb","Removing database:",e),zo(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!Q())return!1;if(e.N())return!0;var t=H(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Twitter-Clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Uo=function(){function e(t){N(this,e),this.U=t,this.q=!1,this.K=null}return A(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return zo(this.U.delete())}}]),e}(),jo=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this,Ja.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return A(n)}(Za);function Vo(e){return"IndexedDbTransactionError"===e.name}var Bo=function(){function e(t){N(this,e),this.store=t}return A(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Ka("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ka("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),zo(n)}},{key:"add",value:function(e){return Ka("SimpleDb","ADD",this.store.name,e,e),zo(this.store.add(e))}},{key:"get",value:function(e){var t=this;return zo(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Ka("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Ka("SimpleDb","DELETE",this.store.name,e),zo(this.store.delete(e))}},{key:"count",value:function(){return Ka("SimpleDb","COUNT",this.store.name),zo(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Lo((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Lo((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){Ka("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Lo((function(n,r){t.onerror=function(e){var t=Wo(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Lo((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Uo(i),o=t(i.primaryKey,i.value,a);if(o instanceof Lo){var u=o.catch((function(e){return a.done(),Lo.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Lo.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function zo(e){return new Lo((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Wo(e.target.error);n(t)}}))}var qo=!1;function Wo(e){var t=Fo.D(H());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Za("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return qo||(qo=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ko=function(){function e(t,n){N(this,e),this.asyncQueue=t,this.et=n,this.task=null}return A(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;Ka("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Ka,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Vo(e.t4)){e.next=17;break}Ka("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Ro(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Ho=function(){function e(t,n){N(this,e),this.localStore=t,this.persistence=n}return A(e,[{key:"st",value:function(){var e=T(S().mark((function e(){var t,n=this,r=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Lo.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Ka("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return Ka("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Co(t);Do(r,n)>0&&(n=r)})),new No(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Go=function(){function e(t,n){var r=this;N(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return A(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function Qo(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yo(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Xo(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}Go.at=-1;var $o=function(){function e(t,n){N(this,e),this.comparator=t,this.root=n||Zo.EMPTY}return A(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Zo.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Zo.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Jo(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Jo(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Jo(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Jo(this.root,e,this.comparator,!0)}}]),e}(),Jo=function(){function e(t,n,r,i){N(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return A(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Zo=function(){function e(t,n,r,i,a){N(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return A(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ya();if(this.right.isRed())throw Ya();var e=this.left.check();if(e!==this.right.check())throw Ya();return e+(this.isRed()?0:1)}}]),e}();Zo.EMPTY=null,Zo.RED=!0,Zo.BLACK=!1,Zo.EMPTY=new(function(){function e(){N(this,e),this.size=0}return A(e,[{key:"key",get:function(){throw Ya()}},{key:"value",get:function(){throw Ya()}},{key:"color",get:function(){throw Ya()}},{key:"left",get:function(){throw Ya()}},{key:"right",get:function(){throw Ya()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Zo(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var eu=function(){function e(t){N(this,e),this.comparator=t,this.data=new $o(this.comparator)}return A(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new tu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new tu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),tu=function(){function e(t){N(this,e),this.iter=t}return A(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function nu(e){return e.hasNext()?e.getNext():void 0}var ru=function(){function e(t){N(this,e),this.fields=t,t.sort(bo.comparator)}return A(e,[{key:"unionWith",value:function(t){var n,r=new eu(bo.comparator),i=C(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=C(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=C(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return ho(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var iu=function(e){function t(e){N(this,t),this.binaryString=e}return A(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return fo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();iu.EMPTY_BYTE_STRING=new iu("");var au=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ou(e){if(Xa(!!e),"string"==typeof e){var t=0,n=au.exec(e);if(Xa(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:uu(e.seconds),nanos:uu(e.nanos)}}function uu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function su(e){return"string"==typeof e?iu.fromBase64String(e):iu.fromUint8Array(e)}function cu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function lu(e){var t=e.mapValue.fields.__previous_value__;return cu(t)?lu(t):t}function fu(e){var t=ou(e.mapValue.fields.__local_write_time__.timestampValue);return new vo(t.seconds,t.nanos)}var hu=A((function e(t,n,r,i,a,o,u,s){N(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),du=function(){function e(t,n){N(this,e),this.projectId=t,this.database=n||"(default)"}return A(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function pu(e){return null==e}function vu(e){return 0===e&&1/e==-1/0}function mu(e){return"number"==typeof e&&Number.isInteger(e)&&!vu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var yu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gu={nullValue:"NULL_VALUE"};function ku(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cu(e)?4:Ru(e)?9007199254740991:10:Ya()}function bu(e,t){if(e===t)return!0;var n=ku(e);if(n!==ku(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fu(e).isEqual(fu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=ou(e.timestampValue),r=ou(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return su(e.bytesValue).isEqual(su(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return uu(e.geoPointValue.latitude)===uu(t.geoPointValue.latitude)&&uu(e.geoPointValue.longitude)===uu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return uu(e.integerValue)===uu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=uu(e.doubleValue),r=uu(t.doubleValue);return n===r?vu(n)===vu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ho(e.arrayValue.values||[],t.arrayValue.values||[],bu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qo(n)!==Qo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!bu(n[i],r[i])))return!1;return!0}(e,t);default:return Ya()}}function wu(e,t){return void 0!==(e.values||[]).find((function(e){return bu(e,t)}))}function xu(e,t){if(e===t)return 0;var n=ku(e),r=ku(t);if(n!==r)return fo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=uu(e.integerValue||e.doubleValue),r=uu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _u(e.timestampValue,t.timestampValue);case 4:return _u(fu(e),fu(t));case 5:return fo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=su(e),r=su(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=fo(n[i],r[i]);if(0!==a)return a}return fo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=fo(uu(e.latitude),uu(t.latitude));return 0!==n?n:fo(uu(e.longitude),uu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=xu(n[i],r[i]);if(a)return a}return fo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===yu.mapValue&&t===yu.mapValue)return 0;if(e===yu.mapValue)return 1;if(t===yu.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=fo(r[o],a[o]);if(0!==u)return u;var s=xu(n[r[o]],i[a[o]]);if(0!==s)return s}return fo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ya()}}function _u(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fo(e,t);var n=ou(e),r=ou(t),i=fo(n.seconds,r.seconds);return 0!==i?i:fo(n.nanos,r.nanos)}function Iu(e){return Su(e)}function Su(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=ou(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?su(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,wo.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=C(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Su(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=C(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Su(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ya();var t,n}function Eu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Tu(e){return!!e&&"integerValue"in e}function Cu(e){return!!e&&"arrayValue"in e}function Nu(e){return!!e&&"nullValue"in e}function Du(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Au(e){return!!e&&"mapValue"in e}function Pu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Yo(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Pu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Pu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Ru(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ou(e){return"nullValue"in e?gu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Eu(du.empty(),wo.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ya()}function Lu(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Eu(du.empty(),wo.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?yu:Ya()}function Mu(e,t){var n=xu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Fu(e,t){var n=xu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Uu=function(){function e(t){N(this,e),this.value=t}return A(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Au(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(t)}},{key:"setAll",value:function(e){var t=this,n=bo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Pu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Au(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return bu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Au(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Yo(t,(function(t,n){return e[t]=n}));var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Pu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ju(e){var t=[];return Yo(e.fields,(function(e,n){var r=new bo([e]);if(Au(n)){var i=ju(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=C(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new ru(t)}var Vu=function(){function e(t,n,r,i,a,o){N(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return A(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Uu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Uu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=mo.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,mo.min(),mo.min(),Uu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,mo.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,mo.min(),Uu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,mo.min(),Uu.empty(),2)}}]),e}(),Bu=A((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;N(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function zu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Bu(e,t,n,r,i,a,o)}function qu(e){var t=$a(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Iu(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),pu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Iu(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Iu(e)})).join(",")),t.ht=n}return t.ht}function Wu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!os(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!bu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ss(e.startAt,t.startAt)&&ss(e.endAt,t.endAt)}function Ku(e){return wo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Hu(e,t){return e.filters.filter((function(e){return e instanceof Yu&&e.field.isEqual(t)}))}function Gu(e,t,n){var r,i=gu,a=!0,o=C(Hu(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=gu,c=!0;switch(u.op){case"<":case"<=":s=Ou(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=gu}Mu({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Mu({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Qu(e,t,n){var r,i=yu,a=!0,o=C(Hu(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=yu,c=!0;switch(u.op){case">=":case">":s=Lu(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=yu}Fu({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Fu({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Yu=function(e){O(n,e);var t=U(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return A(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(xu(t,this.value)):null!==t&&ku(this.value)===ku(t)&&this.ft(xu(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ya()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new Xu(e,t,r):"array-contains"===t?new es(e,r):"in"===t?new ts(e,r):"not-in"===t?new ns(e,r):"array-contains-any"===t?new rs(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new $u(e,n):new Ju(e,n)}}]),n}(function(){return A((function e(){N(this,e)}))}()),Xu=function(e){O(n,e);var t=U(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this,e,r,i)).key=wo.fromName(i.referenceValue),a}return A(n,[{key:"matches",value:function(e){var t=wo.comparator(e.key,this.key);return this.ft(t)}}]),n}(Yu),$u=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,"in",r)).keys=Zu("in",r),i}return A(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Yu),Ju=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,"not-in",r)).keys=Zu("not-in",r),i}return A(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Yu);function Zu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return wo.fromName(e.referenceValue)}))}var es=function(e){O(n,e);var t=U(n);function n(e,r){return N(this,n),t.call(this,e,"array-contains",r)}return A(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Cu(t)&&wu(t.arrayValue,this.value)}}]),n}(Yu),ts=function(e){O(n,e);var t=U(n);function n(e,r){return N(this,n),t.call(this,e,"in",r)}return A(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&wu(this.value.arrayValue,t)}}]),n}(Yu),ns=function(e){O(n,e);var t=U(n);function n(e,r){return N(this,n),t.call(this,e,"not-in",r)}return A(n,[{key:"matches",value:function(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!wu(this.value.arrayValue,t)}}]),n}(Yu),rs=function(e){O(n,e);var t=U(n);function n(e,r){return N(this,n),t.call(this,e,"array-contains-any",r)}return A(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Cu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return wu(t.value.arrayValue,e)}))}}]),n}(Yu),is=A((function e(t,n){N(this,e),this.position=t,this.inclusive=n})),as=A((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";N(this,e),this.field=t,this.dir=n}));function os(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function us(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?wo.comparator(wo.fromName(o.referenceValue),n.key):xu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ss(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!bu(e.position[n],t.position[n]))return!1;return!0}var cs=A((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;N(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function ls(e,t,n,r,i,a,o,u){return new cs(e,t,n,r,i,a,o,u)}function fs(e){return new cs(e)}function hs(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ds(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ps(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function vs(e){return null!==e.collectionGroup}function ms(e){var t=$a(e);if(null===t._t){t._t=[];var n=ps(t),r=ds(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new as(n)),t._t.push(new as(bo.keyField(),"asc"));else{var i,a=!1,o=C(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new as(bo.keyField(),s))}}}return t._t}function ys(e){var t=$a(e);if(!t.wt)if("F"===t.limitType)t.wt=zu(t.path,t.collectionGroup,ms(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=C(ms(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new as(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new is(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new is(t.startAt.position,t.startAt.inclusive):null;t.wt=zu(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function gs(e,t,n){return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ks(e,t){return Wu(ys(e),ys(t))&&e.limitType===t.limitType}function bs(e){return"".concat(qu(ys(e)),"|lt:").concat(e.limitType)}function ws(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Iu(t.value));var t})).join(", "),"]")),pu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Iu(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Iu(e)})).join(",")),"Target(".concat(t,")")}(ys(e)),"; limitType=").concat(e.limitType,")")}function xs(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=C(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=C(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=us(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ms(e),t))&&!(e.endAt&&!function(e,t,n){var r=us(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ms(e),t))}(e,t)}function _s(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Is(e){return function(t,n){var r,i=!1,a=C(ms(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Ss(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Ss(e,t,n){var r=e.field.isKeyField()?wo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?xu(r,i):Ya()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ya()}}function Es(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vu(t)?"-0":t}}function Ts(e){return{integerValue:""+e}}function Cs(e,t){return mu(t)?Ts(t):Es(e,t)}var Ns=A((function e(){N(this,e),this._=void 0}));function Ds(e,t,n){return e instanceof Rs?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Os?Ls(e,t):e instanceof Ms?Fs(e,t):function(e,t){var n=Ps(e,t),r=js(n)+js(e.yt);return Tu(n)&&Tu(e.yt)?Ts(r):Es(e.It,r)}(e,t)}function As(e,t,n){return e instanceof Os?Ls(e,t):e instanceof Ms?Fs(e,t):n}function Ps(e,t){return e instanceof Us?Tu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Rs=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.apply(this,arguments)}return A(n)}(Ns),Os=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this)).elements=e,r}return A(n)}(Ns);function Ls(e,t){var n,r=Vs(t),i=C(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return bu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ms=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this)).elements=e,r}return A(n)}(Ns);function Fs(e,t){var n,r=Vs(t),i=C(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!bu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Us=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).It=e,i.yt=r,i}return A(n)}(Ns);function js(e){return uu(e.integerValue||e.doubleValue)}function Vs(e){return Cu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Bs=A((function e(t,n){N(this,e),this.field=t,this.transform=n}));var zs=A((function e(t,n){N(this,e),this.version=t,this.transformResults=n})),qs=function(){function e(t,n){N(this,e),this.updateTime=t,this.exists=n}return A(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Ws(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ks=A((function e(){N(this,e)}));function Hs(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ic(e.key,qs.none()):new $s(e.key,e.data,qs.none());var n,r=e.data,i=Uu.empty(),a=new eu(bo.comparator),o=C(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Js(e.key,i,new ru(a.toArray()),qs.none())}function Gs(e,t,n){e instanceof $s?function(e,t,n){var r=e.value.clone(),i=ec(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Js?function(e,t,n){if(Ws(e.precondition,t)){var r=ec(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Zs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Qs(e,t,n,r){return e instanceof $s?function(e,t,n,r){if(!Ws(e.precondition,t))return n;var i=e.value.clone(),a=tc(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Js?function(e,t,n,r){if(!Ws(e.precondition,t))return n;var i=tc(e.fieldTransforms,r,t),a=t.data;return a.setAll(Zs(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Ws(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ys(e,t){var n,r=null,i=C(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Ps(a.transform,o||null);null!=u&&(null===r&&(r=Uu.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Xs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ho(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Os&&t instanceof Os||e instanceof Ms&&t instanceof Ms?ho(e.elements,t.elements,bu):e instanceof Us&&t instanceof Us?bu(e.yt,t.yt):e instanceof Rs&&t instanceof Rs}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var $s=function(e){O(n,e);var t=U(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return N(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return A(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ks),Js=function(e){O(n,e);var t=U(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return N(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return A(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Ks);function Zs(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function ec(e,t,n){var r=new Map;Xa(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,As(o,u,n[i]))}return r}function tc(e,t,n){var r,i=new Map,a=C(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ds(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var nc,rc,ic=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return A(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ks),ac=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return A(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Ks),oc=A((function e(t){N(this,e),this.count=t}));function uc(e){switch(e){default:return Ya();case Ja.CANCELLED:case Ja.UNKNOWN:case Ja.DEADLINE_EXCEEDED:case Ja.RESOURCE_EXHAUSTED:case Ja.INTERNAL:case Ja.UNAVAILABLE:case Ja.UNAUTHENTICATED:return!1;case Ja.INVALID_ARGUMENT:case Ja.NOT_FOUND:case Ja.ALREADY_EXISTS:case Ja.PERMISSION_DENIED:case Ja.FAILED_PRECONDITION:case Ja.ABORTED:case Ja.OUT_OF_RANGE:case Ja.UNIMPLEMENTED:case Ja.DATA_LOSS:return!0}}function sc(e){if(void 0===e)return Ha("GRPC error has no .code"),Ja.UNKNOWN;switch(e){case nc.OK:return Ja.OK;case nc.CANCELLED:return Ja.CANCELLED;case nc.UNKNOWN:return Ja.UNKNOWN;case nc.DEADLINE_EXCEEDED:return Ja.DEADLINE_EXCEEDED;case nc.RESOURCE_EXHAUSTED:return Ja.RESOURCE_EXHAUSTED;case nc.INTERNAL:return Ja.INTERNAL;case nc.UNAVAILABLE:return Ja.UNAVAILABLE;case nc.UNAUTHENTICATED:return Ja.UNAUTHENTICATED;case nc.INVALID_ARGUMENT:return Ja.INVALID_ARGUMENT;case nc.NOT_FOUND:return Ja.NOT_FOUND;case nc.ALREADY_EXISTS:return Ja.ALREADY_EXISTS;case nc.PERMISSION_DENIED:return Ja.PERMISSION_DENIED;case nc.FAILED_PRECONDITION:return Ja.FAILED_PRECONDITION;case nc.ABORTED:return Ja.ABORTED;case nc.OUT_OF_RANGE:return Ja.OUT_OF_RANGE;case nc.UNIMPLEMENTED:return Ja.UNIMPLEMENTED;case nc.DATA_LOSS:return Ja.DATA_LOSS;default:return Ya()}}(rc=nc||(nc={}))[rc.OK=0]="OK",rc[rc.CANCELLED=1]="CANCELLED",rc[rc.UNKNOWN=2]="UNKNOWN",rc[rc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rc[rc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rc[rc.NOT_FOUND=5]="NOT_FOUND",rc[rc.ALREADY_EXISTS=6]="ALREADY_EXISTS",rc[rc.PERMISSION_DENIED=7]="PERMISSION_DENIED",rc[rc.UNAUTHENTICATED=16]="UNAUTHENTICATED",rc[rc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rc[rc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rc[rc.ABORTED=10]="ABORTED",rc[rc.OUT_OF_RANGE=11]="OUT_OF_RANGE",rc[rc.UNIMPLEMENTED=12]="UNIMPLEMENTED",rc[rc.INTERNAL=13]="INTERNAL",rc[rc.UNAVAILABLE=14]="UNAVAILABLE",rc[rc.DATA_LOSS=15]="DATA_LOSS";var cc=function(){function e(t,n){N(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return A(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Yo(this.inner,(function(t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Xo(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),lc=new $o(wo.comparator);function fc(){return lc}var hc=new $o(wo.comparator);function dc(){for(var e=hc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function pc(e){var t=hc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function vc(){return yc()}function mc(){return yc()}function yc(){return new cc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var gc=new $o(wo.comparator),kc=new eu(wo.comparator);function bc(){for(var e=kc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var wc=new eu(fo);function xc(){return wc}var _c=function(){function e(t,n,r,i,a){N(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return A(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Ic.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(mo.min(),i,xc(),fc(),bc())}}]),e}(),Ic=function(){function e(t,n,r,i,a){N(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return A(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,bc(),bc(),bc())}}]),e}(),Sc=A((function e(t,n,r,i){N(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),Ec=A((function e(t,n){N(this,e),this.targetId=t,this.At=n})),Tc=A((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:iu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;N(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Cc=function(){function e(){N(this,e),this.Rt=0,this.bt=Ac(),this.Pt=iu.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return A(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=bc(),t=bc(),n=bc();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ya()}})),new Ic(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=Ac()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Ot",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),Nc=function(){function e(t){N(this,e),this.Bt=t,this.Lt=new Map,this.Ut=fc(),this.qt=Dc(),this.Kt=new eu(fo)}return A(e,[{key:"Gt",value:function(e){var t,n=C(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=C(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:Ya()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(Ku(i))if(0===n){var a=new wo(i.path);this.jt(t,a,Vu.newNoDocument(a,mo.min()))}else Xa(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&Ku(a.target)){var o=new wo(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,Vu.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=bc();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new _c(e,n,this.Kt,this.Ut,r);return this.Ut=fc(),this.qt=Dc(),this.Kt=new eu(fo),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Mt",value:function(e){this.zt(e).Mt()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new Cc,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new eu(fo),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||Ka("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new Cc),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Dc(){return new $o(wo.comparator)}function Ac(){return new $o(wo.comparator)}var Pc={asc:"ASCENDING",desc:"DESCENDING"},Rc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oc=A((function e(t,n){N(this,e),this.databaseId=t,this.gt=n}));function Lc(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Mc(e,t){return e.gt?t.toBase64():t.toUint8Array()}function Fc(e,t){return Lc(e,t.toTimestamp())}function Uc(e){return Xa(!!e),mo.fromTimestamp(function(e){var t=ou(e);return new vo(t.seconds,t.nanos)}(e))}function jc(e,t){return function(e){return new go(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Vc(e){var t=go.fromString(e);return Xa(cl(t)),t}function Bc(e,t){return jc(e.databaseId,t.path)}function zc(e,t){var n=Vc(t);if(n.get(1)!==e.databaseId.projectId)throw new Za(Ja.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Za(Ja.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wo(Hc(n))}function qc(e,t){return jc(e.databaseId,t)}function Wc(e){var t=Vc(e);return 4===t.length?go.emptyPath():Hc(t)}function Kc(e){return new go(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Hc(e){return Xa(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Gc(e,t,n){return{name:Bc(e,t),fields:n.value.mapValue.fields}}function Qc(e,t,n){var r=zc(e,t.name),i=Uc(t.updateTime),a=new Uu({mapValue:{fields:t.fields}}),o=Vu.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Yc(e,t){return"found"in t?function(e,t){Xa(!!t.found),t.found.name,t.found.updateTime;var n=zc(e,t.found.name),r=Uc(t.found.updateTime),i=new Uu({mapValue:{fields:t.found.fields}});return Vu.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Xa(!!t.missing),Xa(!!t.readTime);var n=zc(e,t.missing),r=Uc(t.readTime);return Vu.newNoDocument(n,r)}(e,t):Ya()}function Xc(e,t){var n;if(t instanceof $s)n={update:Gc(e,t.key,t.value)};else if(t instanceof ic)n={delete:Bc(e,t.key)};else if(t instanceof Js)n={update:Gc(e,t.key,t.data),updateMask:sl(t.fieldMask)};else{if(!(t instanceof ac))return Ya();n={verify:Bc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Rs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Os)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ms)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Us)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw Ya()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Fc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ya()}(e,t.precondition)),n}function $c(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?qs.updateTime(Uc(e.updateTime)):void 0!==e.exists?qs.exists(e.exists):qs.none()}(t.currentDocument):qs.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Xa("REQUEST_TIME"===t.setToServerValue),n=new Rs;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Os(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Ms(i)}else"increment"in t?n=new Us(e,t.increment):Ya();var a=bo.fromServerFormat(t.fieldPath);return new Bs(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=zc(e,t.update.name),a=new Uu({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ru(t.map((function(e){return bo.fromServerFormat(e)})))}(t.updateMask);return new Js(i,a,o,n,r)}return new $s(i,a,n,r)}if(t.delete){var u=zc(e,t.delete);return new ic(u,n)}if(t.verify){var s=zc(e,t.verify);return new ac(s,n)}return Ya()}function Jc(e,t){return{documents:[qc(e,t.path)]}}function Zc(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=qc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=qc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Du(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NAN"}};if(Nu(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Du(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NOT_NAN"}};if(Nu(e.value))return{unaryFilter:{field:il(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(e.field),op:rl(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:il(e.field),direction:nl(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||pu(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function el(e){var t=Wc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Xa(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=tl(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new as(al(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return pu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new is(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new is(n,t)}(n.endAt)),ls(t,i,u,o,s,"F",c,l)}function tl(e){return e?void 0!==e.unaryFilter?[ul(e)]:void 0!==e.fieldFilter?[ol(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return tl(e)})).reduce((function(e,t){return e.concat(t)})):Ya():[]}function nl(e){return Pc[e]}function rl(e){return Rc[e]}function il(e){return{fieldPath:e.canonicalString()}}function al(e){return bo.fromServerFormat(e.fieldPath)}function ol(e){return Yu.create(al(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ya()}}(e.fieldFilter.op),e.fieldFilter.value)}function ul(e){switch(e.unaryFilter.op){case"IS_NAN":var t=al(e.unaryFilter.field);return Yu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=al(e.unaryFilter.field);return Yu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=al(e.unaryFilter.field);return Yu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=al(e.unaryFilter.field);return Yu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ya()}}function sl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function cl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ll(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=hl(t)),t=fl(e.get(n),t);return hl(t)}function fl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function hl(e){return e+"\x01\x01"}function dl(e){var t=e.length;if(Xa(t>=2),2===t)return Xa("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),go.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ya(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ya()}a=o+2}return new go(r)}var pl=["userId","batchId"];function vl(e,t){return[e,ll(t)]}function ml(e,t,n){return[e,ll(t),n]}var yl={},gl=["prefixPath","collectionGroup","readTime","documentId"],kl=["prefixPath","collectionGroup","documentId"],bl=["collectionGroup","readTime","prefixPath","documentId"],wl=["canonicalId","targetId"],xl=["targetId","path"],_l=["path","targetId"],Il=["collectionId","parent"],Sl=["indexId","uid"],El=["uid","sequenceNumber"],Tl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cl=["indexId","uid","orderedDocumentKey"],Nl=["userId","collectionPath","documentId"],Dl=["userId","collectionPath","largestBatchId"],Al=["userId","collectionGroup","largestBatchId"],Pl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Rl=[].concat(I(Pl),["documentOverlays"]),Ol=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ll=Ol,Ml=[].concat(Ll,["indexConfiguration","indexState","indexEntries"]),Fl=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return A(n)}(Po);function Ul(e,t){var n=$a(e);return Fo.M(n.ie,t)}var jl=function(){function e(t,n,r,i){N(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return A(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Gs(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=C(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Qs(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=C(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Qs(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=mc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Hs(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(mo.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),bc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(function(e,t){return Xs(e,t)}))&&ho(this.baseMutations,e.baseMutations,(function(e,t){return Xs(e,t)}))}}]),e}(),Vl=function(){function e(t,n,r,i){N(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return A(e,null,[{key:"from",value:function(t,n,r){Xa(t.mutations.length===r.length);for(var i=gc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Bl=function(){function e(t,n){N(this,e),this.largestBatchId=t,this.mutation=n}return A(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),zl=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:mo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:mo.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:iu.EMPTY_BYTE_STRING;N(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return A(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ql=A((function e(t){N(this,e),this.re=t}));function Wl(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Kl(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Bc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Lc(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Hl(t.version)};else{if(!t.isUnknownDocument())return Ya();r.unknownDocument={path:n.path.toArray(),version:Hl(t.version)}}return r}function Kl(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Hl(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Gl(e){var t=new vo(e.seconds,e.nanoseconds);return mo.fromTimestamp(t)}function Ql(e,t){for(var n=(t.baseMutations||[]).map((function(t){return $c(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return $c(e.re,t)})),u=vo.fromMillis(t.localWriteTimeMs);return new jl(t.batchId,u,n,o)}function Yl(e){var t,n,r=Gl(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Gl(e.lastLimboFreeSnapshotVersion):mo.min();return void 0!==e.query.documents?(Xa(1===(n=e.query).documents.length),t=ys(fs(Wc(n.documents[0])))):t=function(e){return ys(el(e))}(e.query),new zl(t,e.targetId,0,e.lastListenSequenceNumber,r,i,iu.fromBase64String(e.resumeToken))}function Xl(e,t){var n,r=Hl(t.snapshotVersion),i=Hl(t.lastLimboFreeSnapshotVersion);n=Ku(t.target)?Jc(e.re,t.target):Zc(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:qu(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function $l(e){var t=el({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?gs(t,t.limit,"L"):t}function Jl(e,t){return new Bl(t.largestBatchId,$c(e.re,t.overlayMutation))}function Zl(e,t){var n=t.path.lastSegment();return[e,ll(t.path.popLast()),n]}function ef(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Hl(r.readTime),documentKey:ll(r.documentKey.path),largestBatchId:r.largestBatchId}}var tf=function(){function e(){N(this,e)}return A(e,[{key:"getBundleMetadata",value:function(e,t){return nf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Gl(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return nf(e).put({bundleId:(n=t).id,createTime:Hl(Uc(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return rf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:$l(t.bundledQuery),readTime:Gl(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return rf(e).put(function(e){return{name:e.name,readTime:Hl(Uc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function nf(e){return Ul(e,"bundles")}function rf(e){return Ul(e,"namedQueries")}var af=function(){function e(t,n){N(this,e),this.It=t,this.userId=n}return A(e,[{key:"getOverlay",value:function(e,t){var n=this;return of(e).get(Zl(this.userId,t)).next((function(e){return e?Jl(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=vc();return Lo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Bl(t,a);i.push(r.ue(e,o))})),Lo.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(ll(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(of(e).Y("collectionPathOverlayIndex",i))})),Lo.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=vc(),a=ll(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return of(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Jl(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=vc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return of(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Jl(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return of(e).put(function(e,t,n){var r=u(Zl(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Xc(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function of(e){return Ul(e,"documentOverlays")}var uf=function(){function e(){N(this,e)}return A(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(uu(e.integerValue));else if("doubleValue"in e){var n=uu(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),vu(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(su(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?Ru(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Ya()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),wo.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function sf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function cf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=sf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}uf.Te=new uf;var lf=function(){function e(){N(this,e),this.buffer=new Uint8Array(1024),this.position=0}return A(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=cf(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=cf(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"Me",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Oe(0),this.Oe(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Oe",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),ff=function(){function e(t){N(this,e),this.Be=t}return A(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),hf=function(){function e(t){N(this,e),this.Be=t}return A(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Me()}}]),e}(),df=function(){function e(){N(this,e),this.Be=new lf,this.Le=new ff(this.Be),this.Ue=new hf(this.Be)}return A(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),pf=function(){function e(t,n,r,i){N(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return A(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function vf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=mf(e.arrayValue,t.arrayValue))?n:0!==(n=mf(e.directionalValue,t.directionalValue))?n:wo.comparator(e.documentKey,t.documentKey)}function mf(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var yf=function(){function e(t){N(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=C(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return A(e,[{key:"We",value:function(e){var t=_o(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=Io(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=C(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),gf=function(){function e(){N(this,e),this.Ye=new kf}return A(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),Lo.resolve()}},{key:"getCollectionParents",value:function(e,t){return Lo.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Lo.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Lo.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Lo.resolve(null)}},{key:"getIndexType",value:function(e,t){return Lo.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Lo.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Lo.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Lo.resolve(No.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Lo.resolve(No.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Lo.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Lo.resolve()}}]),e}(),kf=function(){function e(){N(this,e),this.index={}}return A(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new eu(go.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new eu(go.comparator)).toArray()}}]),e}(),bf=new Uint8Array(0),wf=function(){function e(t,n){N(this,e),this.user=t,this.databaseId=n,this.Xe=new kf,this.Ze=new cc((function(e){return qu(e)}),(function(e,t){return Wu(e,t)})),this.uid=t.uid||""}return A(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:ll(i)};return xf(e).put(a)}return Lo.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[po(t),""],!1,!0);return xf(e).W(r).next((function(e){var r,i=C(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(dl(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=If(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Sf(e);return a.next((function(e){o.put(ef(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=If(e),r=Sf(e),i=_f(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=_f(e),i=!0,a=new Map;return Lo.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=bc(),o=[];return Lo.forEach(a,(function(i,a){var u;Ka("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(qu(t)));var s=function(e,t){var n=_o(t);if(void 0===n)return null;var r,i=C(Hu(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=C(Io(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=C(Hu(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=C(Io(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Gu(e,o.fieldPath,e.startAt):Qu(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new is(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=C(Io(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Qu(e,o.fieldPath,e.endAt):Gu(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new is(r,i)}(a,i),h=n.nn(i,a,l),d=n.nn(i,a,f),p=n.sn(i,a,c),v=n.rn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Lo.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=wo.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Lo.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.on(t[s/c]):bf,h=u.un(e,f,n[s%c],r),d=u.cn(e,f,i[s%c],a),p=o.map((function(t){return u.un(e,f,t,!0)}));l.push.apply(l,I(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"un",value:function(e,t,n,r){var i=new pf(e,wo.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new pf(e,wo.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new yf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=C(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Lo.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new eu(bo.comparator),r=!1,i=C(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=C(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new df,i=C(Io(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);uf.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new df;return uf.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new df;return uf.Te.ce(Eu(this.databaseId,t),n.qe(function(e){var t=Io(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new df);var i,a=0,o=C(Io(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=C(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.ln(t,s.fieldPath)&&Cu(c))r=this.fn(r,s,c);else{var h=f.qe(s.kind);uf.Te.ce(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=I(e),a=[],o=C(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=C(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new df;f.seed(l.$e()),uf.Te.ce(s,f.qe(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Yu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=If(e),i=Sf(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Lo.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Eo(t.sequenceNumber,new No(Gl(t.readTime),new wo(dl(t.documentKey)),t.largestBatchId)):Eo.empty(),r=e.fields.map((function(e){var t=u(e,2),n=t[0],r=t[1];return new So(bo.fromServerFormat(n),r)}));return new xo(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:fo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=If(e),a=Sf(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Lo.forEach(t,(function(t){return a.put(ef(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Lo.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Lo.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Lo.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?Lo.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return _f(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return _f(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=_f(e),i=new eu(vf);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new pf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new eu(vf),r=this.an(t,e);if(null==r)return n;var i=_o(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Cu(a)){var o,u=C(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new pf(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new pf(t.indexId,e.key,bf,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;Ka("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=nu(a),s=nu(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=nu(o)):l?(i(u),u=nu(a)):(u=nu(a),s=nu(o))}}(r,i,vf,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),Lo.waitFor(o)}},{key:"_n",value:function(e){var t=1;return Sf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return vf(e,t)})).filter((function(e,t,n){return!t||0!==vf(e,n[t-1])}));var r=[];r.push(e);var i,a=C(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=vf(o,e),s=vf(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,bf,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,bf,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Ef)}},{key:"getMinOffset",value:function(e,t){var n=this;return Lo.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||Ya()}))})).next(Ef)}}]),e}();function xf(e){return Ul(e,"collectionParents")}function _f(e){return Ul(e,"indexEntries")}function If(e){return Ul(e,"indexConfiguration")}function Sf(e){return Ul(e,"indexState")}function Ef(e){Xa(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Do(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new No(t.readTime,t.documentKey,n)}var Tf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cf=function(){function e(t,n,r){N(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return A(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Nf(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Xa(1===u)})));var c,l=[],f=C(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ml(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Lo.waitFor(a).next((function(){return l}))}function Df(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ya();t=e.noDocument}return JSON.stringify(t).length}Cf.DEFAULT_COLLECTION_PERCENTILE=10,Cf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cf.DEFAULT=new Cf(41943040,Cf.DEFAULT_COLLECTION_PERCENTILE,Cf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cf.DISABLED=new Cf(-1,0,0);var Af=function(){function e(t,n,r,i){N(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return A(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rf(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Of(e),o=Rf(e);return o.add({}).next((function(u){Xa("number"==typeof u);var s,c=new jl(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Xc(e.re,t)})),i=n.mutations.map((function(t){return Xc(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),f=[],h=new eu((function(e,t){return fo(e.canonicalString(),t.canonicalString())})),d=C(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ml(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,yl))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),Lo.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Rf(e).get(t).next((function(e){return e?(Xa(e.userId===n.userId),Ql(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?Lo.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Rf(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Xa(t.batchId>=r),a=Ql(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Rf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rf(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return Ql(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=vl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Of(e).Z({range:i},(function(r,i,o){var s=u(r,3),c=s[0],l=s[1],f=s[2],h=dl(l);if(c===n.userId&&t.path.isEqual(h))return Rf(e).get(f).next((function(e){if(!e)throw Ya();Xa(e.userId===n.userId),a.push(Ql(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new eu(fo),i=[];return t.forEach((function(t){var a=vl(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Of(e).Z({range:o},(function(e,i,a){var o=u(e,3),s=o[0],c=o[1],l=o[2],f=dl(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),Lo.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=vl(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new eu(fo);return Of(e).Z({range:o},(function(e,t,a){var o=u(e,3),c=o[0],l=o[1],f=o[2],h=dl(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.En(e,s)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Rf(e).get(t).next((function(e){if(null===e)throw Ya();Xa(e.userId===n.userId),r.push(Ql(n.It,e))})))})),Lo.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Nf(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),Lo.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Lo.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Of(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=dl(e[1]);i.push(a)}else r.done()})).next((function(){Xa(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Pf(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return Lf(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return Xa(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Pf(e,t,n){var r=vl(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Of(e).Z({range:a,X:!0},(function(e,n,r){var a=u(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function Rf(e){return Ul(e,"mutations")}function Of(e){return Ul(e,"documentMutations")}function Lf(e){return Ul(e,"mutationQueues")}var Mf=function(){function e(t){N(this,e),this.bn=t}return A(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),Ff=function(){function e(t,n){N(this,e),this.referenceDelegate=t,this.It=n}return A(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new Mf(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return mo.fromTimestamp(new vo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Uf(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Xa(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Uf(e).Z((function(o,u){var s=Yl(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Lo.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Uf(e).Z((function(e,n){var r=Yl(n);t(r)}))}},{key:"Vn",value:function(e){return jf(e).get("targetGlobalKey").next((function(e){return Xa(null!==e),e}))}},{key:"Sn",value:function(e,t){return jf(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return Uf(e).put(Xl(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=qu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Uf(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Yl(n);Wu(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Vf(e);return t.forEach((function(t){var o=ll(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Lo.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Vf(e);return Lo.forEach(t,(function(t){var a=ll(t.path);return Lo.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Vf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Vf(e),i=bc();return r.Z({range:n,X:!0},(function(e,t,n){var r=dl(e[1]),a=new wo(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=ll(t.path),r=IDBKeyRange.bound([n],[po(n)],!1,!0),i=0;return Vf(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=u(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return Uf(e).get(t).next((function(e){return e?Yl(e):null}))}}]),e}();function Uf(e){return Ul(e,"targets")}function jf(e){return Ul(e,"targetGlobal")}function Vf(e){return Ul(e,"targetDocuments")}function Bf(e,t){var n=u(e,2),r=n[0],i=n[1],a=u(t,2),o=a[0],s=a[1],c=fo(r,o);return 0===c?fo(i,s):c}var zf=function(){function e(t){N(this,e),this.xn=t,this.buffer=new eu(Bf),this.Nn=0}return A(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Bf(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),qf=function(){function e(t,n,r){N(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return A(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;Ka("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Vo(e.t0)){e.next=12;break}Ka("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Ro(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Wf=function(){function e(t,n){N(this,e),this.$n=t,this.params=n}return A(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Lo.resolve(Go.at);var r=new zf(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ka("LruGarbageCollector","Garbage collection skipped; disabled"),Lo.resolve(Tf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ka("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Tf):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ka("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Wa()<=we.DEBUG&&Ka("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Lo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Kf=function(){function e(t,n){N(this,e),this.db=t,this.garbageCollector=function(e,t){return new Wf(e,t)}(this,n)}return A(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Hf(e,n)}},{key:"removeReference",value:function(e,t,n){return Hf(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Hf(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return Lf(e).tt((function(r){return Pf(e,r,t).next((function(e){return e&&(n=!0),Lo.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,mo.min()),Vf(e).delete([0,ll(o.path)])}))}));i.push(s)}})).next((function(){return Lo.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Hf(e,t)}},{key:"Kn",value:function(e,t){var n,r=Vf(e),i=Go.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=u(e,2),o=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Go.at&&t(new wo(dl(n)),i),i=c,n=s):i=Go.at})).next((function(){i!==Go.at&&t(new wo(dl(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Hf(e,t){return Vf(e).put(function(e,t){return{targetId:0,path:ll(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Gf=function(){function e(){N(this,e),this.changes=new cc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return A(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Vu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Lo.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Qf=function(){function e(t){N(this,e),this.It=t}return A(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Jf(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Jf(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Kl(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Vu.newInvalidDocument(t);return Jf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Zf(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:Vu.newInvalidDocument(t)};return Jf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Zf(t))},(function(e,i){r={document:n.jn(t,i),size:Df(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=fc();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=fc(),i=new $o(wo.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,Df(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return Lo.resolve();var r=new eu(th);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Zf(r.first()),Zf(r.last())),a=r.getIterator(),o=a.getNext();return Jf(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=wo.fromSegments([].concat(I(t.prefixPath),[t.collectionGroup,t.documentId]));o&&th(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(Zf(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Kl(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jf(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=fc(),i=C(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(wo.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=fc(),o=eh(t,n),u=eh(t,No.max());return Jf(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(wo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Xf(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return $f(e).get("remoteDocumentGlobalKey").next((function(e){return Xa(!!e),e}))}},{key:"Qn",value:function(e,t){return $f(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Qc(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=wo.fromSegments(t.noDocument.path),i=Gl(t.noDocument.readTime);n=Vu.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ya();var a=wo.fromSegments(t.unknownDocument.path),o=Gl(t.unknownDocument.version);n=Vu.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new vo(e[0],e[1]);return mo.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(mo.min()))return n}return Vu.newInvalidDocument(e)}}]),e}();function Yf(e){return new Qf(e)}var Xf=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new cc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return A(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new eu((function(e,t){return fo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Wl(t.Yn.It,o);i=i.add(a.path.popLast());var c=Df(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Wl(t.Yn.It,o.convertToNoDocument(mo.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),Lo.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Gf);function $f(e){return Ul(e,"remoteDocumentGlobal")}function Jf(e){return Ul(e,"remoteDocumentsV14")}function Zf(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function eh(e,t){var n=t.documentKey.path.toArray();return[e,Kl(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function th(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=fo(n[a],r[a]))return i;return(i=fo(n.length,r.length))||((i=fo(n[n.length-2],r[r.length-2]))||fo(n[n.length-1],r[r.length-1]))}var nh=A((function e(t,n){N(this,e),this.overlayedDocument=t,this.mutatedFields=n})),rh=function(){function e(t,n,r,i){N(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return A(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&Qs(r.mutation,e,ru.empty(),vo.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,bc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bc(),i=vc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=dc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=vc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,bc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=fc(),a=yc(),o=yc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Js)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),Qs(o.mutation,t,o.mutation.getFieldMask(),vo.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new nh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=yc(),i=new $o((function(e,t){return e-t})),a=bc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=C(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ru.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||bc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=mc();c.forEach((function(e){if(!a.has(e)){var n=Hs(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Lo.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return wo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vs(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Lo.resolve(vc()),u=-1,s=a;return o.next((function(t){return Lo.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Lo.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,bc())})).next((function(e){return{batchId:u,changes:pc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new wo(t)).next((function(e){var t=dc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=dc();return this.indexManager.getCollectionParents(e,i).next((function(o){return Lo.forEach(o,(function(o){var u=function(e,t){return new cs(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Vu.newInvalidDocument(n)))}));var n=dc();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&Qs(a.mutation,i,ru.empty(),vo.now()),xs(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Lo.resolve(Vu.newInvalidDocument(t))}}]),e}(),ih=function(){function e(t){N(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return A(e,[{key:"getBundleMetadata",value:function(e,t){return Lo.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:Uc(n.createTime)}),Lo.resolve()}},{key:"getNamedQuery",value:function(e,t){return Lo.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:$l(e.bundledQuery),readTime:Uc(e.readTime)}}(t)),Lo.resolve()}}]),e}(),ah=function(){function e(){N(this,e),this.overlays=new $o(wo.comparator),this.es=new Map}return A(e,[{key:"getOverlay",value:function(e,t){return Lo.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=vc();return Lo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),Lo.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Lo.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=vc(),i=t.length+1,a=new wo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Lo.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new $o((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=vc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=vc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Lo.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Bl(t,n));var a=this.es.get(t);void 0===a&&(a=bc(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),oh=function(){function e(){N(this,e),this.ns=new eu(uh.ss),this.rs=new eu(uh.os)}return A(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new uh(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new uh(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new wo(new go([])),r=new uh(n,e),i=new uh(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new wo(new go([])),n=new uh(t,e),r=new uh(t,e+1),i=bc();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new uh(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),uh=function(){function e(t,n){N(this,e),this.key=t,this._s=n}return A(e,null,[{key:"ss",value:function(e,t){return wo.comparator(e.key,t.key)||fo(e._s,t._s)}},{key:"os",value:function(e,t){return fo(e._s,t._s)||wo.comparator(e.key,t.key)}}]),e}(),sh=function(){function e(t,n){N(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new eu(uh.ss)}return A(e,[{key:"checkEmpty",value:function(e){return Lo.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new jl(i,t,n,r);this.mutationQueue.push(a);var o,u=C(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new uh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Lo.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Lo.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Lo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Lo.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Lo.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new uh(t,0),i=new uh(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Lo.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new eu(fo);return t.forEach((function(e){var t=new uh(e,0),i=new uh(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Lo.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;wo.isDocumentKey(i)||(i=i.child(""));var a=new uh(new wo(i),0),o=new eu(fo);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Lo.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Xa(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Lo.forEach(t.mutations,(function(i){var a=new uh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new uh(t,0),r=this.gs.firstAfterOrEqual(n);return Lo.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Lo.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),ch=function(){function e(t){N(this,e),this.Es=t,this.docs=new $o(wo.comparator),this.size=0}return A(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Lo.resolve(n?n.document.mutableCopy():Vu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=fc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Vu.newInvalidDocument(e))})),Lo.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=fc(),i=new wo(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Do(Co(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Lo.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ya()}},{key:"As",value:function(e,t){return Lo.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new lh(this)}},{key:"getSize",value:function(e){return Lo.resolve(this.size)}}]),e}(),lh=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this)).Yn=e,r}return A(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Lo.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(Gf),fh=function(){function e(t){N(this,e),this.persistence=t,this.Rs=new cc((function(e){return qu(e)}),Wu),this.lastRemoteSnapshotVersion=mo.min(),this.highestTargetId=0,this.bs=0,this.Ps=new oh,this.targetCount=0,this.vs=Mf.Pn()}return A(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Lo.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Lo.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Lo.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Lo.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Lo.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new Mf(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Lo.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Lo.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Lo.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Lo.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Lo.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Lo.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Lo.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Lo.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Lo.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Lo.resolve(n)}},{key:"containsKey",value:function(e,t){return Lo.resolve(this.Ps.containsKey(t))}}]),e}(),hh=function(){function e(t,n){var r=this;N(this,e),this.Vs={},this.overlays={},this.Ss=new Go(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new fh(this),this.indexManager=new gf,this.remoteDocumentCache=new ch((function(e){return r.referenceDelegate.xs(e)})),this.It=new ql(n),this.Ns=new ih(this.It)}return A(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new ah,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new sh(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Ka("MemoryPersistence","Starting transaction:",e);var i=new dh(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Lo.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),dh=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return A(n)}(Po),ph=function(){function e(t){N(this,e),this.persistence=t,this.Fs=new oh,this.$s=null}return A(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Ya()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Lo.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Lo.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Lo.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lo.forEach(this.Ls,(function(r){var i=wo.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,mo.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return Lo.or([function(){return Lo.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),vh=function(){function e(t){N(this,e),this.It=t}return A(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Mo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pl,{unique:!0}),e.createObjectStore("documentMutations")}(e),mh(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Lo.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),mh(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pl,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Lo.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Nl});t.createIndex("collectionPathOverlayIndex",Dl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Al,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:gl});t.createIndex("documentKeyIndex",kl),t.createIndex("collectionGroupIndex",bl)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Sl}).createIndex("sequenceNumberIndex",El,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Tl}).createIndex("documentKeyIndex",Cl,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Df(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Lo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Lo.forEach(r,(function(r){Xa(r.userId===n.userId);var i=Ql(t.It,r);return Nf(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new go(n),o=function(e){return[0,ll(e)]}(a);r.push(t.get(o).next((function(n){return n?Lo.resolve():function(n){return t.put({targetId:0,path:ll(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Lo.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Il});var n=t.store("collectionParents"),r=new kf,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ll(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new go(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=u(e,3),r=(n[0],n[1]),a=(n[2],dl(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Yl(r),a=Xl(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new wo(go.fromString(i.document.name).popFirst(5)):i.noDocument?wo.fromSegments(i.noDocument.path):i.unknownDocument?wo.fromSegments(i.unknownDocument.path):Ya()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Lo.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=Yf(this.It),a=new hh(ph.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:bc();Ql(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Lo.forEach(r,(function(e,r){var o=new Ba(r),u=af.oe(n.It,o),s=a.getIndexManager(o),c=Af.oe(o,n.It,s,a.referenceDelegate);return new rh(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Fl(t,Go.at),e).next()}))}))}}]),e}();function mh(e){e.createObjectStore("targetDocuments",{keyPath:xl}).createIndex("documentTargetsIndex",_l,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wl,{unique:!0}),e.createObjectStore("targetGlobal")}var yh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gh=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(N(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Za(Ja.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kf(this,i),this.ii=n+"main",this.It=new ql(s),this.ri=new Fo(this.ii,this.Xs,new vh(this.It)),this.Cs=new Ff(this.referenceDelegate,this.It),this.remoteDocumentCache=Yf(this.It),this.Ns=new tf,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&Ha("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return A(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Za(Ja.FAILED_PRECONDITION,yh);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new Go(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=T(S().mark((function n(r){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=T(S().mark((function t(n){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return bh(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Vo(t))return Ka("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ka("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return kh(e).get("owner").next((function(e){return Lo.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return bh(e).delete(this.clientId)}},{key:"yi",value:function(){var e=T(S().mark((function e(){var t,n,r,i,a=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ul(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Lo.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=C(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?Lo.resolve(!0):kh(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Za(Ja.FAILED_PRECONDITION,yh);return!1}}return!(!t.networkEnabled||!t.inForeground)||bh(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Ka("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=T(S().mark((function e(){var t=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Fl(e,Go.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return bh(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return Af.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new wf(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return af.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;Ka("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?Ml:14===i?Ll:13===i?Ol:12===i?Rl:11===i?Pl:void Ya();return this.ri.runTransaction(e,o,u,(function(i){return a=new Fl(i,r.Ss?r.Ss.next():Go.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw Ha("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Za(Ja.FAILED_PRECONDITION,Ao);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return kh(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Za(Ja.FAILED_PRECONDITION,yh)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kh(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=kh(e);return n.get("owner").next((function(e){return t.mi(e)?(Ka("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Lo.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ha("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!G()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ka("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ha("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(Yt){Ha("Failed to set zombie client id.",Yt)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(Yt){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Fo.C()}}]),e}();function kh(e){return Ul(e,"owner")}function bh(e){return Ul(e,"clientMetadata")}function wh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var xh=function(){function e(t,n,r,i){N(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return A(e,null,[{key:"Ci",value:function(t,n){var r,i=bc(),a=bc(),o=C(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),_h=function(){function e(){N(this,e),this.xi=!1}return A(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(hs(t))return Lo.resolve(null);var r=ys(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=gs(t,null,"F"),r=ys(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=bc.apply(void 0,I(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,gs(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return hs(t)||r.isEqual(mo.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(Wa()<=we.DEBUG&&Ka("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ws(t)),i.Bi(e,o,t,To(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new eu(Is(e));return t.forEach((function(t,r){xs(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return Wa()<=we.DEBUG&&Ka("QueryEngine","Using full collection scan to execute query:",ws(t)),this.Ni.getDocumentsMatchingQuery(e,t,No.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ih=function(){function e(t,n,r,i){N(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new $o(fo),this.qi=new cc((function(e){return qu(e)}),Wu),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return A(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rh(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function Sh(e,t,n,r){return new Ih(e,t,n,r)}function Eh(e,t){return Th.apply(this,arguments)}function Th(){return Th=T(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=bc(),s=C(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=C(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=C(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=C(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Th.apply(this,arguments)}function Ch(e,t){var n=$a(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Lo.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Xa(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=bc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Nh(e){var t=$a(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function Dh(e,t){var n=$a(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(iu.EMPTY_BYTE_STRING,mo.min()).withLastLimboFreeSnapshotVersion(mo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=fc(),s=bc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ah(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(mo.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Lo.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function Ah(e,t,n){var r=bc(),i=bc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=fc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(mo.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Ka("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Ph(e,t){var n=$a(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Rh(e,t){var n=$a(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Lo.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new zl(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Oh(e,t,n){return Lh.apply(this,arguments)}function Lh(){return Lh=T(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=$a(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Vo(e.t1)){e.next=12;break}throw e.t1;case 12:Ka("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Lh.apply(this,arguments)}function Mh(e,t,n){var r=$a(e),i=mo.min(),a=bc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=$a(e),i=r.qi.get(n);return void 0!==i?Lo.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,ys(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:mo.min(),n?a:bc())})).next((function(e){return jh(r,_s(t),e),{documents:e,Hi:a}}))}))}function Fh(e,t){var n=$a(e),r=$a(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function Uh(e,t){var n=$a(e),r=n.Ki.get(t)||mo.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,To(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return jh(n,t,e),e}))}function jh(e,t,n){var r=e.Ki.get(t)||mo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function Vh(e,t,n,r){return Bh.apply(this,arguments)}function Bh(){return Bh=T(S().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=$a(t),o=bc(),u=fc(),s=C(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,Rh(a,function(e){return ys(fs(go.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ah(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Bh.apply(this,arguments)}function zh(e,t){return qh.apply(this,arguments)}function qh(){return qh=T(S().mark((function e(t,n){var r,i,a,o=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:bc(),e.next=3,Rh(t,ys($l(n.bundledQuery)));case 3:return i=e.sent,a=$a(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Uc(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(iu.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),qh.apply(this,arguments)}function Wh(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Kh(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Hh(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Gh=function(){function e(t,n,r,i){N(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return A(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Za(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ha("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Qh=function(){function e(t,n,r){N(this,e),this.targetId=t,this.state=n,this.error=r}return A(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Za(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ha("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Yh=function(){function e(t,n){N(this,e),this.clientId=t,this.activeTargetIds=n}return A(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=xc(),o=0;i&&o<r.activeTargetIds.length;++o)i=mu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ha("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Xh=function(){function e(t,n){N(this,e),this.clientId=t,this.onlineState=n}return A(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ha("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),$h=function(){function e(){N(this,e),this.activeTargetIds=xc()}return A(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Jh=function(){function e(t,n,r,i,a){N(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new $o(fo),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=Wh(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new $h),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return A(e,[{key:"start",value:function(){var e=T(S().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=C(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Wh(this.persistenceKey,i)))&&(o=Yh.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=C(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Hh(this.persistenceKey,e));if(n){var r=Qh.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Hh(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Ka("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Ka("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Ka("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Ka("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Ha("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(T(S().mark((function e(){var r,i,a,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=Go.at;if(null!=e)try{var n=JSON.parse(e);Xa("number"==typeof n),t=n}catch(e){Ha("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Go.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new Gh(this.currentUser,e,t,n),i=Kh(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=Kh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=Hh(this.persistenceKey,e),i=new Qh(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return Yh.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Gh.Zi(new Ba(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return Qh.Zi(r,t)}},{key:"yr",value:function(e){return Xh.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:Ka("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=xc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Zh=function(){function e(){N(this,e),this.Lr=new $h,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return A(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new $h,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),ed=function(){function e(){N(this,e)}return A(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),td=function(){function e(){var t=this;N(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return A(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){Ka("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=C(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){Ka("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=C(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),nd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},rd=function(){function e(t){N(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return A(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),id=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return A(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ja;o.setWithCredentials(!0),o.listenOnce(Oa.COMPLETE,(function(){var t;try{switch(o.getLastErrorCode()){case Ra.NO_ERROR:var n=o.getResponseJson();Ka("Connection","XHR received:",JSON.stringify(n)),i(n);break;case Ra.TIMEOUT:Ka("Connection",'RPC "'+e+'" timed out'),a(new Za(Ja.DEADLINE_EXCEEDED,"Request time out"));break;case Ra.HTTP_ERROR:var r=o.getStatus();if(Ka("Connection",'RPC "'+e+'" failed with status:',r,"response text:",o.getResponseText()),r>0){var u=o.getResponseJson();Array.isArray(u)&&(u=u[0]);var s=null===(t=u)||void 0===t?void 0:t.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ja).indexOf(t)>=0?t:Ja.UNKNOWN}(s.status);a(new Za(c,s.message))}else a(new Za(Ja.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Za(Ja.UNAVAILABLE,"Connection failed."));break;default:Ya()}}finally{Ka("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Aa(),a=Pa(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Fa({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");Ka("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new rd({Hr:function(e){l?Ka("Connection","Not sending because WebChannel is closed:",e):(c||(Ka("Connection","Opening WebChannel transport."),s.open(),c=!0),Ka("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Ua.EventType.OPEN,(function(){l||Ka("Connection","WebChannel transport opened.")})),h(s,Ua.EventType.CLOSE,(function(){l||(l=!0,Ka("Connection","WebChannel transport closed"),f.io())})),h(s,Ua.EventType.ERROR,(function(e){l||(l=!0,Ga("Connection","WebChannel transport errored:",e),f.io(new Za(Ja.UNAVAILABLE,"The operation could not be completed")))})),h(s,Ua.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Xa(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ka("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=nc[e];if(void 0!==t)return sc(t)}(a),u=i.message;void 0===o&&(o=Ja.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new Za(o,u)),s.close()}else Ka("Connection","WebChannel received:",n),f.ro(n)}})),h(a,La.STAT_EVENT,(function(e){e.stat===Ma.PROXY?Ka("Connection","Detected buffering proxy"):e.stat===Ma.NOPROXY&&Ka("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){N(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return A(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);Ka("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Ka("RestConnection","Received: ",e),e}),(function(t){throw Ga("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+za,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=nd[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function ad(){return"undefined"!=typeof window?window:null}function od(){return"undefined"!=typeof document?document:null}function ud(e){return new Oc(e,!0)}var sd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;N(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return A(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Ka("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),cd=function(){function e(t,n,r,i,a,o,u,s){N(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new sd(t,n)}return A(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Ja.RESOURCE_EXHAUSTED?(Ha(n.toString()),Ha("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===Ja.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Za(Ja.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(T(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return Ka("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(Ka("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),ld=function(e){O(n,e);var t=U(n);function n(e,r,i,a,o,u){var s;return N(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return A(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ya()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(Xa(void 0===t||"string"==typeof t),iu.fromBase64String(t||"")):(Xa(void 0===t||t instanceof Uint8Array),iu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ja.UNKNOWN:sc(e.code);return new Za(t,e.message||"")}(o);n=new Tc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=zc(e,s.document.name),l=Uc(s.document.updateTime),f=new Uu({mapValue:{fields:s.document.fields}}),h=Vu.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Sc(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=zc(e,v.document),y=v.readTime?Uc(v.readTime):mo.min(),g=Vu.newNoDocument(m,y),k=v.removedTargetIds||[];n=new Sc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=zc(e,b.document),x=b.removedTargetIds||[];n=new Sc([],x,w,null)}else{if(!("filter"in t))return Ya();t.filter;var _=t.filter;_.targetId;var I=_.count||0,S=new oc(I),E=_.targetId;n=new Ec(E,S)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return mo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?mo.min():t.readTime?Uc(t.readTime):mo.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=Kc(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=Ku(r)?{documents:Jc(e,r)}:{query:Zc(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Mc(e,t.resumeToken):t.snapshotVersion.compareTo(mo.min())>0&&(n.readTime=Lc(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ya()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=Kc(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(cd),fd=function(e){O(n,e);var t=U(n);function n(e,r,i,a,o,u){var s;return N(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Jo=!1,s}return A(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Ot(L(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Xa(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Xa(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Uc(e.updateTime):Uc(t);return n.isEqual(mo.min())&&(n=Uc(t)),new zs(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Uc(e.commitTime);return this.listener.Zo(n,t)}return Xa(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=Kc(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Xc(t.It,e)}))};this.Bo(n)}}]),n}(cd),hd=function(e){O(n,e);var t=U(n);function n(e,r,i,a){var o;return N(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.It=a,o.nu=!1,o}return A(n,[{key:"su",value:function(){if(this.nu)throw new Za(Ja.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.connection.ao(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ja.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Za(Ja.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=u(a,2),s=o[0],c=o[1];return i.connection._o(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ja.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Za(Ja.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return A((function e(){N(this,e)}))}());var dd=function(){function e(t,n){N(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return A(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(Ha(t),this.ou=!1):Ka("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),pd=A((function e(t,n,r,i,a){var o=this;N(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget(T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Sd(o),!e.t0){e.next=5;break}return Ka("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=$a(t))._u.add(4),e.next=4,yd(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,vd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new dd(r,i)}));function vd(e){return md.apply(this,arguments)}function md(){return md=T(S().mark((function e(t){var n,r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Sd(t)){e.next=18;break}n=C(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),md.apply(this,arguments)}function yd(e){return gd.apply(this,arguments)}function gd(){return gd=T(S().mark((function e(t){var n,r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),gd.apply(this,arguments)}function kd(e,t){var n=$a(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),Id(n)?_d(n):ep(n).ko()&&wd(n,t))}function bd(e,t){var n=$a(e),r=ep(n);n.du.delete(t),r.ko()&&xd(n,t),0===n.du.size&&(r.ko()?r.Fo():Sd(n)&&n.gu.set("Unknown"))}function wd(e,t){e.yu.Mt(t.targetId),ep(e).zo(t)}function xd(e,t){e.yu.Mt(t),ep(e).Ho(t)}function _d(e){e.yu=new Nc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),ep(e).start(),e.gu.uu()}function Id(e){return Sd(e)&&!ep(e).No()&&e.du.size>0}function Sd(e){return 0===$a(e)._u.size}function Ed(e){e.yu=void 0}function Td(e){return Cd.apply(this,arguments)}function Cd(){return Cd=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){wd(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Cd.apply(this,arguments)}function Nd(e,t){return Dd.apply(this,arguments)}function Dd(){return Dd=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ed(t),Id(t)?(t.gu.hu(n),_d(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Dd.apply(this,arguments)}function Ad(e,t,n){return Pd.apply(this,arguments)}function Pd(){return Pd=T(S().mark((function e(t,n,r){var i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof Tc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=T(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=C(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Ka("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Rd(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Sc?t.yu.Gt(n):n instanceof Ec?t.yu.Yt(n):t.yu.Wt(n),r.isEqual(mo.min())){e.next=29;break}return e.prev=14,e.next=17,Nh(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(iu.EMPTY_BYTE_STRING,n.snapshotVersion)),xd(e,t);var r=new zl(n.target,t,1,n.sequenceNumber);wd(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Ka("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Rd(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Pd.apply(this,arguments)}function Rd(e,t,n){return Od.apply(this,arguments)}function Od(){return Od=T(S().mark((function e(t,n,r){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vo(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,yd(t);case 5:t.gu.set("Offline"),r||(r=function(){return Nh(t.localStore)}),t.asyncQueue.enqueueRetryable(T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ka("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,vd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Od.apply(this,arguments)}function Ld(e,t){return t().catch((function(n){return Rd(e,n,t)}))}function Md(e){return Fd.apply(this,arguments)}function Fd(){return Fd=T(S().mark((function e(t){var n,r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=$a(t),r=tp(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!Ud(n)){e.next=19;break}return e.prev=3,e.next=6,Ph(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,jd(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Rd(n,e.t0);case 17:e.next=2;break;case 19:Vd(n)&&Bd(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Fd.apply(this,arguments)}function Ud(e){return Sd(e)&&e.fu.length<10}function jd(e,t){e.fu.push(t);var n=tp(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function Vd(e){return Sd(e)&&!tp(e).No()&&e.fu.length>0}function Bd(e){tp(e).start()}function zd(e){return qd.apply(this,arguments)}function qd(){return qd=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tp(t).eu();case 1:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}function Wd(e){return Kd.apply(this,arguments)}function Kd(){return Kd=T(S().mark((function e(t){var n,r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=tp(t),r=C(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Kd.apply(this,arguments)}function Hd(e,t,n){return Gd.apply(this,arguments)}function Gd(){return Gd=T(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=Vl.from(i,n,r),e.next=3,Ld(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Md(t);case 5:case"end":return e.stop()}}),e)}))),Gd.apply(this,arguments)}function Qd(e,t){return Yd.apply(this,arguments)}function Yd(){return Yd=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&tp(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=T(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!uc(i=n.code)||i===Ja.ABORTED){e.next=7;break}return r=t.fu.shift(),tp(t).Mo(),e.next=5,Ld(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Md(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Vd(t)&&Bd(t);case 5:case"end":return e.stop()}}),e)}))),Yd.apply(this,arguments)}function Xd(e,t){return $d.apply(this,arguments)}function $d(){return $d=T(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=$a(t)).asyncQueue.verifyOperationInProgress(),Ka("RemoteStore","RemoteStore received new credentials"),i=Sd(r),r._u.add(3),e.next=6,yd(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,vd(r);case 12:case"end":return e.stop()}}),e)}))),$d.apply(this,arguments)}function Jd(e,t){return Zd.apply(this,arguments)}function Zd(){return Zd=T(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$a(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,vd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,yd(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Zd.apply(this,arguments)}function ep(e){return e.pu||(e.pu=function(e,t,n){var r=$a(e);return r.su(),new ld(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:Td.bind(null,e),Zr:Nd.bind(null,e),Wo:Ad.bind(null,e)}),e.wu.push(function(){var t=T(S().mark((function t(n){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),Id(e)?_d(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:Ed(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function tp(e){return e.Iu||(e.Iu=function(e,t,n){var r=$a(e);return r.su(),new fd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:zd.bind(null,e),Zr:Qd.bind(null,e),tu:Wd.bind(null,e),Zo:Hd.bind(null,e)}),e.wu.push(function(){var t=T(S().mark((function t(n){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,Md(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(Ka("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var np=function(){function e(t,n,r,i,a){N(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return A(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Za(Ja.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function rp(e,t){if(Ha("AsyncQueue","".concat(t,": ").concat(e)),Vo(e))return new Za(Ja.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var ip=function(){function e(t){N(this,e),this.comparator=t?function(e,n){return t(e,n)||wo.comparator(e.key,n.key)}:function(e,t){return wo.comparator(e.key,t.key)},this.keyedMap=dc(),this.sortedSet=new $o(this.comparator)}return A(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ap=function(){function e(){N(this,e),this.Tu=new $o(wo.comparator)}return A(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Ya():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),op=function(){function e(t,n,r,i,a,o,u,s,c){N(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return A(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ks(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,ip.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),up=A((function e(){N(this,e),this.Au=void 0,this.listeners=[]})),sp=A((function e(){N(this,e),this.queries=new cc((function(e){return bs(e)}),ks),this.onlineState="Unknown",this.Ru=new Set}));function cp(e,t){return lp.apply(this,arguments)}function lp(){return lp=T(S().mark((function e(t,n){var r,i,a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$a(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new up),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=rp(e.t0,"Initialization of query '".concat(ws(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&vp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),lp.apply(this,arguments)}function fp(e,t){return hp.apply(this,arguments)}function hp(){return hp=T(S().mark((function e(t,n){var r,i,a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$a(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),hp.apply(this,arguments)}function dp(e,t){var n,r=$a(e),i=!1,a=C(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=C(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&vp(r)}function pp(e,t,n){var r=$a(e),i=r.queries.get(t);if(i){var a,o=C(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function vp(e){e.Ru.forEach((function(e){e.next()}))}var mp=function(){function e(t,n,r){N(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return A(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=C(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new op(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=op.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),yp=function(){function e(t,n){N(this,e),this.ku=t,this.byteLength=n}return A(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),gp=function(){function e(t){N(this,e),this.It=t}return A(e,[{key:"Ji",value:function(e){return zc(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?Qc(this.It,e.document,!1):Vu.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return Uc(e)}}]),e}(),kp=function(){function e(t,n,r){N(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bp(t)}return A(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=go.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new gp(this.It),i=C(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=C(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||bc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=T(S().mark((function e(){var t,n,r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vh(this.localStore,new gp(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=C(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,zh(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function bp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var wp=A((function e(t){N(this,e),this.key=t})),xp=A((function e(t){N(this,e),this.key=t})),_p=function(){function e(t,n){N(this,e),this.query=t,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=bc(),this.mutatedKeys=bc(),this.Gu=Is(t),this.Qu=new ip(this.Gu)}return A(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new ap,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=xs(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ya()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new op(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new ap,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=bc(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new xp(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new wp(e))})),n}},{key:"tc",value:function(e){this.Uu=e.Hi,this.Ku=bc();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return op.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),Ip=A((function e(t,n,r){N(this,e),this.query=t,this.targetId=n,this.view=r})),Sp=A((function e(t){N(this,e),this.key=t,this.nc=!1})),Ep=function(){function e(t,n,r,i,a,o){N(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new cc((function(e){return bs(e)}),ks),this.rc=new Map,this.oc=new Set,this.uc=new $o(wo.comparator),this.cc=new Map,this.ac=new oh,this.hc={},this.lc=new Map,this.fc=Mf.vn(),this.onlineState="Unknown",this.dc=void 0}return A(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function Tp(e,t){return Cp.apply(this,arguments)}function Cp(){return Cp=T(S().mark((function e(t,n){var r,i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bv(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,Rh(r.localStore,ys(n));case 8:return u=e.sent,r.isPrimaryClient&&kd(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Np(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Cp.apply(this,arguments)}function Np(e,t,n,r,i){return Dp.apply(this,arguments)}function Dp(){return Dp=T(S().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=T(S().mark((function e(t,n,r,i){var a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,Mh(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Xp(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Mh(t.localStore,n,!0);case 3:return o=e.sent,u=new _p(n,o.Hi),s=u.Wu(o.documents),c=Ic.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Xp(t,r,l.Xu),f=new Ip(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Ap(e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=T(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$a(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!ks(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Oh(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),bd(r.remoteStore,i.targetId),Qp(r,i.targetId)})).catch(Ro);case 9:e.next=14;break;case 11:return Qp(r,i.targetId),e.next=14,Oh(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Pp.apply(this,arguments)}function Rp(e,t,n){return Op.apply(this,arguments)}function Op(){return Op=T(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wv(t),e.prev=1,e.next=4,function(e,t){var n,r,i=$a(e),a=vo.now(),o=t.reduce((function(e,t){return e.add(t.key)}),bc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=fc(),s=bc();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=C(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Ys(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Js(c.key,l,ju(l.value.mapValue),qs.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:pc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new $o(fo)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Zp(i,a.changes);case 9:return e.next=11,Md(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=rp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Op.apply(this,arguments)}function Lp(e,t){return Mp.apply(this,arguments)}function Mp(){return Mp=T(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.prev=1,e.next=4,Dh(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Xa(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Xa(n.nc):e.removedDocuments.size>0&&(Xa(n.nc),n.nc=!1))})),e.next=8,Zp(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ro(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Mp.apply(this,arguments)}function Fp(e,t,n){var r=$a(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=$a(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=C(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&vp(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Up(e,t,n){return jp.apply(this,arguments)}function jp(){return jp=T(S().mark((function e(t,n,r){var i,a,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=$a(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new $o(wo.comparator)).insert(o,Vu.newNoDocument(o,mo.min())),s=bc().add(o),c=new _c(mo.min(),new Map,new eu(fo),u,s),e.next=9,Lp(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),Jp(i),e.next=16;break;case 14:return e.next=16,Oh(i.localStore,n,!1).then((function(){return Qp(i,n,r)})).catch(Ro);case 16:case"end":return e.stop()}}),e)}))),jp.apply(this,arguments)}function Vp(e,t){return Bp.apply(this,arguments)}function Bp(){return Bp=T(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),i=n.batch.batchId,e.prev=1,e.next=4,Ch(r.localStore,n);case 4:return a=e.sent,Gp(r,i,null),Hp(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Zp(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ro(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Bp.apply(this,arguments)}function zp(e,t,n){return qp.apply(this,arguments)}function qp(){return qp=T(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$a(t),e.prev=1,e.next=4,function(e,t){var n=$a(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Xa(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Gp(i,n,r),Hp(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Zp(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ro(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),qp.apply(this,arguments)}function Wp(e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=T(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sd((r=$a(t)).remoteStore)||Ka("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=$a(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=rp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Kp.apply(this,arguments)}function Hp(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function Gp(e,t,n){var r=$a(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function Qp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=C(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||Yp(e,t)}))}function Yp(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(bd(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),Jp(e))}function Xp(e,t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof wp?(e.ac.addReference(a.key,t),$p(e,a)):a instanceof xp?(Ka("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||Yp(e,a.key)):Ya()}}catch(o){i.e(o)}finally{i.f()}}function $p(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(Ka("SyncEngine","New document in limbo: "+n),e.oc.add(r),Jp(e))}function Jp(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new wo(go.fromString(t)),r=e.fc.next();e.cc.set(r,new Sp(n)),e.uc=e.uc.insert(n,r),kd(e.remoteStore,new zl(ys(fs(n.path)),r,2,Go.at))}}function Zp(e,t,n){return ev.apply(this,arguments)}function ev(){return ev=T(S().mark((function e(t,n,r){var i,a,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=$a(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=xh.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=T(S().mark((function e(t,n){var r,i,a,o,u,s,c,l;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Lo.forEach(n,(function(t){return Lo.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Lo.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Vo(e.t0)){e.next=10;break}throw e.t0;case 10:Ka("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=C(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),ev.apply(this,arguments)}function tv(e,t){return nv.apply(this,arguments)}function nv(){return nv=T(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=$a(t)).currentUser.isEqual(n)){e.next=11;break}return Ka("SyncEngine","User change. New user:",n.toKey()),e.next=5,Eh(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new Za(Ja.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Zp(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),nv.apply(this,arguments)}function rv(e,t){var n=$a(e),r=n.cc.get(t);if(r&&r.nc)return bc().add(r.key);var i=bc(),a=n.rc.get(t);if(!a)return i;var o,u=C(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function iv(e,t){return av.apply(this,arguments)}function av(){return av=T(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.next=3,Mh(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&Xp(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),av.apply(this,arguments)}function ov(e,t){return uv.apply(this,arguments)}function uv(){return uv=T(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.abrupt("return",Uh(r.localStore,n).then((function(e){return Zp(r,e)})));case 2:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function sv(e,t,n,r){return cv.apply(this,arguments)}function cv(){return cv=T(S().mark((function e(t,n,r,i){var a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$a(t),e.next=3,function(e,t){var n=$a(e),r=$a(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Lo.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Md(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Gp(a,n,i||null),Hp(a,n),function(e,t){$a($a(e).mutationQueue).An(t)}(a.localStore,n)):Ya();case 11:return e.next=13,Zp(a,o);case 13:e.next=16;break;case 15:Ka("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),cv.apply(this,arguments)}function lv(e,t){return fv.apply(this,arguments)}function fv(){return fv=T(S().mark((function e(t,n){var r,i,a,o,u,s,c,l;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bv(r=$a(t)),wv(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,hv(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,Jd(r.remoteStore,!0);case 9:o=C(a);try{for(o.s();!(u=o.n()).done;)s=u.value,kd(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Qp(r,t),Oh(r.localStore,t,!0)})),bd(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,hv(r,c);case 21:return function(e){var t=$a(e);t.cc.forEach((function(e,n){bd(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new $o(wo.comparator)}(r),r.dc=!1,e.next=25,Jd(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),fv.apply(this,arguments)}function hv(e,t,n){return dv.apply(this,arguments)}function dv(){return dv=T(S().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=$a(t),a=[],o=[],u=C(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,Rh(i.localStore,ys(f[0]));case 11:l=e.sent,h=C(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,iv(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Fh(i.localStore,c);case 36:return y=e.sent,e.next=39,Rh(i.localStore,y);case 39:return l=e.sent,e.next=42,Np(i,pv(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),dv.apply(this,arguments)}function pv(e){return ls(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function vv(e){var t=$a(e);return $a($a(t.localStore).persistence).vi()}function mv(e,t,n,r){return yv.apply(this,arguments)}function yv(){return yv=T(S().mark((function e(t,n,r,i){var a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=$a(t)).dc){e.next=3;break}return e.abrupt("return",void Ka("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Uh(a.localStore,_s(o[0]));case 10:return u=e.sent,s=_c.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,iu.EMPTY_BYTE_STRING),e.next=14,Zp(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Oh(a.localStore,n,!0);case 17:return Qp(a,n,i),e.abrupt("break",20);case 19:Ya();case 20:case"end":return e.stop()}}),e)}))),yv.apply(this,arguments)}function gv(e,t,n){return kv.apply(this,arguments)}function kv(){return kv=T(S().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=bv(t)).dc){e.next=45;break}a=C(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return Ka("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Fh(i.localStore,u);case 12:return s=e.sent,e.next=15,Rh(i.localStore,s);case 15:return c=e.sent,e.next=18,Np(i,pv(s),c.targetId,!1,c.resumeToken);case 18:kd(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=C(r),e.prev=30,h=S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,Oh(i.localStore,t,!1).then((function(){bd(i.remoteStore,t),Qp(i,t)})).catch(Ro);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),kv.apply(this,arguments)}function bv(e){var t=$a(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Lp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Up.bind(null,t),t.sc.Wo=dp.bind(null,t.eventManager),t.sc.wc=pp.bind(null,t.eventManager),t}function wv(e){var t=$a(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Vp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zp.bind(null,t),t}function xv(e,t,n){var r=$a(e);(function(){var e=T(S().mark((function e(t,n,r){var i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=$a(e),r=Uc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(bp(i)),a=new kp(i,t.localStore,n.It),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Zp(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=$a(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ga("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var _v=function(){function e(){N(this,e),this.synchronizeTabs=!1}return A(e,[{key:"initialize",value:function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=ud(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return Sh(this.persistence,new _h,e.initialUser,this.It)}},{key:"yc",value:function(e){return new hh(ph.Bs,this.It)}},{key:"gc",value:function(e){return new Zh}},{key:"terminate",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Iv=function(e){O(n,e);var t=U(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return A(n,[{key:"initialize",value:function(){var e=T(S().mark((function e(t){var r=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot(L(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,wv(this.Ac.syncEngine);case 6:return e.next=8,Md(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return Sh(this.persistence,new _h,e.initialUser,this.It)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new qf(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new Ho(t,this.persistence);return new Ko(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=wh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Cf.withCacheSize(this.cacheSizeBytes):Cf.DEFAULT;return new gh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ad(),od(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new Zh}}]),n}(_v),Sv=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return A(n,[{key:"initialize",value:function(){var e=T(S().mark((function e(t){var r,i=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot(L(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof Jh,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:sv.bind(null,r),$r:mv.bind(null,r),Br:gv.bind(null,r),vi:vv.bind(null,r),Mr:ov.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lv(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=ad();if(!Jh.C(t))throw new Za(Ja.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=wh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jh(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Iv),Ev=function(){function e(){N(this,e)}return A(e,[{key:"initialize",value:function(){var e=T(S().mark((function e(t,n){var r=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Fp(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=tv.bind(null,this.syncEngine),e.next=12,Jd(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new sp}},{key:"createDatastore",value:function(e){var t,n=ud(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new id(t));return function(e,t,n,r){return new hd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Fp(o.syncEngine,e,0)},a=td.C()?new td:new ed,new pd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Ep(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$a(t),Ka("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,yd(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Tv(e,t,n){if(!n)throw new Za(Ja.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Cv(e,t,n,r){if(!0===t&&!0===r)throw new Za(Ja.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Nv(e){if(!wo.isDocumentKey(e))throw new Za(Ja.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Dv(e){if(wo.isDocumentKey(e))throw new Za(Ja.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Av(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ya()}function Pv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Za(Ja.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Av(e);throw new Za(Ja.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Rv(e,t){if(t<=0)throw new Za(Ja.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Ov=new Map,Lv=function(){function e(t){var n;if(N(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Za(Ja.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Za(Ja.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Cv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return A(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Mv=function(){function e(t,n,r,i){N(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lv({}),this._settingsFrozen=!1}return A(e,[{key:"app",get:function(){if(!this._app)throw new Za(Ja.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Za(Ja.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new no;switch(e.type){case"gapi":var t=e.client;return new oo(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Za(Ja.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Ov.get(e);t&&(Ka("ComponentProvider","Removing Datastore"),Ov.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Fv(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Pv(e,Mv))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ga("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ba.MOCK_USER;else{o=ne(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Za(Ja.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ba(s)}e._authCredentials=new ro(new to(o,u))}}var Uv=function(){function e(t,n,r){N(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return A(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Vv(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),jv=function(){function e(t,n,r){N(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return A(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Vv=function(e){O(n,e);var t=U(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this,e,r,fs(i)))._path=i,a.type="collection",a}return A(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Uv(this.firestore,null,new wo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(jv);function Bv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=me(e),Tv("collection","path",t),e instanceof Mv){var a=go.fromString.apply(go,[t].concat(r));return Dv(a),new Vv(e,null,a)}if(!(e instanceof Uv||e instanceof Vv))throw new Za(Ja.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(go.fromString.apply(go,[t].concat(r)));return Dv(o),new Vv(e.firestore,null,o)}function zv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=me(e),1===arguments.length&&(t=lo.R()),Tv("doc","path",t),e instanceof Mv){var a=go.fromString.apply(go,[t].concat(r));return Nv(a),new Uv(e,null,new wo(a))}if(!(e instanceof Uv||e instanceof Vv))throw new Za(Ja.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(go.fromString.apply(go,[t].concat(r)));return Nv(o),new Uv(e.firestore,e instanceof Vv?e.converter:null,new wo(o))}function qv(e,t){return e=me(e),t=me(t),(e instanceof Uv||e instanceof Vv)&&(t instanceof Uv||t instanceof Vv)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Wv(e,t){return e=me(e),t=me(t),e instanceof jv&&t instanceof jv&&e.firestore===t.firestore&&ks(e._query,t._query)&&e.converter===t.converter}function Kv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return T(S().mark((function r(){var i;return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Hv=function(){function e(t){N(this,e),this.observer=t,this.muted=!1}return A(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):Ha("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Gv=function(){function e(t,n){var r=this;N(this,e),this.Pc=t,this.It=n,this.metadata=new eo,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return A(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=T(S().mark((function e(){var t,n,r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new yp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=T(S().mark((function e(){var t,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=T(S().mark((function e(){var t,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Qv=function(){function e(t){N(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return A(e,[{key:"lookup",value:function(){var e=T(S().mark((function e(t){var n,r=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Za(Ja.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=T(S().mark((function e(t,n){var r,i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),i=Kc(r.It)+"/documents",a={documents:n.map((function(e){return Bc(r.It,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Yc(r.It,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Xa(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new ic(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=T(S().mark((function e(){var t,n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=wo.fromPath(t);n.mutations.push(new ac(r,n.precondition(r)))})),e.next=7,function(){var e=T(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),i=Kc(r.It)+"/documents",a={writes:n.map((function(e){return Xc(r.It,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ya();t=mo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Za(Ja.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mo.min())?qs.exists(!1):qs.updateTime(t):qs.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mo.min()))throw new Za(Ja.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qs.updateTime(t)}return qs.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Yv=function(){function e(t,n,r,i,a){N(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new sd(this.asyncQueue,"transaction_retry")}return A(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(T(S().mark((function t(){var n,r;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Qv(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!pu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!uc(t)}return!1}}]),e}(),Xv=function(){function e(t,n,r,i){var a=this;N(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ba.UNAUTHENTICATED,this.clientId=lo.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ka("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ka("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return A(e,[{key:"getConfiguration",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Za(Ja.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new eo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(T(S().mark((function n(){var r;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=rp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function $v(e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=T(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Ka("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Eh(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Zv(e,t){return em.apply(this,arguments)}function em(){return em=T(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,tm(t);case 3:return r=e.sent,Ka("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Xd(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Xd(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),em.apply(this,arguments)}function tm(e){return nm.apply(this,arguments)}function nm(){return nm=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Ka("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,$v(t,new _v);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),nm.apply(this,arguments)}function rm(e){return im.apply(this,arguments)}function im(){return im=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Ka("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Zv(t,new Ev);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),im.apply(this,arguments)}function am(e){return tm(e).then((function(e){return e.persistence}))}function om(e){return tm(e).then((function(e){return e.localStore}))}function um(e){return rm(e).then((function(e){return e.remoteStore}))}function sm(e){return rm(e).then((function(e){return e.syncEngine}))}function cm(e){return rm(e).then((function(e){return e.datastore}))}function lm(e){return fm.apply(this,arguments)}function fm(){return fm=T(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Tp.bind(null,n.syncEngine),r.onUnlisten=Ap.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),fm.apply(this,arguments)}function hm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new eo;return e.asyncQueue.enqueueAndForget(T(S().mark((function i(){return S().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Hv({next:function(a){t.enqueueAndForget((function(){return fp(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Za(Ja.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Za(Ja.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new mp(fs(n.path),a,{includeMetadataChanges:!0,Nu:!0});return cp(e,o)},i.next=3,lm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function dm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new eo;return e.asyncQueue.enqueueAndForget(T(S().mark((function i(){return S().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Hv({next:function(n){t.enqueueAndForget((function(){return fp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Za(Ja.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new mp(n,a,{includeMetadataChanges:!0,Nu:!0});return cp(e,o)},i.next=3,lm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var pm=function(){function e(){var t=this;N(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new sd(this,"async_queue_retry"),this.Wc=function(){var e=od();e&&Ka("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=od();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return A(e,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;var t=od();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new eo;return this.Hc((function(){return t.Uc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=T(S().mark((function e(){var t=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Vo(e.t0)){e.next=12;break}throw e.t0;case 12:Ka("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ha("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=np.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&Ya()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=T(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=C(this.qc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.qc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=C(t.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.qc.indexOf(e);this.qc.splice(t,1)}}]),e}();function vm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=C(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var mm=function(){function e(){N(this,e),this._progressObserver={},this._taskCompletionResolver=new eo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return A(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),ym=function(e){O(n,e);var t=U(n);function n(e,r,i,a){var o;return N(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new pm,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return A(n,[{key:"_terminate",value:function(){return this._firestoreClient||km(this),this._firestoreClient.terminate()}}]),n}(Mv);function gm(e){return e._firestoreClient||km(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function km(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new hu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Xv(e._authCredentials,e._appCheckCredentials,e._queue,r)}function bm(e,t,n){var r=new eo;return e.asyncQueue.enqueue(T(S().mark((function i(){var a;return S().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,$v(e,n);case 3:return i.next=5,Zv(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ja.FAILED_PRECONDITION||e.code===Ja.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Ga("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function wm(e){return function(e){return e.asyncQueue.enqueue(T(S().mark((function t(){var n,r;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,am(e);case 2:return n=t.sent,t.next=5,um(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=$a(e);return t._u.delete(0),vd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(gm(e=Pv(e,ym)))}function xm(e){return function(e){return e.asyncQueue.enqueue(T(S().mark((function t(){var n,r;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,am(e);case 2:return n=t.sent,t.next=5,um(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=$a(t))._u.add(0),e.next=4,yd(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(gm(e=Pv(e,ym)))}function _m(e,t){var n=gm(e=Pv(e,ym)),r=new mm;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Gv(e,t)}(function(e,t){if(e instanceof Uint8Array)return Kv(e,t);if(e instanceof ArrayBuffer)return Kv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,ud(t));e.asyncQueue.enqueueAndForget(T(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xv,t.next=3,sm(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Im(e,t){return function(e,t){return e.asyncQueue.enqueue(T(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=$a(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,om(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(gm(e=Pv(e,ym)),t).then((function(t){return t?new jv(e,null,t.query):null}))}function Sm(e){if(e._initialized||e._terminated)throw new Za(Ja.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Em=function(){function e(t){N(this,e),this._byteString=t}return A(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(iu.fromBase64String(t))}catch(t){throw new Za(Ja.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(iu.fromUint8Array(t))}}]),e}(),Tm=function(){function e(){N(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Za(Ja.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bo(n)}return A(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Cm=A((function e(t){N(this,e),this._methodName=t})),Nm=function(){function e(t,n){if(N(this,e),!isFinite(t)||t<-90||t>90)throw new Za(Ja.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Za(Ja.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return A(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return fo(this._lat,e._lat)||fo(this._long,e._long)}}]),e}(),Dm=/^__.*__$/,Am=function(){function e(t,n,r){N(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return A(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Js(e,this.data,this.fieldMask,t,this.fieldTransforms):new $s(e,this.data,t,this.fieldTransforms)}}]),e}(),Pm=function(){function e(t,n,r){N(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return A(e,[{key:"toMutation",value:function(e,t){return new Js(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Rm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ya()}}var Om=function(){function e(t,n,r,i,a,o){N(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return A(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return ey(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Rm(this.sa)&&Dm.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),Lm=function(){function e(t,n,r){N(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||ud(t)}return A(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Om({sa:e,methodName:t,fa:n,path:bo.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function Mm(e){var t=e._freezeSettings(),n=ud(e._databaseId);return new Lm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Fm(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);Xm("Data must be an object, but it was:",o,r);var u,s,c=Qm(r,o);if(a.merge)u=new ru(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=C(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=$m(t,d,n);if(!o.contains(p))throw new Za(Ja.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));ty(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new ru(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Am(new Uu(c),u,s)}var Um=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.apply(this,arguments)}return A(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Cm);function jm(e,t,n){return new Om({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var Vm=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.apply(this,arguments)}return A(n,[{key:"_toFieldTransform",value:function(e){return new Bs(e.path,new Rs)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Cm),Bm=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e))._a=r,i}return A(n,[{key:"_toFieldTransform",value:function(e){var t=jm(this,e,!0),n=this._a.map((function(e){return Gm(e,t)})),r=new Os(n);return new Bs(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Cm),zm=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e))._a=r,i}return A(n,[{key:"_toFieldTransform",value:function(e){var t=jm(this,e,!0),n=this._a.map((function(e){return Gm(e,t)})),r=new Ms(n);return new Bs(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Cm),qm=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e)).wa=r,i}return A(n,[{key:"_toFieldTransform",value:function(e){var t=new Us(e.It,Cs(e.It,this.wa));return new Bs(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Cm);function Wm(e,t,n,r){var i=e.da(1,t,n);Xm("Data must be an object, but it was:",i,r);var a=[],o=Uu.empty();Yo(r,(function(e,r){var u=Zm(t,e,n);r=me(r);var s=i.ca(u);if(r instanceof Um)a.push(u);else{var c=Gm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new ru(a);return new Pm(o,u,i.fieldTransforms)}function Km(e,t,n,r,i,a){var o=e.da(1,t,n),u=[$m(t,r,n)],s=[i];if(a.length%2!=0)throw new Za(Ja.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push($m(t,a[c])),s.push(a[c+1]);for(var l=[],f=Uu.empty(),h=u.length-1;h>=0;--h)if(!ty(l,u[h])){var d=u[h],p=s[h];p=me(p);var v=o.ca(d);if(p instanceof Um)l.push(d);else{var m=Gm(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new ru(l);return new Pm(f,y,o.fieldTransforms)}function Hm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Gm(n,e.da(r?4:3,t))}function Gm(e,t){if(Ym(e=me(e)))return Xm("Unsupported field value:",t,e),Qm(e,t);if(e instanceof Cm)return function(e,t){if(!Rm(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=C(e);try{for(a.s();!(n=a.n()).done;){var o=Gm(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=me(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Cs(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=vo.fromDate(e);return{timestampValue:Lc(t.It,n)}}if(e instanceof vo){var r=new vo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lc(t.It,r)}}if(e instanceof Nm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Em)return{bytesValue:Mc(t.It,e._byteString)};if(e instanceof Uv){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:jc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(Av(e)))}(e,t)}function Qm(e,t){var n={};return Xo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yo(e,(function(e,r){var i=Gm(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ym(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof vo||e instanceof Nm||e instanceof Em||e instanceof Uv||e instanceof Cm)}function Xm(e,t,n){if(!Ym(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Av(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function $m(e,t,n){if((t=me(t))instanceof Tm)return t._internalPath;if("string"==typeof t)return Zm(e,t);throw ey("Field path arguments must be of type string or ",e,!1,void 0,n)}var Jm=new RegExp("[~\\*/\\[\\]]");function Zm(e,t,n){if(t.search(Jm)>=0)throw ey("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return j(Tm,I(t.split(".")))._internalPath}catch(r){throw ey("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ey(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Za(Ja.INVALID_ARGUMENT,u+e+s)}function ty(e,t){return e.some((function(e){return e.isEqual(t)}))}var ny=function(){function e(t,n,r,i,a){N(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return A(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Uv(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ry(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(iy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ry=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.apply(this,arguments)}return A(n,[{key:"data",value:function(){return Ot(L(n.prototype),"data",this).call(this)}}]),n}(ny);function iy(e,t){return"string"==typeof t?Zm(e,t):t instanceof Tm?t._internalPath:t._delegate._internalPath}function ay(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Za(Ja.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var oy=A((function e(){N(this,e)}));function uy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var sy=function(e){O(n,e);var t=U(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).ma=e,a.ga=r,a.ya=i,a.type="where",a}return A(n,[{key:"_apply",value:function(e){var t=Mm(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Za(Ja.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){by(o,a);var s,c=[],l=C(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(ky(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=ky(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||by(o,a),u=Hm(n,"where",o,"in"===a||"not-in"===a);var h=Yu.create(i,a,u);return function(e,t){if(t.dt()){var n=ps(e);if(null!==n&&!n.isEqual(t.field))throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=ds(e);null!==r&&wy(e,t.field,r)}var i=function(e,t){var n,r=C(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Za(Ja.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Za(Ja.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new jv(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(oy);function cy(e,t,n){var r=t,i=iy("where",e);return new sy(i,r,n)}var ly=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this)).ma=e,i.pa=r,i.type="orderBy",i}return A(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new as(t,n);return function(e,t){if(null===ds(e)){var n=ps(e);null!==n&&wy(e,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new jv(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new cs(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(oy);var fy=function(e){O(n,e);var t=U(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).type=e,a.Ia=r,a.Ta=i,a}return A(n,[{key:"_apply",value:function(e){return new jv(e.firestore,e.converter,gs(e._query,this.Ia,this.Ta))}}]),n}(oy);var hy=function(e){O(n,e);var t=U(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return A(n,[{key:"_apply",value:function(e){var t=gy(e,this.type,this.Ea,this.Aa);return new jv(e.firestore,e.converter,function(e,t){return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(oy);function dy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hy("startAt",t,!0)}function py(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new hy("startAfter",t,!1)}var vy=function(e){O(n,e);var t=U(n);function n(e,r,i){var a;return N(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return A(n,[{key:"_apply",value:function(e){var t=gy(e,this.type,this.Ea,this.Aa);return new jv(e.firestore,e.converter,function(e,t){return new cs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(oy);function my(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vy("endBefore",t,!1)}function yy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vy("endAt",t,!0)}function gy(e,t,n,r){if(n[0]=me(n[0]),n[0]instanceof ny)return function(e,t,n,r,i){if(!r)throw new Za(Ja.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=C(ms(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Eu(t,r.key));else{var c=r.data.field(s.field);if(cu(c))throw new Za(Ja.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new is(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Mm(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Za(Ja.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!vs(e)&&-1!==c.indexOf("/"))throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(go.fromString(c));if(!wo.isDocumentKey(l))throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new wo(l);u.push(Eu(t,f))}else{var h=Hm(n,r,c);u.push(h)}}return new is(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ky(e,t,n){if("string"==typeof(n=me(n))){if(""===n)throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vs(t)&&-1!==n.indexOf("/"))throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(go.fromString(n));if(!wo.isDocumentKey(r))throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Eu(e,new wo(r))}if(n instanceof Uv)return Eu(e,n._key);throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Av(n),"."))}function by(e,t){if(!Array.isArray(e)||0===e.length)throw new Za(Ja.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Za(Ja.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function wy(e,t,n){if(!n.isEqual(t))throw new Za(Ja.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var xy=function(){function e(){N(this,e)}return A(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ku(e)){case 0:return null;case 1:return e.booleanValue;case 2:return uu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ya()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Yo(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Nm(uu(e.latitude),uu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=lu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=ou(e);return new vo(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=go.fromString(e);Xa(cl(n));var r=new du(n.get(1),n.get(3)),i=new wo(n.popFirst(5));return r.isEqual(t)||Ha("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function _y(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Iy=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this)).firestore=e,r}return A(n,[{key:"convertBytes",value:function(e){return new Em(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Uv(this.firestore,null,t)}}]),n}(xy),Sy=function(){function e(t,n){N(this,e),this.hasPendingWrites=t,this.fromCache=n}return A(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Ey=function(e){O(n,e);var t=U(n);function n(e,r,i,a,o,u){var s;return N(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return A(n,[{key:"exists",value:function(){return Ot(L(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Ty(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(iy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(ny),Ty=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.apply(this,arguments)}return A(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ot(L(n.prototype),"data",this).call(this,e)}}]),n}(Ey),Cy=function(){function e(t,n,r,i){N(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Sy(i.hasPendingWrites,i.fromCache),this.query=r}return A(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Ty(n._firestore,n._userDataWriter,r.key,r,new Sy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Za(Ja.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Ty(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Ty(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Ny(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Ny(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ya()}}function Dy(e,t){return e instanceof Ey&&t instanceof Ey?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Cy&&t instanceof Cy&&e._firestore===t._firestore&&Wv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Ay(e){e=Pv(e,Uv);var t=Pv(e.firestore,ym);return hm(gm(t),e._key).then((function(n){return qy(t,e,n)}))}var Py=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this)).firestore=e,r}return A(n,[{key:"convertBytes",value:function(e){return new Em(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Uv(this.firestore,null,t)}}]),n}(xy);function Ry(e){e=Pv(e,Uv);var t=Pv(e.firestore,ym),n=gm(t),r=new Py(t);return function(e,t){var n=new eo;return e.asyncQueue.enqueueAndForget(T(S().mark((function r(){return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=T(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=$a(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Za(Ja.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=rp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,om(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Ey(t,r,e._key,n,new Sy(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Oy(e){e=Pv(e,jv);var t=Pv(e.firestore,ym),n=gm(t),r=new Py(t);return ay(e._query),dm(n,e._query).then((function(n){return new Cy(t,r,e,n)}))}function Ly(e){e=Pv(e,jv);var t=Pv(e.firestore,ym),n=gm(t),r=new Py(t);return function(e,t){var n=new eo;return e.asyncQueue.enqueueAndForget(T(S().mark((function r(){return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=T(S().mark((function e(t,n,r){var i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mh(t,n,!0);case 3:i=e.sent,a=new _p(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=rp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,om(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Cy(t,r,e,n)}))}function My(e,t,n){e=Pv(e,Uv);var r=Pv(e.firestore,ym),i=_y(e.converter,t,n);return zy(r,[Fm(Mm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,qs.none())])}function Fy(e,t,n){e=Pv(e,Uv);for(var r=Pv(e.firestore,ym),i=Mm(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return zy(r,[("string"==typeof(t=me(t))||t instanceof Tm?Km(i,"updateDoc",e._key,t,n,o):Wm(i,"updateDoc",e._key,t)).toMutation(e._key,qs.exists(!0))])}function Uy(e){return zy(Pv(e.firestore,ym),[new ic(e._key,qs.none())])}function jy(e,t){var n=Pv(e.firestore,ym),r=zv(e),i=_y(e.converter,t);return zy(n,[Fm(Mm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,qs.exists(!1))]).then((function(){return r}))}function Vy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=me(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||vm(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(vm(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Uv)l=Pv(e.firestore,ym),f=fs(e._key.path),c={next:function(t){n[s]&&n[s](qy(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Pv(e,jv);l=Pv(p.firestore,ym),f=p._query;var v=new Py(l);c={next:function(e){n[s]&&n[s](new Cy(l,v,p,e))},error:n[s+1],complete:n[s+2]},ay(e._query)}return function(e,t,n,r){var i=new Hv(r),a=new mp(t,i,n);return e.asyncQueue.enqueueAndForget(T(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=cp,t.next=3,lm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(T(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fp,t.next=3,lm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gm(l),f,h,c)}function By(e,t){return function(e,t){var n=new Hv(t);return e.asyncQueue.enqueueAndForget(T(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){$a(e).Ru.add(t),t.next()},t.next=3,lm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(T(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){$a(e).Ru.delete(t)},t.next=3,lm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gm(e=Pv(e,ym)),vm(t)?t:{next:t})}function zy(e,t){return function(e,t){var n=new eo;return e.asyncQueue.enqueueAndForget(T(S().mark((function r(){return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Rp,r.next=3,sm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(gm(e),t)}function qy(e,t,n){var r=n.docs.get(t._key),i=new Py(e);return new Ey(e,i,t._key,r,new Sy(n.hasPendingWrites,n.fromCache),t.converter)}var Wy={maxAttempts:5},Ky=function(){function e(t,n){N(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Mm(t)}return A(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Hy(e,this._firestore),i=_y(r.converter,t,n),a=Fm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,qs.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Hy(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=me(t))||t instanceof Tm?Km(this._dataReader,"WriteBatch.update",i._key,t,n,o):Wm(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,qs.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Hy(e,this._firestore);return this._mutations=this._mutations.concat(new ic(t._key,qs.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Za(Ja.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Hy(e,t){if((e=me(e)).firestore!==t)throw new Za(Ja.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Gy=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,r))._firestore=e,i}return A(n,[{key:"get",value:function(e){var t=this,r=Hy(e,this._firestore),i=new Py(this._firestore);return Ot(L(n.prototype),"get",this).call(this,e).then((function(e){return new Ey(t._firestore,i,r._key,e._document,new Sy(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){N(this,e),this._firestore=t,this._transaction=n,this._dataReader=Mm(t)}return A(e,[{key:"get",value:function(e){var t=this,n=Hy(e,this._firestore),r=new Iy(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ya();var i=e[0];if(i.isFoundDocument())return new ny(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ny(t._firestore,r,n._key,null,n.converter);throw Ya()}))}},{key:"set",value:function(e,t,n){var r=Hy(e,this._firestore),i=_y(r.converter,t,n),a=Fm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Hy(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=me(t))||t instanceof Tm?Km(this._dataReader,"Transaction.update",i._key,t,n,o):Wm(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Hy(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Qy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Bm("arrayUnion",t)}function Yy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zm("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){za=e}(lt),rt(new ye("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new ym(new io(e.getProvider("auth-internal")),new so(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Za(Ja.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),mt(Va,"3.7.3",e),mt(Va,"3.7.3","esm2017")}();function Xy(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var $y;Object.create;function Jy(){return l({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Zy=Jy,eg=new ie("auth","Firebase",Jy()),tg=new Ce("@firebase/auth");function ng(e){if(tg.logLevel<=we.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];tg.error.apply(tg,["Auth (".concat(lt,"): ").concat(e)].concat(n))}}function rg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw og.apply(void 0,[e].concat(n))}function ig(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return og.apply(void 0,[e].concat(n))}function ag(e,t,n){var r=Object.assign(Object.assign({},Zy()),l({},t,n));return new ie("auth","Firebase",r).create(t,{appName:e.name})}function og(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=I(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(I(o)))}return eg.create.apply(eg,[e].concat(n))}function ug(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw og.apply(void 0,[t].concat(r))}}function sg(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ng(t),new Error(t)}function cg(e,t){e||sg(t)}var lg=new Map;function fg(e){cg(e instanceof Function,"Expected a class definition");var t=lg.get(e);return t?(cg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,lg.set(e,t),t)}function hg(e,t){var n=it(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(se(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;rg(r,"already-initialized")}return n.initialize({options:t})}function dg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function pg(){return"http:"===vg()||"https:"===vg()}function vg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function mg(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(pg()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var yg=function(){function e(t,n){N(this,e),this.shortDelay=t,this.longDelay=n,cg(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(H())||"object"===typeof navigator&&"ReactNative"===navigator.product}return A(e,[{key:"get",value:function(){return mg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function gg(e,t){cg(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var kg=function(){function e(){N(this,e)}return A(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void sg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void sg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void sg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),bg=(l($y={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),l($y,"MISSING_CUSTOM_TOKEN","internal-error"),l($y,"INVALID_IDENTIFIER","invalid-email"),l($y,"MISSING_CONTINUE_URI","internal-error"),l($y,"INVALID_PASSWORD","wrong-password"),l($y,"MISSING_PASSWORD","internal-error"),l($y,"EMAIL_EXISTS","email-already-in-use"),l($y,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),l($y,"INVALID_IDP_RESPONSE","invalid-credential"),l($y,"INVALID_PENDING_TOKEN","invalid-credential"),l($y,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),l($y,"MISSING_REQ_TYPE","internal-error"),l($y,"EMAIL_NOT_FOUND","user-not-found"),l($y,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),l($y,"EXPIRED_OOB_CODE","expired-action-code"),l($y,"INVALID_OOB_CODE","invalid-action-code"),l($y,"MISSING_OOB_CODE","internal-error"),l($y,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),l($y,"INVALID_ID_TOKEN","invalid-user-token"),l($y,"TOKEN_EXPIRED","user-token-expired"),l($y,"USER_NOT_FOUND","user-token-expired"),l($y,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),l($y,"INVALID_CODE","invalid-verification-code"),l($y,"INVALID_SESSION_INFO","invalid-verification-id"),l($y,"INVALID_TEMPORARY_PROOF","invalid-credential"),l($y,"MISSING_SESSION_INFO","missing-verification-id"),l($y,"SESSION_EXPIRED","code-expired"),l($y,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),l($y,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),l($y,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),l($y,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),l($y,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),l($y,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),l($y,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),l($y,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),l($y,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),l($y,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),l($y,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),$y),wg=new yg(3e4,6e4);function xg(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function _g(e,t,n,r){return Ig.apply(this,arguments)}function Ig(){return Ig=T(S().mark((function e(t,n,r,i){var a,o=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Sg(t,a,T(S().mark((function e(){var a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=le(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",kg.fetch()(Ng(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ig.apply(this,arguments)}function Sg(e,t,n){return Eg.apply(this,arguments)}function Eg(){return Eg=T(S().mark((function e(t,n,r){var i,a,o,s,c,l,f,h,d,p;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},bg),n),e.prev=2,a=new Dg(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Ag(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=o.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=u(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Ag(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Ag(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Ag(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw ag(t,p,d);case 34:rg(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof re)){e.next=41;break}throw e.t0;case 41:rg(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Eg.apply(this,arguments)}function Tg(e,t,n,r){return Cg.apply(this,arguments)}function Cg(){return Cg=T(S().mark((function e(t,n,r,i){var a,o,u=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,_g(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&rg(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Cg.apply(this,arguments)}function Ng(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?gg(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Dg=function(){function e(t){var n=this;N(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ig(n.auth,"network-request-failed"))}),wg.get())}))}return A(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Ag(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ig(e,t,r);return i.customData._tokenResponse=n,i}function Pg(e,t){return Rg.apply(this,arguments)}function Rg(){return Rg=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_g(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Rg.apply(this,arguments)}function Og(e,t){return Lg.apply(this,arguments)}function Lg(){return Lg=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_g(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Lg.apply(this,arguments)}function Mg(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Fg(){return Fg=T(S().mark((function e(t){var n,r,i,a,o,u,s=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=me(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ug((a=jg(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Mg(Ug(a.auth_time)),issuedAtTime:Mg(Ug(a.iat)),expirationTime:Mg(Ug(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Fg.apply(this,arguments)}function Ug(e){return 1e3*Number(e)}function jg(e){var t,n=u(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return ng("JWT malformed, contained fewer than 3 sections"),null;try{var o=W(i);return o?JSON.parse(o):(ng("Failed to decode base64 JWT payload"),null)}catch(s){return ng("Caught error parsing JWT payload as JSON",null===(t=s)||void 0===t?void 0:t.toString()),null}}function Vg(e,t){return Bg.apply(this,arguments)}function Bg(){return Bg=T(S().mark((function e(t,n){var r=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof re&&zg(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Bg.apply(this,arguments)}function zg(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var qg=function(){function e(t){N(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return A(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(T(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=T(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Wg=function(){function e(t,n){N(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return A(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Mg(this.lastLoginAt),this.creationTime=Mg(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Kg(e){return Hg.apply(this,arguments)}function Hg(){return Hg=T(S().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Vg(t,Og(r,{idToken:i}));case 6:ug(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Yg(o.providerUserInfo):[],s=Qg(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Wg(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Hg.apply(this,arguments)}function Gg(){return(Gg=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=me(t),e.next=3,Kg(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qg(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(I(n),I(t))}function Yg(e){return e.map((function(e){var t=e.providerId,n=Xy(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Xg(e,t){return $g.apply(this,arguments)}function $g(){return $g=T(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sg(t,{},T(S().mark((function e(){var r,i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=le({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Ng(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",kg.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),$g.apply(this,arguments)}var Jg=function(){function e(){N(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return A(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ug(e.idToken,"internal-error"),ug("undefined"!==typeof e.idToken,"internal-error"),ug("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=jg(e);return ug(t,"internal-error"),ug("undefined"!==typeof t.exp,"internal-error"),ug("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=T(S().mark((function e(t){var n,r=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ug(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=T(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xg(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return sg("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ug("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ug("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ug("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Zg(e,t){ug("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ek=function(){function e(t){N(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Xy(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?I(a.providerData):[],this.metadata=new Wg(a.createdAt||void 0,a.lastLoginAt||void 0)}return A(e,[{key:"getIdToken",value:function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vg(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ug(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Fg.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Gg.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ug(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){ug(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=T(S().mark((function e(t){var n,r,i=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Kg(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=T(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Vg(this,Pg(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;ug(k&&_,t,"internal-error");var I=Jg.fromJSON(this.name,_);ug("string"===typeof k,t,"internal-error"),Zg(f,t.name),Zg(h,t.name),ug("boolean"===typeof b,t,"internal-error"),ug("boolean"===typeof w,t,"internal-error"),Zg(d,t.name),Zg(p,t.name),Zg(v,t.name),Zg(m,t.name),Zg(y,t.name),Zg(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=T(S().mark((function t(n,r){var i,a,o,u=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Jg).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Kg(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),tk=function(){function e(){N(this,e),this.type="NONE",this.storage={}}return A(e,[{key:"_isAvailable",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();tk.type="NONE";var nk=tk;function rk(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ik=function(){function e(t,n,r){N(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=rk(this.userKey,a.apiKey,o),this.fullPersistenceKey=rk("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return A(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=T(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ek._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=T(S().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(fg(nk),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||fg(nk),u=rk(i,n.config.apiKey,n.name),s=null,c=C(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=ek._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ak(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ck(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ok(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fk(t))return"Blackberry";if(hk(t))return"Webos";if(uk(t))return"Safari";if((t.includes("chrome/")||sk(t))&&!t.includes("edge/"))return"Chrome";if(lk(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ok(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/firefox\//i.test(e)}function uk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function sk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/crios\//i.test(e)}function ck(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/iemobile/i.test(e)}function lk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/android/i.test(e)}function fk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/blackberry/i.test(e)}function hk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/webos/i.test(e)}function dk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pk(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return dk(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function vk(){return function(){var e=H();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function mk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H();return dk(e)||lk(e)||hk(e)||fk(e)||/windows phone/i.test(e)||ck(e)}function yk(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ak(H());break;case"Worker":t="".concat(ak(H()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(lt,"/").concat(r)}var gk=function(){function e(t){N(this,e),this.auth=t,this.queue=[]}return A(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=T(S().mark((function e(t){var n,r,i,a,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=C(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=C(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),kk=function(){function e(t,n,r){N(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wk(this),this.idTokenSubscription=new wk(this),this.beforeStateQueue=new gk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eg,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return A(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=fg(t)),this._initializationPromise=this.queue(T(S().mark((function r(){var i,a;return S().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ik.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=T(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=T(S().mark((function e(t){var n,r,i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return ug(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Kg(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?me(t):null)&&ug(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=T(S().mark((function e(t){var n,r=this,i=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&ug(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(T(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(fg(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ie("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=T(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ug(n=t&&fg(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ik.create(this,[fg(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=T(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=T(S().mark((function e(t){var n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ug(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ug(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yk(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=T(S().mark((function e(){var t,n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function bk(e){return me(e)}var wk=function(){function e(t){var n=this;N(this,e),this.auth=t,this.observer=null,this.addObserver=de((function(e){return n.observer=e}))}return A(e,[{key:"next",get:function(){return ug(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function xk(e,t,n){var r=bk(e);ug(r._canInitEmulator,r,"emulator-config-failed"),ug(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=_k(t),o=function(e){var t=_k(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ik(r.substr(a.length+1))}}var o=u(r.split(":"),2);return{host:o[0],port:Ik(o[1])}}(t),s=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function _k(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ik(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Sk=function(){function e(t,n){N(this,e),this.providerId=t,this.signInMethod=n}return A(e,[{key:"toJSON",value:function(){return sg("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return sg("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return sg("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return sg("not implemented")}}]),e}();function Ek(e,t){return Tk.apply(this,arguments)}function Tk(){return Tk=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_g(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Tk.apply(this,arguments)}function Ck(e,t){return Nk.apply(this,arguments)}function Nk(){return Nk=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tg(t,"POST","/v1/accounts:signInWithPassword",xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Nk.apply(this,arguments)}function Dk(e,t){return Ak.apply(this,arguments)}function Ak(){return Ak=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tg(t,"POST","/v1/accounts:signInWithEmailLink",xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ak.apply(this,arguments)}function Pk(e,t){return Rk.apply(this,arguments)}function Rk(){return Rk=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tg(t,"POST","/v1/accounts:signInWithEmailLink",xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rk.apply(this,arguments)}var Ok=function(e){O(n,e);var t=U(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return N(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return A(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ck(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Dk(t,{email:this._email,oobCode:this._password}));case 5:rg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ek(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Pk(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:rg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Sk);function Lk(e,t){return Mk.apply(this,arguments)}function Mk(){return Mk=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tg(t,"POST","/v1/accounts:signInWithIdp",xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mk.apply(this,arguments)}var Fk=function(e){O(n,e);var t=U(n);function n(){var e;return N(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return A(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Lk(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Lk(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Lk(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=le(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rg("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Xy(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Sk);function Uk(e,t){return jk.apply(this,arguments)}function jk(){return jk=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_g(t,"POST","/v1/accounts:sendVerificationCode",xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),jk.apply(this,arguments)}function Vk(){return Vk=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tg(t,"POST","/v1/accounts:signInWithPhoneNumber",xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vk.apply(this,arguments)}function Bk(){return Bk=T(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tg(t,"POST","/v1/accounts:signInWithPhoneNumber",xg(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Ag(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Bk.apply(this,arguments)}var zk=l({},"USER_NOT_FOUND","user-not-found");function qk(){return qk=T(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Tg(t,"POST","/v1/accounts:signInWithPhoneNumber",xg(t,r),zk));case 2:case"end":return e.stop()}}),e)}))),qk.apply(this,arguments)}var Wk=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this,"phone","phone")).params=e,r}return A(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Vk.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Bk.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return qk.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Sk);var Kk=function(){function e(t){var n,r,i,a,o,u;N(this,e);var s=fe(he(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ug(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return A(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=fe(he(e)).link,n=t?fe(he(t)).deep_link_id:null,r=fe(he(e)).deep_link_id;return(r?fe(he(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Xv){return null}}}]),e}();var Hk=function(){function e(){N(this,e),this.providerId=e.PROVIDER_ID}return A(e,null,[{key:"credential",value:function(e,t){return Ok._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Kk.parseLink(t);return ug(n,"argument-error"),Ok._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Hk.PROVIDER_ID="password",Hk.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Hk.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Gk=function(){function e(t){N(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return A(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Qk=function(e){O(n,e);var t=U(n);function n(){var e;return N(this,n),(e=t.apply(this,arguments)).scopes=[],e}return A(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return I(this.scopes)}}]),n}(Gk),Yk=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.call(this,"facebook.com")}return A(n,null,[{key:"credential",value:function(e){return Fk._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Xv){return null}}}]),n}(Qk);Yk.FACEBOOK_SIGN_IN_METHOD="facebook.com",Yk.PROVIDER_ID="facebook.com";var Xk=function(e){O(n,e);var t=U(n);function n(){var e;return N(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return A(n,null,[{key:"credential",value:function(e,t){return Fk._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Xv){return null}}}]),n}(Qk);Xk.GOOGLE_SIGN_IN_METHOD="google.com",Xk.PROVIDER_ID="google.com";var $k=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.call(this,"github.com")}return A(n,null,[{key:"credential",value:function(e){return Fk._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Xv){return null}}}]),n}(Qk);$k.GITHUB_SIGN_IN_METHOD="github.com",$k.PROVIDER_ID="github.com";var Jk=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.call(this,"twitter.com")}return A(n,null,[{key:"credential",value:function(e,t){return Fk._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Xv){return null}}}]),n}(Qk);function Zk(e,t){return eb.apply(this,arguments)}function eb(){return eb=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tg(t,"POST","/v1/accounts:signUp",xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),eb.apply(this,arguments)}Jk.TWITTER_SIGN_IN_METHOD="twitter.com",Jk.PROVIDER_ID="twitter.com";var tb=function(){function e(t){N(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return A(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=T(S().mark((function t(n,r,i){var a,o,u,s,c=arguments;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ek._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=nb(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=T(S().mark((function t(n,r,i){var a;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=nb(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function nb(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var rb=function(e){O(n,e);var t=U(n);function n(e,r,i,a){var o,u;return N(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(P(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return A(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(re);function ib(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw rb._fromErrorAndOperation(e,n,t,r);throw n}))}function ab(e,t){return ob.apply(this,arguments)}function ob(){return ob=T(S().mark((function e(t,n){var r,i,a=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Vg,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",tb._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ob.apply(this,arguments)}function ub(e,t){return sb.apply(this,arguments)}function sb(){return sb=T(S().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Vg(t,ib(a,o,n,t),r);case 6:return ug((u=e.sent).idToken,a,"internal-error"),ug(s=jg(u.idToken),a,"internal-error"),c=s.sub,ug(t.uid===c,a,"user-mismatch"),e.abrupt("return",tb._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&rg(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),sb.apply(this,arguments)}function cb(e,t){return lb.apply(this,arguments)}function lb(){return lb=T(S().mark((function e(t,n){var r,i,a,o,u=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ib(t,i,n);case 4:return a=e.sent,e.next=7,tb._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),lb.apply(this,arguments)}function fb(e,t){return hb.apply(this,arguments)}function hb(){return hb=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cb(bk(t),n));case 1:case"end":return e.stop()}}),e)}))),hb.apply(this,arguments)}function db(){return db=T(S().mark((function e(t,n,r){var i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bk(t),e.next=3,Zk(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,tb._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}function pb(e,t,n,r){return me(e).onIdTokenChanged(t,n,r)}function vb(e,t,n){return me(e).beforeAuthStateChanged(t,n)}function mb(e,t){return _g(e,"POST","/v2/accounts/mfaEnrollment:start",xg(e,t))}new WeakMap;var yb="__sak",gb=function(){function e(t,n){N(this,e),this.storageRetriever=t,this.type=n}return A(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(yb,"1"),this.storage.removeItem(yb),Promise.resolve(!0)):Promise.resolve(!1)}catch(Xv){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var kb=function(e){O(n,e);var t=U(n);function n(){var e;return N(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=H();return uk(e)||dk(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=mk(),e._shouldAllowMigration=!0,e}return A(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);vk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=T(S().mark((function e(t,r){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot(L(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=T(S().mark((function e(t){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot(L(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ot(L(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(gb);kb.type="LOCAL";var bb=kb,wb=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return A(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(gb);wb.type="SESSION";var xb=wb;function _b(e){return Promise.all(e.map(function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ib=function(){function e(t){N(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return A(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=T(S().mark((function e(t){var n,r,i,a,o,u,s,c;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,_b(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Sb(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ib.receivers=[];var Eb=function(){function e(t){N(this,e),this.target=t,this.handlers=new Set}return A(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=T(S().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Sb("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Tb(){return window}function Cb(){return"undefined"!==typeof Tb().WorkerGlobalScope&&"function"===typeof Tb().importScripts}function Nb(){return Db.apply(this,arguments)}function Db(){return(Db=T(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ab(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Pb="firebaseLocalStorageDb",Rb="firebaseLocalStorage",Ob="fbase_key",Lb=function(){function e(t){N(this,e),this.request=t}return A(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Mb(e,t){return e.transaction([Rb],t?"readwrite":"readonly").objectStore(Rb)}function Fb(){var e=indexedDB.deleteDatabase(Pb);return new Lb(e).toPromise()}function Ub(){var e=indexedDB.open(Pb,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Rb,{keyPath:Ob})}catch(r){n(r)}})),e.addEventListener("success",T(S().mark((function n(){var r;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Rb)){n.next=12;break}return r.close(),n.next=5,Fb();case 5:return n.t0=t,n.next=8,Ub();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function jb(e,t,n){return Vb.apply(this,arguments)}function Vb(){return Vb=T(S().mark((function e(t,n,r){var i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Mb(t,!0).put((l(i={},Ob,n),l(i,"value",r),i)),e.abrupt("return",new Lb(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function Bb(e,t){return zb.apply(this,arguments)}function zb(){return zb=T(S().mark((function e(t,n){var r,i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Mb(t,!1).get(n),e.next=3,new Lb(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}function qb(e,t){var n=Mb(e,!0).delete(t);return new Lb(n).toPromise()}var Wb=function(){function e(){N(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return A(e,[{key:"_openDb",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ub();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=T(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cb()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=T(S().mark((function e(){var t=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ib._getInstance(Cb()?self:null),this.receiver._subscribe("keyChanged",function(){var e=T(S().mark((function e(n,r){var i;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=T(S().mark((function e(t,n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=T(S().mark((function e(){var t,n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nb();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Eb(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ab()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=T(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ub();case 5:return t=e.sent,e.next=8,jb(t,yb,"1");case 8:return e.next=10,qb(t,yb);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=T(S().mark((function e(t,n){var r=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return jb(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Bb(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=T(S().mark((function e(t){var n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return qb(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=T(S().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Mb(e,!1).getAll();return new Lb(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=C(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(T(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Wb.type="LOCAL";var Kb=Wb;function Hb(e,t){return _g(e,"POST","/v2/accounts/mfaSignIn:start",xg(e,t))}function Gb(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ig("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Qb(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}Qb("rcb"),new yg(3e4,6e4);var Yb="recaptcha";function Xb(e,t,n){return $b.apply(this,arguments)}function $b(){return $b=T(S().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ug("string"===typeof a,t,"argument-error"),ug(r.type===Yb,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return ug("enroll"===u.type,t,"internal-error"),e.next=13,mb(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return ug("signin"===u.type,t,"internal-error"),ug(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Hb(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Uk(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),$b.apply(this,arguments)}var Jb=function(){function e(t){N(this,e),this.providerId=e.PROVIDER_ID,this.auth=bk(t)}return A(e,[{key:"verifyPhoneNumber",value:function(e,t){return Xb(this.auth,e,me(t))}}],[{key:"credential",value:function(e,t){return Wk._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Wk._fromTokenResponse(n,r):null}}]),e}();function Zb(e,t){return t?fg(t):(ug(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Jb.PROVIDER_ID="phone",Jb.PHONE_SIGN_IN_METHOD="phone";var ew=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this,"custom","custom")).params=e,r}return A(n,[{key:"_getIdTokenResponse",value:function(e){return Lk(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Lk(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Lk(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Sk);function tw(e){return cb(e.auth,new ew(e),e.bypassAuthState)}function nw(e){var t=e.auth,n=e.user;return ug(n,t,"internal-error"),ub(n,new ew(e),e.bypassAuthState)}function rw(e){return iw.apply(this,arguments)}function iw(){return iw=T(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ug(r=t.user,n,"internal-error"),e.abrupt("return",ab(r,new ew(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}var aw=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];N(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return A(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=T(S().mark((function t(n,r){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=T(S().mark((function e(t){var n,r,i,a,o,u,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tw;case"linkViaPopup":case"linkViaRedirect":return rw;case"reauthViaPopup":case"reauthViaRedirect":return nw;default:rg(this.auth,"internal-error")}}},{key:"resolve",value:function(e){cg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){cg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ow=new yg(2e3,1e4);var uw=function(e){O(n,e);var t=U(n);function n(e,r,i,a,o){var u;return N(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=P(u),u}return A(n,[{key:"executeNotNull",value:function(){var e=T(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ug(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=T(S().mark((function e(){var t,n=this;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cg(1===this.filter.length,"Popup operations only handle one event"),t=Sb(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ig(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ig(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ig(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,ow.get())}()}}]),n}(aw);uw.currentPopupAction=null;var sw=new Map,cw=function(e){O(n,e);var t=U(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return N(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return A(n,[{key:"execute",value:function(){var e=T(S().mark((function e(){var t,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=sw.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,lw(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ot(L(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:sw.set(this.auth._key(),t);case 21:return this.bypassAuthState||sw.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=T(S().mark((function e(t){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ot(L(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ot(L(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(aw);function lw(e,t){return fw.apply(this,arguments)}function fw(){return fw=T(S().mark((function e(t,n){var r,i,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pw(n),i=dw(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),fw.apply(this,arguments)}function hw(e,t){sw.set(e._key(),t)}function dw(e){return fg(e._redirectPersistence)}function pw(e){return rk("pendingRedirect",e.config.apiKey,e.name)}function vw(e,t){return mw.apply(this,arguments)}function mw(){return mw=T(S().mark((function e(t,n){var r,i,a,o,u,s=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=bk(t),a=Zb(i,n),o=new cw(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),mw.apply(this,arguments)}var yw=function(){function e(t){N(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return A(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kw(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!kw(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ig(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gw(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(gw(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function gw(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function kw(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function bw(e){return ww.apply(this,arguments)}function ww(){return ww=T(S().mark((function e(t){var n,r=arguments;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",_g(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}var xw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_w=/^https?/;function Iw(){return Iw=T(S().mark((function e(t){var n,r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,bw(t);case 4:n=e.sent,r=n.authorizedDomains,i=C(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Sw(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:rg(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Iw.apply(this,arguments)}function Sw(e){var t=dg(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!_w.test(r))return!1;if(xw.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Ew=new yg(3e4,6e4);function Tw(){var e=Tb().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=I(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Cw=null;function Nw(e){return Cw=Cw||function(e){return new Promise((function(t,n){var r,i,a;function o(){Tw(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Tw(),n(ig(e,"network-request-failed"))},timeout:Ew.get()})}if(null===(i=null===(r=Tb().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Tb().gapi)||void 0===a?void 0:a.load)){var u=Qb("iframefcb");return Tb()[u]=function(){gapi.load?o():n(ig(e,"network-request-failed"))},Gb("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Cw=null,e}))}(e),Cw}var Dw=new yg(5e3,15e3),Aw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rw(e){var t=e.config;ug(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?gg(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:lt},i=Pw.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(le(r).slice(1))}function Ow(e){return Lw.apply(this,arguments)}function Lw(){return Lw=T(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nw(t);case 2:return n=e.sent,ug(r=Tb().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Rw(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Aw,dontclear:!0},(function(e){return new Promise(function(){var n=T(S().mark((function n(r,i){var a,o,u;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Tb().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ig(t,"network-request-failed"),o=Tb().setTimeout((function(){i(a)}),Dw.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Lw.apply(this,arguments)}var Mw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Fw="_blank",Uw="http://localhost",jw=function(){function e(t){N(this,e),this.window=t,this.associatedEvent=null}return A(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Vw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",c=Object.assign(Object.assign({},Mw),{width:r.toString(),height:i.toString(),top:a,left:o}),l=H().toLowerCase();n&&(s=sk(l)?Fw:n),ok(l)&&(t=t||Uw,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=u(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(pk(l)&&"_self"!==s)return Bw(t||"",s),new jw(null);var h=window.open(t||"",s,f);ug(h,e,"popup-blocked");try{h.focus()}catch(d){}return new jw(h)}function Bw(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var zw="__/auth/handler",qw="emulator/auth/handler";function Ww(e,t,n,r,i,a){ug(e.config.authDomain,e,"auth-domain-config-required"),ug(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:lt,eventId:i};if(t instanceof Gk){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,c=Object.entries(a||{});s<c.length;s++){var l=u(c[s],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Qk){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(zw);return gg(t,qw)}(e),"?").concat(le(p).slice(1))}var Kw="webStorageSupport",Hw=function(){function e(){N(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xb,this._completeRedirectFn=vw,this._overrideRedirectResult=hw}return A(e,[{key:"_openPopup",value:function(){var e=T(S().mark((function e(t,n,r,i){var a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cg(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ww(t,n,r,dg(),i),e.abrupt("return",Vw(t,o,Sb()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=T(S().mark((function e(t,n,r,i){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ww(t,n,r,dg(),i),Tb().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(cg(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=T(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ow(t);case 2:return n=e.sent,r=new yw(t),n.register("authEvent",(function(e){return ug(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Kw,{type:Kw},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Kw];void 0!==i&&t(!!i),rg(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Iw.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return mk()||uk()||dk()}}]),e}(),Gw=Hw,Qw=function(){function e(t){N(this,e),this.factorId=t}return A(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return sg("unexpected MultiFactorSessionType")}}}]),e}(),Yw=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this,"phone")).credential=e,r}return A(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return _g(e,"POST","/v2/accounts/mfaEnrollment:finalize",xg(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return _g(e,"POST","/v2/accounts/mfaSignIn:finalize",xg(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Qw);(function(){function e(){N(this,e)}return A(e,null,[{key:"assertion",value:function(e){return Yw._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var Xw="@firebase/auth",$w="0.20.11",Jw=function(){function e(t){N(this,e),this.auth=t,this.internalListeners=new Map}return A(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ug(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Zw,ex=ee("authIdTokenMaxAge")||300,tx=null,nx=function(e){return function(){var t=T(S().mark((function t(n){var r,i,a;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>ex)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,tx!==a){t.next=12;break}return t.abrupt("return");case 12:return tx=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};Zw="Browser",rt(new ye("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){ug(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),ug(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Zw,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yk(Zw)},i=new kk(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fg);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),rt(new ye("auth-internal",(function(e){return function(e){return new Jw(e)}(bk(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),mt(Xw,$w,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Zw)),mt(Xw,$w,"esm2017");var rx="firebasestorage.googleapis.com",ix="storageBucket",ax=function(e){O(n,e);var t=U(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return N(this,n),(i=t.call(this,ox(e),"Firebase Storage: ".concat(r," (").concat(ox(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(P(i),n.prototype),i}return A(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return ox(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(re);function ox(e){return"storage/"+e}function ux(){return new ax("unknown","An unknown error occurred, please check the error payload for server response.")}function sx(){return new ax("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function cx(){return new ax("canceled","User canceled the upload/download.")}function lx(){return new ax("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function fx(e){return new ax("invalid-argument",e)}function hx(){return new ax("app-deleted","The Firebase app was deleted.")}function dx(e,t){return new ax("invalid-format","String does not match format '"+e+"': "+t)}function px(e){throw new ax("internal-error","Internal error: "+e)}var vx,mx=function(){function e(t,n){N(this,e),this.bucket=t,this.path_=n}return A(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new ax("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===rx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new ax("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),yx=function(){function e(t){N(this,e),this.promise_=Promise.reject(t)}return A(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function gx(e){return"string"===typeof e||e instanceof String}function kx(e){return bx()&&e instanceof Blob}function bx(){return"undefined"!==typeof Blob&&!G()}function wx(e,t,n,r){if(r<t)throw fx("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw fx("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function xx(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function _x(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function Ix(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(vx||(vx={}));var Sx=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];N(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return A(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=ux();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?hx():cx());else i(sx())}};this.canceled_?t(0,new Ex(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new Ex(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===vx.NO_ERROR,a=r.getStatus();if(n&&!Ix(a,e.additionalRetryCodes_)||!e.retry){var o=-1!==e.successCodes_.indexOf(a);t(!0,new Ex(o,r))}else{var u=r.getErrorCode()===vx.ABORT;t(!1,new Ex(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),Ex=A((function e(t,n,r){N(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Tx(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function Cx(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function Nx(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Dx(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function Ax(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=_x(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return Nx(c,t),Tx(c,n),Cx(c,a),Dx(c,r),new Sx(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function Px(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Rx(){for(var e=Px(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(bx())return new Blob(n);throw new ax("unsupported-environment","This browser doesn't seem to support creating Blobs")}function Ox(e){if("undefined"===typeof atob)throw new ax("unsupported-environment","".concat("base-64"," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));return atob(e)}var Lx="raw",Mx="base64",Fx="base64url",Ux="data_url",jx=A((function e(t,n){N(this,e),this.data=t,this.contentType=n||null}));function Vx(e,t){switch(e){case Lx:return new jx(Bx(t));case Mx:case Fx:return new jx(zx(e,t));case Ux:return new jx(function(e){var t=new qx(e);return t.base64?zx(Mx,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw dx(Ux,"Malformed data URL.")}return Bx(t)}(t.rest)}(t),new qx(t).contentType)}throw ux()}function Bx(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function zx(e,t){switch(e){case Mx:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw dx(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Fx:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw dx(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=Ox(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw dx(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var qx=A((function e(t){N(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw dx(Ux,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Wx=function(){function e(t,n){N(this,e);var r=0,i="";kx(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return A(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(kx(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(bx()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Rx.apply(null,i))}var a=n.map((function(e){return gx(e)?Vx(Lx,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function Kx(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Hx(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Gx(e,t){return t}var Qx=A((function e(t,n,r,i){N(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Gx})),Yx=null;function Xx(){if(Yx)return Yx;var e=[];e.push(new Qx("bucket")),e.push(new Qx("generation")),e.push(new Qx("metageneration")),e.push(new Qx("name","fullPath",!0));var t=new Qx("name");t.xform=function(e,t){return function(e){return!gx(e)||e.length<2?e:Hx(e)}(t)},e.push(t);var n=new Qx("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Qx("timeCreated")),e.push(new Qx("updated")),e.push(new Qx("md5Hash",null,!0)),e.push(new Qx("cacheControl",null,!0)),e.push(new Qx("contentDisposition",null,!0)),e.push(new Qx("contentEncoding",null,!0)),e.push(new Qx("contentLanguage",null,!0)),e.push(new Qx("contentType",null,!0)),e.push(new Qx("metadata","customMetadata",!0)),Yx=e}function $x(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new mx(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Jx(e,t,n){var r=Kx(t);return null===r?null:$x(e,r,n)}function Zx(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var e_=A((function e(t,n,r,i){N(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function t_(e){if(!e)throw ux()}function n_(e,t){return function(n,r){var i=Jx(e,r,t);return t_(null!==i),i}}function r_(e,t){return function(n,r){var i=Jx(e,r,t);return t_(null!==i),function(e,t,n,r){var i=Kx(t);if(null===i)return null;if(!gx(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return xx("/b/"+o(i)+"/o/"+o(a),n,r)+_x({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function i_(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new ax("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ax("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new ax("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new ax("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function a_(e){var t=i_(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new ax("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function o_(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function u_(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=o_(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Zx(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=Wx.getBlob(c,r,l);if(null===f)throw lx();var h={name:s.fullPath},d=xx(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new e_(d,"POST",n_(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=i_(t),v}var s_=function(){function e(){var t=this;N(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vx.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=vx.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=vx.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return A(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw px("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw px("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw px("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw px("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw px("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),c_=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.apply(this,arguments)}return A(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(s_);function l_(){return new c_}var f_=function(){function e(t,n){N(this,e),this._service=t,this._location=n instanceof mx?n:mx.makeFromUrl(n,t.host)}return A(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new mx(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Hx(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new mx(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new ax("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function h_(e,t,n){e._throwIfRoot("uploadBytes");var r=u_(e.storage,e._location,Xx(),new Wx(t,!0),n);return e.storage.makeRequestWithTokens(r,l_).then((function(t){return{metadata:t,ref:e}}))}function d_(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=xx(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new e_(r,"GET",r_(e,n),i);return a.errorHandler=a_(t),a}(e.storage,e._location,Xx());return e.storage.makeRequestWithTokens(t,l_).then((function(e){if(null===e)throw new ax("no-download-url","The given file does not have any download URLs.");return e}))}function p_(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new mx(e._location.bucket,n);return new f_(e.storage,r)}function v_(e,t){if(e instanceof b_){var n=e;if(null==n._bucket)throw new ax("no-default-bucket","No default bucket found. Did you set the '"+ix+"' property when initializing the app?");var r=new f_(n,n._bucket);return null!=t?v_(r,t):r}return void 0!==t?p_(e,t):e}function m_(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof b_)return new f_(e,t);throw fx("To use ref(service, url), the first argument must be a Storage instance.")}return v_(e,t)}function y_(e,t){var n=null===t||void 0===t?void 0:t[ix];return null==n?null:mx.makeFromBucketSpec(n,e)}function g_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:ne(i,e.app.options.projectId))}var k_,b_=function(){function e(t,n,r,i,a){N(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=rx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?mx.makeFromBucketSpec(i,this._host):y_(this._host,this.app.options)}return A(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=mx.makeFromBucketSpec(this._url,e):this._bucket=y_(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){wx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){wx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=T(S().mark((function e(){var t,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=T(S().mark((function e(){var t,n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new f_(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new yx(hx());var o=Ax(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=T(S().mark((function e(t,n){var r,i,a,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=u(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),w_="@firebase/storage",x_="0.9.14",__="storage";function I_(e,t,n){return h_(e=me(e),t,n)}function S_(e){return d_(e=me(e))}function E_(e,t){return m_(e=me(e),t)}function T_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};g_(e,t,n,r)}function C_(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new b_(r,i,a,n,lt)}rt(new ye(__,C_,"PUBLIC").setMultipleInstances(!0)),mt(w_,x_,""),mt(w_,x_,"esm2017");var N_=function(){function e(t,n){var r=this;N(this,e),this._delegate=t,this.firebase=n,tt(t,new ye("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return A(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),pt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$e;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){tt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){nt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),D_=(l(k_={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),l(k_,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),k_),A_=new ie("app-compat","Firebase",D_);var P_=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ft(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ue(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:mt,setLogLevel:gt,onLog:yt,apps:null,SDK_VERSION:lt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(rt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw A_.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&K(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ue(n,e=e||$e))throw A_.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(N_);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){K(n,e)},createSubscribe:de,ErrorFactory:ie,deepExtend:K}),n}(),R_=new Ce("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){R_.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var O_=self.firebase.SDK_VERSION;O_&&O_.indexOf("LITE")>=0&&R_.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var L_=P_;!function(e){mt("@firebase/app-compat","0.1.39",e)}();L_.registerVersion("firebase","9.14.0","app-compat");function M_(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Za("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function F_(){if("undefined"===typeof Uint8Array)throw new Za("unimplemented","Uint8Arrays are not available in this environment.")}function U_(){if("undefined"==typeof atob)throw new Za("unimplemented","Blobs are unavailable in Firestore in this environment.")}var j_=function(){function e(t){N(this,e),this._delegate=t}return A(e,[{key:"toBase64",value:function(){return U_(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return F_(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return U_(),new e(Em.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return F_(),new e(Em.fromUint8Array(t))}}]),e}();function V_(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=C(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var B_=function(){function e(){N(this,e)}return A(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Sm(e=Pv(e,ym));var n=gm(e),r=e._freezeSettings(),i=new Ev;return bm(n,i,new Iv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Sm(e=Pv(e,ym));var t=gm(e),n=e._freezeSettings(),r=new Ev;return bm(t,r,new Sv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Za(Ja.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new eo;return e._queue.enqueueAndForgetEvenWhileRestricted(T(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fo.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Fo.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(wh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),z_=function(){function e(t,n,r){var i=this;N(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof du||(this._appCompat=t)}return A(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ga("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Fv(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return wm(this._delegate)}},{key:"disableNetwork",value:function(){return xm(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Cv("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new eo;return e.asyncQueue.enqueueAndForget(T(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Wp,n.next=3,sm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(gm(e=Pv(e,ym)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return By(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Za("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new nI(this,Bv(this._delegate,e))}catch(t){throw Q_(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new G_(this,zv(this._delegate,e))}catch(t){throw Q_(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Z_(this,function(e,t){if(e=Pv(e,Mv),Tv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Za(Ja.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new jv(e,null,function(e){return new cs(go.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Q_(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Pv(e,ym);var r=Object.assign(Object.assign({},Wy),n);return function(e){if(e.maxAttempts<1)throw new Za(Ja.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new eo;return e.asyncQueue.enqueueAndForget(T(S().mark((function i(){var a;return S().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,cm(e);case 2:a=i.sent,new Yv(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(gm(e),(function(n){return t(new Gy(e,n))}),r)}(this._delegate,(function(n){return e(new W_(t,n))}))}},{key:"batch",value:function(){var e=this;return gm(this._delegate),new K_(new Ky(this._delegate,(function(t){return zy(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return _m(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Im(this._delegate,e).then((function(e){return e?new Z_(t,e):null}))}}]),e}(),q_=function(e){O(n,e);var t=U(n);function n(e){var r;return N(this,n),(r=t.call(this)).firestore=e,r}return A(n,[{key:"convertBytes",value:function(e){return new j_(new Em(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return G_.forKey(t,this.firestore,null)}}]),n}(xy);var W_=function(){function e(t,n){N(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new q_(t)}return A(e,[{key:"get",value:function(e){var t=this,n=rI(e);return this._delegate.get(n).then((function(e){return new $_(t._firestore,new Ey(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=rI(e);return n?(M_("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=rI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=rI(e);return this._delegate.delete(t),this}}]),e}(),K_=function(){function e(t){N(this,e),this._delegate=t}return A(e,[{key:"set",value:function(e,t,n){var r=rI(e);return n?(M_("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=rI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=rI(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),H_=function(){function e(t,n,r){N(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return A(e,[{key:"fromFirestore",value:function(e,t){var n=new Ty(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new J_(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new q_(t),n),i.set(n,a)),a}}]),e}();H_.INSTANCES=new WeakMap;var G_=function(){function e(t,n){N(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new q_(t)}return A(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new nI(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new nI(this.firestore,Bv(this._delegate,e))}catch(t){throw Q_(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=me(e))instanceof Uv&&qv(this._delegate,e)}},{key:"set",value:function(e,t){t=M_("DocumentReference.set",t);try{return t?My(this._delegate,e,t):My(this._delegate,e)}catch(n){throw Q_(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Fy(this._delegate,e):Fy.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Q_(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Uy(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Y_(n),a=X_(n,(function(t){return new $_(e.firestore,new Ey(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Vy(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Ry(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Pv(e,Uv);var t=Pv(e.firestore,ym);return hm(gm(t),e._key,{source:"server"}).then((function(n){return qy(t,e,n)}))}(this._delegate):Ay(this._delegate),t.then((function(e){return new $_(n.firestore,new Ey(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(H_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Za("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Uv(n._delegate,r,new wo(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Uv(n._delegate,r,t))}}]),e}();function Q_(e,t,n){return e.message=e.message.replace(t,n),e}function Y_(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!V_(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function X_(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=V_(e[0])?e[0]:V_(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var $_=function(){function e(t,n){N(this,e),this._firestore=t,this._delegate=n}return A(e,[{key:"ref",get:function(){return new G_(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Dy(this._delegate,e._delegate)}}]),e}(),J_=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.apply(this,arguments)}return A(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ya()}(void 0!==t),t}}]),n}($_),Z_=function(){function e(t,n){N(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new q_(t)}return A(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,uy(this._delegate,cy(t,n,r)))}catch(i){throw Q_(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,uy(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=iy("orderBy",e);return new ly(r,n)}(t,n)))}catch(r){throw Q_(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,uy(this._delegate,function(e){return Rv("limit",e),new fy("limit",e,"F")}(t)))}catch(n){throw Q_(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,uy(this._delegate,function(e){return Rv("limitToLast",e),new fy("limitToLast",e,"L")}(t)))}catch(n){throw Q_(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,uy(this._delegate,dy.apply(void 0,arguments)))}catch(t){throw Q_(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,uy(this._delegate,py.apply(void 0,arguments)))}catch(t){throw Q_(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,uy(this._delegate,my.apply(void 0,arguments)))}catch(t){throw Q_(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,uy(this._delegate,yy.apply(void 0,arguments)))}catch(t){throw Q_(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Wv(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Ly(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Pv(e,jv);var t=Pv(e.firestore,ym),n=gm(t),r=new Py(t);return dm(n,e._query,{source:"server"}).then((function(n){return new Cy(t,r,e,n)}))}(this._delegate):Oy(this._delegate),t.then((function(e){return new tI(n.firestore,new Cy(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Y_(n),a=X_(n,(function(t){return new tI(e.firestore,new Cy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Vy(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(H_.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),eI=function(){function e(t,n){N(this,e),this._firestore=t,this._delegate=n}return A(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new J_(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),tI=function(){function e(t,n){N(this,e),this._firestore=t,this._delegate=n}return A(e,[{key:"query",get:function(){return new Z_(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new J_(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new eI(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new J_(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Dy(this._delegate,e._delegate)}}]),e}(),nI=function(e){O(n,e);var t=U(n);function n(e,r){var i;return N(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return A(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new G_(this.firestore,e):null}},{key:"doc",value:function(e){try{return new G_(this.firestore,void 0===e?zv(this._delegate):zv(this._delegate,e))}catch(t){throw Q_(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return jy(this._delegate,e).then((function(e){return new G_(t.firestore,e)}))}},{key:"isEqual",value:function(e){return qv(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(H_.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Z_);function rI(e){return Pv(e,Uv)}var iI,aI=function(){function e(){N(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=j(Tm,n)}return A(e,[{key:"isEqual",value:function(e){return(e=me(e))instanceof Tm&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(bo.keyField().canonicalString())}}]),e}(),oI=function(){function e(t){N(this,e),this._delegate=t}return A(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Vm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Um("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Qy.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Yy.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new qm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),uI={Firestore:z_,GeoPoint:Nm,Timestamp:vo,Blob:j_,Transaction:W_,WriteBatch:K_,DocumentReference:G_,DocumentSnapshot:$_,Query:Z_,QueryDocumentSnapshot:J_,QuerySnapshot:tI,CollectionReference:nI,FieldPath:aI,FieldValue:oI,setLogLevel:function(e){!function(e){qa.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ye("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},uI)))})(iI=L_,(function(e,t){return new z_(e,t,new B_)})),iI.registerVersion("@firebase/firestore-compat","0.2.3");var sI,cI=ft({apiKey:"AIzaSyC5ioWcfIFelAQ3HHO4P-pQe6Vz3l6HEbI",authDomain:"creativeproject-7d8d0.firebaseapp.com",projectId:"creativeproject-7d8d0",storageBucket:"creativeproject-7d8d0.appspot.com",messagingSenderId:"25581315797",appId:"1:25581315797:web:479fdd622e23179deda45c",measurementId:"G-3BD4Y1NVYR"}),lI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht(),t=it(e,"auth");if(t.isInitialized())return t.getImmediate();var n=hg(e,{popupRedirectResolver:Gw,persistence:[Kb,bb,xb]}),r=ee("authTokenSyncURL");if(r){var i=nx(r);vb(n,i,(function(){return i(n.currentUser)})),pb(n,(function(e){return i(e)}))}var a=$("auth");return a&&xk(n,"http://".concat(a)),n}(cI),fI=function(e,t){var n="string"==typeof e?e:t||"(default)",r=it("object"==typeof e?e:ht(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=J("firestore");i&&Fv.apply(void 0,[r].concat(I(i)))}return r}(),hI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht(),t=arguments.length>1?arguments[1]:void 0,n=it(e=me(e),__),r=n.getImmediate({identifier:t}),i=J("storage");return i&&T_.apply(void 0,[r].concat(I(i))),r}(cI);function dI(){return dI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dI.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(sI||(sI={}));var pI,vI="popstate";function mI(e){return{usr:e.state,key:e.key}}function yI(e,t,n,r){return void 0===n&&(n=null),dI({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?kI(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function gI(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function kI(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function bI(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:"unknown://unknown",n="string"===typeof e?e:gI(e);return new URL(n,t)}function wI(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=sI.Pop,f=null;function h(){l=sI.Pop,f&&f({action:l,location:d.location})}var d={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(vI,h),f=e,function(){o.removeEventListener(vI,h),f=null}},createHref:function(e){return t(o,e)},encodeLocation:function(e){var t=bI("string"===typeof e?e:gI(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=sI.Push;var r=yI(d.location,e,t);n&&n(r,e);var i=mI(r),a=d.createHref(r);try{c.pushState(i,"",a)}catch(u){o.location.assign(a)}s&&f&&f({action:l,location:d.location})},replace:function(e,t){l=sI.Replace;var r=yI(d.location,e,t);n&&n(r,e);var i=mI(r),a=d.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:d.location})},go:function(e){return c.go(e)}};return d}function xI(e,t,n){void 0===n&&(n="/");var r=DI(("string"===typeof t?kI(t):t).pathname||"/",n);if(null==r)return null;var i=_I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=TI(i[o],NI(r));return a}function _I(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(AI(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=MI([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(AI(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),_I(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:EI(o,e.index),routesMeta:u})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(pI||(pI={}));var II=/^:\w+$/,SI=function(e){return"*"===e};function EI(e,t){var n=e.split("/"),r=n.length;return n.some(SI)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!SI(e)})).reduce((function(e,t){return e+(II.test(t)?3:""===t?1:10)}),r)}function TI(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=CI({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:MI([i,l.pathname]),pathnameBase:FI(MI([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=MI([i,l.pathnameBase]))}return a}function CI(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);PI("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],c=s.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return PI(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:s,pathnameBase:c,pattern:e}}function NI(e){try{return decodeURI(e)}catch(t){return PI(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function DI(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function AI(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function PI(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function RI(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function OI(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function LI(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=kI(e):(AI(!(i=dI({},e)).pathname||!i.pathname.includes("?"),RI("?","pathname","search",i)),AI(!i.pathname||!i.pathname.includes("#"),RI("#","pathname","hash",i)),AI(!i.search||!i.search.includes("#"),RI("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?kI(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:UI(a),hash:jI(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var MI=function(e){return e.join("/").replace(/\/\/+/g,"/")},FI=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},UI=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},jI=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},VI=function(e){O(n,e);var t=U(n);function n(){return N(this,n),t.apply(this,arguments)}return A(n)}(V(Error));var BI=A((function e(t,n,r,i){N(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function zI(e){return e instanceof BI}var qI=["post","put","patch","delete"],WI=(new Set(qI),["get"].concat(qI));new Set(WI),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;function KI(){return KI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KI.apply(this,arguments)}var HI="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},GI=t.useState,QI=t.useEffect,YI=t.useLayoutEffect,XI=t.useDebugValue;function $I(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!HI(n,r)}catch(i){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,r.useSyncExternalStore;var JI=t.createContext(null);var ZI=t.createContext(null);var eS=t.createContext(null);var tS=t.createContext(null);var nS=t.createContext(null);var rS=t.createContext(null);var iS=t.createContext({outlet:null,matches:[]});var aS=t.createContext(null);function oS(){return null!=t.useContext(rS)}function uS(){return oS()||AI(!1),t.useContext(rS).location}function sS(){oS()||AI(!1);var e=t.useContext(nS),n=e.basename,r=e.navigator,i=t.useContext(iS).matches,a=uS().pathname,o=JSON.stringify(OI(i).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);t.useEffect((function(){u.current=!0}));var s=t.useCallback((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=LI(e,JSON.parse(o),a,"path"===t.relative);"/"!==n&&(i.pathname="/"===i.pathname?n:MI([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state,t)}else r.go(e)}),[n,r,o,a]);return s}function cS(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(iS).matches,a=uS().pathname,o=JSON.stringify(OI(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return LI(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function lS(){var e=function(){var e,n=t.useContext(aS),r=mS(hS.UseRouteError),i=t.useContext(iS),a=i.matches[i.matches.length-1];if(n)return n;return i||AI(!1),!a.route.id&&AI(!1),null==(e=r.errors)?void 0:e[a.route.id]}(),n=zI(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unhandled Thrown Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",t.createElement("code",{style:o},"errorElement")," props on\xa0",t.createElement("code",{style:o},"<Route>")))}var fS,hS,dS=function(e){O(r,e);var n=U(r);function r(e){var t;return N(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return A(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(aS.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(t.Component);function pS(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(JI);return a&&r.route.errorElement&&(a._deepestRenderedBoundaryId=r.route.id),t.createElement(iS.Provider,{value:n},i)}function vS(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}var i=e,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||AI(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=r?o.route.errorElement||t.createElement(lS,null):null,l=function(){return t.createElement(pS,{match:o,routeContext:{outlet:e,matches:n.concat(i.slice(0,u+1))}},s?c:void 0!==o.route.element?o.route.element:e)};return r&&(o.route.errorElement||0===u)?t.createElement(dS,{location:r.location,component:c,error:s,children:l()}):l()}),null)}function mS(e){var n=t.useContext(eS);return n||AI(!1),n}!function(e){e.UseRevalidator="useRevalidator"}(fS||(fS={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(hS||(hS={}));var yS;function gS(e){AI(!1)}function kS(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?sI.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;oS()&&AI(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=kI(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,I=void 0===_?"default":_,S=t.useMemo((function(){var e=DI(m,h);return null==e?null:{pathname:e,search:g,hash:b,state:x,key:I}}),[h,m,g,b,x,I]);return null==S?null:t.createElement(nS.Provider,{value:d},t.createElement(rS.Provider,{children:a,value:{location:S,navigationType:s}}))}function bS(e){var n=e.children,r=e.location,i=t.useContext(ZI);return function(e,n){oS()||AI(!1);var r,i=t.useContext(nS).navigator,a=t.useContext(eS),o=t.useContext(iS).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,uS());if(n){var f,h="string"===typeof n?kI(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||AI(!1),r=h}else r=l;var d=r.pathname||"/",p=xI(e,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=vS(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:MI([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:MI([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,a||void 0);return n&&v?t.createElement(rS.Provider,{value:{location:KI({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:sI.Pop}},v):v}(i&&!n?i.router.routes:xS(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(yS||(yS={}));var wS=new Promise((function(){}));t.Component;function xS(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e))if(e.type!==t.Fragment){e.type!==gS&&AI(!1),e.props.index&&e.props.children&&AI(!1);var a=[].concat(I(n),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=xS(e.props.children,a)),r.push(o)}else r.push.apply(r,xS(e.props.children,n))})),r}function _S(){return _S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_S.apply(this,arguments)}function IS(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var SS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function ES(e){var n=e.basename,r=e.children,i=e.window,a=t.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),wI((function(e,t){var n=e.location;return yI("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:gI(t)}),null,e)}({window:i,v5Compat:!0}));var o=a.current,s=u(t.useState({action:o.action,location:o.location}),2),c=s[0],l=s[1];return t.useLayoutEffect((function(){return o.listen(l)}),[o]),t.createElement(kS,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:o})}var TS=t.forwardRef((function(e,n){var r=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,u=e.state,s=e.target,c=e.to,l=e.preventScrollReset,f=IS(e,SS),h=function(e,n){var r=(void 0===n?{}:n).relative;oS()||AI(!1);var i=t.useContext(nS),a=i.basename,o=i.navigator,u=cS(e,{relative:r}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:MI([a,c])),o.createHref({pathname:f,search:l,hash:s})}(c,{relative:i}),d=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=r.preventScrollReset,s=r.relative,c=sS(),l=uS(),f=cS(e,{relative:s});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:gI(l)===gI(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(c,{replace:o,state:u,target:s,preventScrollReset:l,relative:i});return t.createElement("a",_S({},f,{href:h,onClick:a?r:function(e){r&&r(e),e.defaultPrevented||d(e)},ref:n,target:s}))}));var CS,NS;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(CS||(CS={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(NS||(NS={}));var DS=n.p+"static/media/tweeter-big.ea43dfac47fb34984303.png",AS=t.createContext();function PS(){return(0,t.useContext)(AS)}function RS(e){var n=e.children,r=u((0,t.useState)(),2),i=r[0],a=r[1],o=u((0,t.useState)(!0),2),s=o[0],c=o[1],l=u((0,t.useState)(),2),f=l[0],h=l[1];function d(){return(d=T(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={userid:t,username:n,bio:"Nothing yet",followers:[],following:[],profileImgUrl:"https://firebasestorage.googleapis.com/v0/b/creativeproject-7d8d0.appspot.com/o/Default_pfp.svg.png?alt=media&token=d1675b8c-8105-4e83-872f-be5e5e35662c",verified:!1},e.next=4,My(zv(fI,"profiles",t),r);case 4:localStorage.setItem("currentUserInfo",JSON.stringify(r)),h(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}(0,t.useEffect)((function(){return lI.onAuthStateChanged((function(e){a(e),c(!1);Vy(zv(fI,"profiles",e.uid),(function(e){var t=e.metadata.hasPendingWrites?"Local":"Server";console.log(t," data: ",e.data());var n=e.data();h(n),localStorage.setItem("currentUserInfo",JSON.stringify(e.data()))}))}))}),[]);var p={currentUser:i,userInfo:f,login:function(e,t){return function(e,t,n){return fb(me(e),Hk.credential(t,n))}(lI,e,t)},signup:function(e,t){return function(e,t,n){return db.apply(this,arguments)}(lI,e,t)},logout:function(){return function(e){return me(e).signOut()}(lI)},createUser:function(e,t){return d.apply(this,arguments)},updateEmail:function(e){return i.updateEmail(e)},updatePassword:function(e){return i.updatePassword(e)}};return(0,y.jsx)(AS.Provider,{value:p,children:!s&&n})}function OS(e){var t=e.comment,n=JSON.parse(localStorage.getItem(t.commentorid+"Data"));return console.log("stupid",n),(0,y.jsxs)("div",{children:[(0,y.jsx)("img",{src:n.profileImgUrl,style:{width:"30px",height:"30px"}}),(0,y.jsxs)("p",{children:["User: ",n.username]}),(0,y.jsx)("br",{}),(0,y.jsx)("h5",{children:t.content}),(0,y.jsx)("br",{})]})}function LS(e){var t=e.comments;return null==t?(0,y.jsx)("div",{children:"No comments yet"}):t.map((function(e){return(0,y.jsx)(OS,{comment:e},e.id)}))}function MS(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function FS(e){return FS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FS(e)}function US(e){return MS(1,arguments),e instanceof Date||"object"===FS(e)&&"[object Date]"===Object.prototype.toString.call(e)}function jS(e){return jS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jS(e)}function VS(e){MS(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===jS(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function BS(e){if(MS(1,arguments),!US(e)&&"number"!==typeof e)return!1;var t=VS(e);return!isNaN(Number(t))}function zS(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function qS(e,t){MS(2,arguments);var n=VS(e).getTime(),r=zS(t);return new Date(n+r)}function WS(e,t){MS(2,arguments);var n=zS(t);return qS(e,-n)}var KS=864e5;function HS(e){MS(1,arguments);var t=1,n=VS(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function GS(e){MS(1,arguments);var t=VS(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=HS(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=HS(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function QS(e){MS(1,arguments);var t=GS(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=HS(n);return r}var YS=6048e5;var XS={};function $S(){return XS}function JS(e,t){var n,r,i,a,o,u,s,c;MS(1,arguments);var l=$S(),f=zS(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(u=o.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==i?i:l.weekStartsOn)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(c=s.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=VS(e),d=h.getUTCDay(),p=(d<f?7:0)+d-f;return h.setUTCDate(h.getUTCDate()-p),h.setUTCHours(0,0,0,0),h}function ZS(e,t){var n,r,i,a,o,u,s,c;MS(1,arguments);var l=VS(e),f=l.getUTCFullYear(),h=$S(),d=zS(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(u=o.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==i?i:h.firstWeekContainsDate)&&void 0!==r?r:null===(s=h.locale)||void 0===s||null===(c=s.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(f+1,0,d),p.setUTCHours(0,0,0,0);var v=JS(p,t),m=new Date(0);m.setUTCFullYear(f,0,d),m.setUTCHours(0,0,0,0);var y=JS(m,t);return l.getTime()>=v.getTime()?f+1:l.getTime()>=y.getTime()?f:f-1}function eE(e,t){var n,r,i,a,o,u,s,c;MS(1,arguments);var l=$S(),f=zS(null!==(n=null!==(r=null!==(i=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(o=t.locale)||void 0===o||null===(u=o.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==i?i:l.firstWeekContainsDate)&&void 0!==r?r:null===(s=l.locale)||void 0===s||null===(c=s.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),h=ZS(e,t),d=new Date(0);d.setUTCFullYear(h,0,f),d.setUTCHours(0,0,0,0);var p=JS(d,t);return p}var tE=6048e5;function nE(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var rE={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return nE("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):nE(n+1,2)},d:function(e,t){return nE(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return nE(e.getUTCHours()%12||12,t.length)},H:function(e,t){return nE(e.getUTCHours(),t.length)},m:function(e,t){return nE(e.getUTCMinutes(),t.length)},s:function(e,t){return nE(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return nE(Math.floor(r*Math.pow(10,n-3)),t.length)}},iE="midnight",aE="noon",oE="morning",uE="afternoon",sE="evening",cE="night",lE={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return rE.y(e,t)},Y:function(e,t,n,r){var i=ZS(e,r),a=i>0?i:1-i;return"YY"===t?nE(a%100,2):"Yo"===t?n.ordinalNumber(a,{unit:"year"}):nE(a,t.length)},R:function(e,t){return nE(GS(e),t.length)},u:function(e,t){return nE(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return nE(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return nE(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return rE.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return nE(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=function(e,t){MS(1,arguments);var n=VS(e),r=JS(n,t).getTime()-eE(n,t).getTime();return Math.round(r/tE)+1}(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):nE(i,t.length)},I:function(e,t,n){var r=function(e){MS(1,arguments);var t=VS(e),n=HS(t).getTime()-QS(t).getTime();return Math.round(n/YS)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):nE(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):rE.d(e,t)},D:function(e,t,n){var r=function(e){MS(1,arguments);var t=VS(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=n-r;return Math.floor(i/KS)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):nE(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return nE(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return nE(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return nE(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?aE:0===i?iE:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?sE:i>=12?uE:i>=4?oE:cE,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return rE.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):rE.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):nE(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):nE(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):rE.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):rE.s(e,t)},S:function(e,t){return rE.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return hE(i);case"XXXX":case"XX":return dE(i);default:return dE(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return hE(i);case"xxxx":case"xx":return dE(i);default:return dE(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+fE(i,":");default:return"GMT"+dE(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+fE(i,":");default:return"GMT"+dE(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return nE(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return nE((r._originalDate||e).getTime(),t.length)}};function fE(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;if(0===a)return n+String(i);var o=t||"";return n+String(i)+o+nE(a,2)}function hE(e,t){return e%60===0?(e>0?"-":"+")+nE(Math.abs(e)/60,2):dE(e,t)}function dE(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+nE(Math.floor(i/60),2)+n+nE(i%60,2)}var pE=lE,vE=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},mE=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},yE={p:mE,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return vE(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",vE(i,t)).replace("{{time}}",mE(a,t))}},gE=yE;function kE(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var bE=["D","DD"],wE=["YY","YYYY"];function xE(e){return-1!==bE.indexOf(e)}function _E(e){return-1!==wE.indexOf(e)}function IE(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var SE={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},EE=function(e,t,n){var r,i=SE[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function TE(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var CE={date:TE({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:TE({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:TE({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},NE={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},DE=function(e,t,n,r){return NE[e]};function AE(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,a=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[a]||e.formattingValues[i]}else{var o=e.defaultWidth,u=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[u]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var PE={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:AE({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:AE({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:AE({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:AE({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:AE({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function RE(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;var o,u=a[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(s)?LE(s,(function(e){return e.test(u)})):OE(s,(function(e){return e.test(u)}));o=e.valueCallback?e.valueCallback(c):c,o=n.valueCallback?n.valueCallback(o):o;var l=t.slice(u.length);return{value:o,rest:l}}}function OE(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function LE(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var ME,FE,UE={ordinalNumber:(ME={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(ME.matchPattern);if(!n)return null;var r=n[0],i=e.match(ME.parsePattern);if(!i)return null;var a=ME.valueCallback?ME.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;var o=e.slice(r.length);return{value:a,rest:o}}),era:RE({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:RE({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:RE({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:RE({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:RE({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},jE={code:"en-US",formatDistance:EE,formatLong:CE,formatRelative:DE,localize:PE,match:UE,options:{weekStartsOn:0,firstWeekContainsDate:1}},VE=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,BE=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zE=/^'([^]*?)'?$/,qE=/''/g,WE=/[a-zA-Z]/;function KE(e){var t=e.match(zE);return t?t[1].replace(qE,"'"):e}function HE(e){var n=e.tweet,r=e.likeTweet,i=e.commentTweet,a=e.followUser,o=e.deleteTweet,u=PS(),s=u.currentUser,c=(u.userInfo,uy(Bv(fI,"comments"),cy("tweetid","==",n.id))),l=JSON.parse(localStorage.getItem(n.authorid+"Data"));console.log("bye",l);var f=function(e,t,n){var r,i,a,o,u,s,c,l,f,h,d,p,v,m,y,g,k,b;MS(2,arguments);var w=String(t),x=$S(),_=null!==(r=null!==(i=null===n||void 0===n?void 0:n.locale)&&void 0!==i?i:x.locale)&&void 0!==r?r:jE,I=zS(null!==(a=null!==(o=null!==(u=null!==(s=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==s?s:null===n||void 0===n||null===(c=n.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==u?u:x.firstWeekContainsDate)&&void 0!==o?o:null===(f=x.locale)||void 0===f||null===(h=f.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==a?a:1);if(!(I>=1&&I<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=zS(null!==(d=null!==(p=null!==(v=null!==(m=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==m?m:null===n||void 0===n||null===(y=n.locale)||void 0===y||null===(g=y.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==v?v:x.weekStartsOn)&&void 0!==p?p:null===(k=x.locale)||void 0===k||null===(b=k.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==d?d:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!_.localize)throw new RangeError("locale must contain localize property");if(!_.formatLong)throw new RangeError("locale must contain formatLong property");var E=VS(e);if(!BS(E))throw new RangeError("Invalid time value");var T=kE(E),C=WS(E,T),N={firstWeekContainsDate:I,weekStartsOn:S,locale:_,_originalDate:E},D=w.match(BE).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,gE[t])(e,_.formatLong):e})).join("").match(VE).map((function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return KE(r);var a=pE[i];if(a)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!_E(r)||IE(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!xE(r)||IE(r,t,String(e)),a(C,r,_.localize,N);if(i.match(WE))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r})).join("");return D}(n.createTime.seconds,"MMMM do, yyyy H:mma"),h=(0,t.useRef)();function d(e){r(n.id)}function p(e){i(n.id,h.current.value)}function v(e){a(n.authorid)}function m(e){o(n.id)}return(0,t.useEffect)((function(){var e=Vy(c,(function(t){var r=[];return t.forEach((function(e){var t=e.data();t.id=e.id,r.push(t)})),localStorage.setItem("comment"+n.id,""),localStorage.setItem("comment"+n.id,JSON.stringify(r)),console.log(r),e}))}),[]),null!=n.image&&""!=n.image?(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("img",{src:l.profileImgUrl,style:{height:"20px",width:"20px"}}),(0,y.jsxs)("p",{children:["User: ",l.username]}),(0,y.jsxs)("div",{hidden:!l.verified,children:[(0,y.jsx)("img",{src:DS,alt:"logo",style:{height:"20px",width:"20px"}}),(0,y.jsx)("p",{children:"Verified"})]}),(0,y.jsx)("div",{hidden:l.verified,children:(0,y.jsx)("p",{children:"Not Verified"})}),(0,y.jsx)("button",{onClick:v,children:"Follow"}),(0,y.jsxs)("p",{children:["Time Posted: ",f]})]}),(0,y.jsx)("button",{hidden:n.authorid!=s.uid,onClick:m,children:"Delete Tweet"}),(0,y.jsx)("h3",{children:n.content}),(0,y.jsx)("br",{}),(0,y.jsx)("img",{src:n.image,style:{width:"50%",height:"auto"}}),(0,y.jsx)("br",{}),(0,y.jsx)("div",{}),(0,y.jsx)("label",{children:"Comment:"}),(0,y.jsx)("input",{type:"text",ref:h,placeholder:"Comment something nice"}),(0,y.jsx)("button",{onClick:p,children:"Comment"}),(0,y.jsx)("br",{}),(0,y.jsxs)("label",{children:[n.likes.length," Likes"]}),(0,y.jsx)("button",{onClick:d,children:"Like"}),(0,y.jsx)("br",{}),(0,y.jsx)("p",{children:"Current Comments"}),(0,y.jsx)(LS,{comments:JSON.parse(localStorage.getItem("comment"+n.id))})]}):(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("img",{src:l.profileImgUrl,style:{height:"20px",width:"20px"}}),(0,y.jsxs)("p",{children:["User: ",l.username]}),(0,y.jsxs)("div",{hidden:!l.verified,children:[(0,y.jsx)("img",{src:DS,alt:"logo",style:{height:"20px",width:"20px"}}),(0,y.jsx)("p",{children:"Verified"})]}),(0,y.jsx)("div",{hidden:l.verified,children:(0,y.jsx)("p",{children:"Not Verified"})}),(0,y.jsx)("button",{onClick:v,children:"Follow"}),(0,y.jsxs)("p",{children:["Time Posted: ",f]})]}),(0,y.jsx)("button",{hidden:n.authorid!=s.uid,onClick:m,children:"Delete Tweet"}),(0,y.jsx)("br",{}),(0,y.jsx)("h3",{children:n.content}),(0,y.jsx)("div",{}),(0,y.jsx)("label",{children:"Comment:"}),(0,y.jsx)("input",{type:"text",ref:h,placeholder:"Comment something nice"}),(0,y.jsx)("button",{onClick:p,children:"Comment"}),(0,y.jsx)("br",{}),(0,y.jsxs)("label",{children:[n.likes.length," Likes"]}),(0,y.jsx)("button",{onClick:d,children:"Like"}),(0,y.jsx)("br",{}),(0,y.jsx)("p",{children:"Current Comments"}),(0,y.jsx)(LS,{comments:JSON.parse(localStorage.getItem("comment"+n.id))})]})}function GE(e){var t=e.tweets,n=e.likeTweet,r=e.commentTweet,i=e.followUser,a=e.deleteTweet;return null!=t&&0!=t.length?t.map((function(e){return(0,y.jsx)(HE,{likeTweet:n,tweet:e,commentTweet:r,followUser:i,deleteTweet:a},e.id)})):(0,y.jsx)("div",{children:"No Tweets Yet"})}var QE=new Uint8Array(16);function YE(){if(!FE&&!(FE="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return FE(QE)}var XE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var $E=function(e){return"string"===typeof e&&XE.test(e)},JE=[],ZE=0;ZE<256;++ZE)JE.push((ZE+256).toString(16).substr(1));var eT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(JE[e[t+0]]+JE[e[t+1]]+JE[e[t+2]]+JE[e[t+3]]+"-"+JE[e[t+4]]+JE[e[t+5]]+"-"+JE[e[t+6]]+JE[e[t+7]]+"-"+JE[e[t+8]]+JE[e[t+9]]+"-"+JE[e[t+10]]+JE[e[t+11]]+JE[e[t+12]]+JE[e[t+13]]+JE[e[t+14]]+JE[e[t+15]]).toLowerCase();if(!$E(n))throw TypeError("Stringified UUID is invalid");return n};var tT=function(e,t,n){var r=(e=e||{}).random||(e.rng||YE)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return eT(r)},nT=function(e){console.log(e);sS();var n=(0,t.useRef)(),r=PS(),i=r.currentUser,a=r.userInfo;console.log(a);var o=u((0,t.useState)(null),2),s=o[0],c=o[1];function l(){return l=T(S().mark((function e(t){var r,o,u;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,null!=s){e.next=10;break}return r={authorid:i.uid,authorProfile:a.profileImgUrl,verified:a.verified,username:a.username,content:n.current.value,createTime:new Date,image:"",likes:[]},e.next=6,jy(Bv(fI,"tweets"),r);case 6:o=e.sent,console.log("Document written with ID: ",o.id),e.next=12;break;case 10:I_(E_(hI,"tweets/".concat(s.name+tT())),s).then((function(e){S_(e.ref).then(function(){var e=T(S().mark((function e(t){var r,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("image url",t),r={authorid:i.uid,authorProfile:a.profileImgUrl,verified:a.verified,username:a.username,content:n.current.value,createTime:new Date,image:t,likes:[]},e.next=4,jy(Bv(fI,"tweets"),r);case 4:o=e.sent,console.log("Document written with ID: ",o.id);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 12:return u=setTimeout((function(){return window.location.reload()}),2e3),e.abrupt("return",(function(){return clearTimeout(u)}));case 16:e.prev=16,e.t0=e.catch(1),console.error("Error adding document: ",e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])}))),l.apply(this,arguments)}function f(){return(f=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Uy(zv(fI,"tweets",t));case 3:console.log("deleted tweet",t),window.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error deleting tweet",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function h(){return(h=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=zv(fI,"tweets",t),e.next=4,Fy(n,{likes:Qy(i.uid)});case 4:console.log("liked tweet",t),window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error liking tweet",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function d(){return(d=T(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=zv(fI,"profiles",t),r=zv(fI,"profiles",i.uid),e.next=5,Fy(n,{followers:Qy(i.uid)});case 5:return e.next=7,Fy(r,{following:Qy(t)});case 7:return e.next=9,Fy();case 9:console.log(i.uid+"followed User "+t),window.location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error following user",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function p(){return(p=T(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jy(Bv(fI,"comments"),{commentorid:i.uid,username:a.username,tweetid:t,content:n,createTime:new Date,likes:[]});case 3:r=e.sent,window.location.reload(),console.log("Tweet comment written with ID: ",r.id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return e=e.tweets,(0,y.jsxs)("div",{className:"HomeScreen",children:[(0,y.jsxs)("div",{className:"SideBar",children:[(0,y.jsx)("div",{className:"homeLogo",children:(0,y.jsx)("img",{src:DS,alt:"logo"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{style:{textDecoration:"none"},to:"/home",className:"home",children:"Home"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{style:{textDecoration:"none"},to:"/profile",children:"Profile"})})]}),(0,y.jsxs)("div",{className:"MainHeader",children:[(0,y.jsx)("h1",{children:"Home"}),(0,y.jsxs)("div",{className:"tweetSomething",children:[(0,y.jsx)("label",{class:"TweetSomethingLabel",children:"Post a Tweet!"}),(0,y.jsx)("br",{}),(0,y.jsx)("input",{className:"TweetContent",placeholder:"Tweet Something",type:"text",ref:n}),(0,y.jsx)("input",{type:"file",onChange:function(e){c(e.target.files[0])},style:{width:"50%"}}),(0,y.jsx)("br",{}),(0,y.jsx)("button",{className:"pushTweet",onClick:function(e){return l.apply(this,arguments)},children:"Tweet"})]})]}),(0,y.jsx)("div",{className:"Mainfeed",children:(0,y.jsx)(GE,{tweets:e,likeTweet:function(e){return h.apply(this,arguments)},commentTweet:function(e,t){return p.apply(this,arguments)},followUser:function(e){return d.apply(this,arguments)},deleteTweet:function(e){return f.apply(this,arguments)}})})]})},rT=/-(.)/g;var iT=["className","bsPrefix","as"],aT=function(e){return e[0].toUpperCase()+(t=e,t.replace(rT,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function oT(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?aT(e):r,a=n.Component,o=n.defaultProps,u=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,o=t.as,u=void 0===o?a||"div":o,s=p(t,iT),c=b(i,e);return(0,y.jsx)(u,h({ref:n,className:m()(r,c)},s))}));return u.defaultProps=o,u.displayName=i,u}var uT=function(e){return t.forwardRef((function(t,n){return(0,y.jsx)("div",h(h({},t),{},{ref:n,className:m()(t.className,e)}))}))},sT=["bsPrefix","className","variant","as"],cT=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.variant,a=e.as,o=void 0===a?"img":a,u=p(e,sT),s=b(n,"card-img");return(0,y.jsx)(o,h({ref:t,className:m()(i?"".concat(s,"-").concat(i):s,r)},u))}));cT.displayName="CardImg";var lT=cT,fT=t.createContext(null);fT.displayName="CardHeaderContext";var hT=fT,dT=["bsPrefix","className","as"],pT=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.as,o=void 0===a?"div":a,u=p(e,dT),s=b(r,"card-header"),c=(0,t.useMemo)((function(){return{cardHeaderBsPrefix:s}}),[s]);return(0,y.jsx)(hT.Provider,{value:c,children:(0,y.jsx)(o,h(h({ref:n},u),{},{className:m()(i,s)}))})}));pT.displayName="CardHeader";var vT=pT,mT=["bsPrefix","className","bg","text","border","body","children","as"],yT=uT("h5"),gT=uT("h6"),kT=oT("card-body"),bT=oT("card-title",{Component:yT}),wT=oT("card-subtitle",{Component:gT}),xT=oT("card-link",{Component:"a"}),_T=oT("card-text",{Component:"p"}),IT=oT("card-footer"),ST=oT("card-img-overlay"),ET=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.bg,a=e.text,o=e.border,u=e.body,s=e.children,c=e.as,l=void 0===c?"div":c,f=p(e,mT),d=b(n,"card");return(0,y.jsx)(l,h(h({ref:t},f),{},{className:m()(r,d,i&&"bg-".concat(i),a&&"text-".concat(a),o&&"border-".concat(o)),children:u?(0,y.jsx)(kT,{children:s}):s}))}));ET.displayName="Card",ET.defaultProps={body:!1};var TT=Object.assign(ET,{Img:lT,Title:bT,Subtitle:wT,Body:kT,Link:xT,Text:_T,Header:vT,Footer:IT,ImgOverlay:ST});function CT(){return CT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CT.apply(this,arguments)}n(176);function NT(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function DT(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function AT(e,n){return Object.keys(n).reduce((function(r,i){var a,o=r,u=o[NT(i)],s=o[i],c=d(o,[NT(i),i].map(DT)),l=n[i],f=function(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],u=a[1],s=void 0!==e,c=i.current;return i.current=s,!s&&c&&o!==n&&u(n),[s?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),u(e)}),[r])]}(s,u,e[l]),h=f[0],p=f[1];return CT({},c,((a={})[i]=h,a[l]=p,a))}),e)}function PT(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function RT(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function OT(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}PT.__suppressDeprecationWarning=!0,RT.__suppressDeprecationWarning=!0,OT.__suppressDeprecationWarning=!0;var LT=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function MT(e){var n=LT(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var FT="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;"undefined"!==typeof document||FT?t.useLayoutEffect:t.useEffect,new WeakMap;var UT=["as","disabled"];function jT(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.role,u=e.onClick,s=e.tabIndex,c=void 0===s?0:s,l=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var f={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},f];var h=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==u||u(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:h,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),h(e))}},f]}var VT=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,UT),a=u(jT(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],s=a[1].tagName;return(0,y.jsx)(s,Object.assign({},i,o,{ref:t}))}));VT.displayName="Button";var BT=["onKeyDown"];var zT=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,BT),a=u(jT(Object.assign({tagName:"a"},i)),1)[0],o=MT((function(e){a.onKeyDown(e),null==r||r(e)}));return(n=i.href)&&"#"!==n.trim()&&"button"!==i.role?(0,y.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,y.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));zT.displayName="Anchor";var qT=zT;var WT=n(164),KT=!1,HT=t.createContext(null),GT="unmounted",QT="exited",YT="entering",XT="entered",$T="exiting",JT=function(e){var n,r;function i(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=QT,r.appearStatus=YT):i=XT:i=t.unmountOnExit||t.mountOnEnter?GT:QT,r.state={status:i},r.nextCallback=null,r}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,R(n,r),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===GT?{status:QT}:null};var a=i.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==YT&&n!==XT&&(t=YT):n!==YT&&n!==XT||(t=$T)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===YT){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:WT.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===QT&&this.setState({status:GT})},a.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[WT.findDOMNode(this),r],a=i[0],o=i[1],u=this.getTimeouts(),s=r?u.appear:u.enter;!e&&!n||KT?this.safeSetState({status:XT},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:YT},(function(){t.props.onEntering(a,o),t.onTransitionEnd(s,(function(){t.safeSetState({status:XT},(function(){t.props.onEntered(a,o)}))}))})))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:WT.findDOMNode(this);t&&!KT?(this.props.onExit(r),this.safeSetState({status:$T},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:QT},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:QT},(function(){e.props.onExited(r)}))},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:WT.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var e=this.state.status;if(e===GT)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,d(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(HT.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},i}(t.Component);function ZT(){}JT.contextType=HT,JT.propTypes={},JT.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ZT,onEntering:ZT,onEntered:ZT,onExit:ZT,onExiting:ZT,onExited:ZT},JT.UNMOUNTED=GT,JT.EXITED=QT,JT.ENTERING=YT,JT.ENTERED=XT,JT.EXITING=$T;var eC=JT;function tC(e){var t=function(e){return e&&e.ownerDocument||document}(e);return t&&t.defaultView||window}var nC=/([A-Z])/g;var rC=/^ms-/;function iC(e){return function(e){return e.replace(nC,"-$1").toLowerCase()}(e).replace(rC,"-ms-")}var aC=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var oC=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(iC(t))||function(e,t){return tC(e).getComputedStyle(e,t)}(e).getPropertyValue(iC(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!aC.test(e))}(i)?n+=iC(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(iC(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},uC=!("undefined"===typeof window||!window.document||!window.document.createElement),sC=!1,cC=!1;try{var lC={get passive(){return sC=!0},get once(){return cC=sC=!0}};uC&&(window.addEventListener("test",lC,lC),window.removeEventListener("test",lC,!0))}catch(YN){}var fC=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!cC){var i=r.once,a=r.capture,o=n;!cC&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,sC?r:a)}e.addEventListener(t,n,r)};var hC=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var dC=function(e,t,n,r){return fC(e,t,n,r),function(){hC(e,t,n,r)}};function pC(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=dC(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function vC(e,t,n,r){null==n&&(n=function(e){var t=oC(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=pC(e,n,r),a=dC(e,"transitionend",t);return function(){i(),a()}}function mC(e,t){var n=oC(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function yC(e,t){var n=mC(e,"transitionDuration"),r=mC(e,"transitionDelay"),i=vC(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var gC=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var kC=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=gC(e),r=gC(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};var bC,wC=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],xC=t.forwardRef((function(e,n){var r=e.onEnter,i=e.onEntering,a=e.onEntered,o=e.onExit,u=e.onExiting,s=e.onExited,c=e.addEndListener,l=e.children,f=e.childRef,d=p(e,wC),v=(0,t.useRef)(null),m=kC(v,f),g=function(e){var t;m((t=e)&&"setState"in t?WT.findDOMNode(t):null!=t?t:null)},k=function(e){return function(t){e&&v.current&&e(v.current,t)}},b=(0,t.useCallback)(k(r),[r]),w=(0,t.useCallback)(k(i),[i]),x=(0,t.useCallback)(k(a),[a]),_=(0,t.useCallback)(k(o),[o]),I=(0,t.useCallback)(k(u),[u]),S=(0,t.useCallback)(k(s),[s]),E=(0,t.useCallback)(k(c),[c]);return(0,y.jsx)(eC,h(h({ref:n},d),{},{onEnter:b,onEntered:x,onEntering:w,onExit:_,onExited:S,onExiting:I,addEndListener:E,nodeRef:v,children:"function"===typeof l?function(e,t){return l(e,h(h({},t),{},{ref:g}))}:t.cloneElement(l,{ref:g})}))})),_C=xC,IC=["className","children","transitionClasses"],SC=(l(bC={},YT,"show"),l(bC,XT,"show"),bC),EC=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,u=p(e,IC),s=(0,t.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==u.onEnter||u.onEnter(e,t)}),[u]);return(0,y.jsx)(_C,h(h({ref:n,addEndListener:yC},u),{},{onEnter:s,childRef:i.ref,children:function(e,n){return t.cloneElement(i,h(h({},n),{},{className:m()("fade",r,i.props.className,SC[e],o[e])}))}}))}));EC.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},EC.displayName="Fade";var TC=EC,CC=n(7),NC=n.n(CC),DC=["className","variant"],AC={"aria-label":NC().string,onClick:NC().func,variant:NC().oneOf(["white"])},PC=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=p(e,DC);return(0,y.jsx)("button",h({ref:t,type:"button",className:m()("btn-close",r&&"btn-close-".concat(r),n)},i))}));PC.displayName="CloseButton",PC.propTypes=AC,PC.defaultProps={"aria-label":"Close"};var RC=PC,OC=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],LC=uT("h4");LC.displayName="DivStyledAsH4";var MC=oT("alert-heading",{Component:LC}),FC=oT("alert-link",{Component:qT}),UC={variant:"primary",show:!0,transition:TC,closeLabel:"Close alert"},jC=t.forwardRef((function(e,t){var n=AT(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,a=n.closeLabel,o=n.closeVariant,u=n.className,s=n.children,c=n.variant,l=n.onClose,f=n.dismissible,d=n.transition,v=p(n,OC),g=b(r,"alert"),k=MT((function(e){l&&l(!1,e)})),w=!0===d?TC:d,x=(0,y.jsxs)("div",h(h({role:"alert"},w?void 0:v),{},{ref:t,className:m()(u,g,c&&"".concat(g,"-").concat(c),f&&"".concat(g,"-dismissible")),children:[f&&(0,y.jsx)(RC,{onClick:k,"aria-label":a,variant:o}),s]}));return w?(0,y.jsx)(w,h(h({unmountOnExit:!0},v),{},{ref:void 0,in:i,children:x})):i?x:null}));jC.displayName="Alert",jC.defaultProps=UC;var VC=Object.assign(jC,{Link:FC,Heading:MC}),BC=["as","className","type","tooltip"],zC={type:NC().string,tooltip:NC().bool,as:NC().elementType},qC=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,o=void 0===a?"valid":a,u=e.tooltip,s=void 0!==u&&u,c=p(e,BC);return(0,y.jsx)(r,h(h({},c),{},{ref:t,className:m()(i,"".concat(o,"-").concat(s?"tooltip":"feedback"))}))}));qC.displayName="Feedback",qC.propTypes=zC;var WC=qC,KC=t.createContext({}),HC=["id","bsPrefix","className","type","isValid","isInvalid","as"],GC=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.className,o=e.type,u=void 0===o?"checkbox":o,s=e.isValid,c=void 0!==s&&s,l=e.isInvalid,f=void 0!==l&&l,d=e.as,v=void 0===d?"input":d,g=p(e,HC),k=(0,t.useContext)(KC).controlId;return i=b(i,"form-check-input"),(0,y.jsx)(v,h(h({},g),{},{ref:n,type:u,id:r||k,className:m()(a,i,c&&"is-valid",f&&"is-invalid")}))}));GC.displayName="FormCheckInput";var QC=GC,YC=["bsPrefix","className","htmlFor"],XC=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.htmlFor,o=p(e,YC),u=(0,t.useContext)(KC).controlId;return r=b(r,"form-check-label"),(0,y.jsx)("label",h(h({},o),{},{ref:n,htmlFor:a||u,className:m()(i,r)}))}));XC.displayName="FormCheckLabel";var $C=XC;var JC=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],ZC=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,o=e.inline,u=void 0!==o&&o,s=e.reverse,c=void 0!==s&&s,l=e.disabled,f=void 0!==l&&l,d=e.isValid,v=void 0!==d&&d,g=e.isInvalid,k=void 0!==g&&g,w=e.feedbackTooltip,x=void 0!==w&&w,_=e.feedback,I=e.feedbackType,S=e.className,E=e.style,T=e.title,C=void 0===T?"":T,N=e.type,D=void 0===N?"checkbox":N,A=e.label,P=e.children,R=e.as,O=void 0===R?"input":R,L=p(e,JC);i=b(i,"form-check"),a=b(a,"form-switch");var M=(0,t.useContext)(KC).controlId,F=(0,t.useMemo)((function(){return{controlId:r||M}}),[M,r]),U=!P&&null!=A&&!1!==A||function(e,n){return t.Children.toArray(e).some((function(e){return t.isValidElement(e)&&e.type===n}))}(P,$C),j=(0,y.jsx)(QC,h(h({},L),{},{type:"switch"===D?"checkbox":D,ref:n,isValid:v,isInvalid:k,disabled:f,as:O}));return(0,y.jsx)(KC.Provider,{value:F,children:(0,y.jsx)("div",{style:E,className:m()(S,U&&i,u&&"".concat(i,"-inline"),c&&"".concat(i,"-reverse"),"switch"===D&&a),children:P||(0,y.jsxs)(y.Fragment,{children:[j,U&&(0,y.jsx)($C,{title:C,children:A}),_&&(0,y.jsx)(WC,{type:I,tooltip:x,children:_})]})})})}));ZC.displayName="FormCheck";var eN=Object.assign(ZC,{Input:QC,Label:$C}),tN=(n(391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),nN=t.forwardRef((function(e,n){var r,i,a=e.bsPrefix,o=e.type,u=e.size,s=e.htmlSize,c=e.id,f=e.className,d=e.isValid,v=void 0!==d&&d,g=e.isInvalid,k=void 0!==g&&g,w=e.plaintext,x=e.readOnly,_=e.as,I=void 0===_?"input":_,S=p(e,tN),E=(0,t.useContext)(KC).controlId;(a=b(a,"form-control"),w)?r=l({},"".concat(a,"-plaintext"),!0):(l(i={},a,!0),l(i,"".concat(a,"-").concat(u),u),r=i);return(0,y.jsx)(I,h(h({},S),{},{type:o,size:s,ref:n,readOnly:x,id:c||E,className:m()(f,r,v&&"is-valid",k&&"is-invalid","color"===o&&"".concat(a,"-color"))}))}));nN.displayName="FormControl";var rN=Object.assign(nN,{Feedback:WC}),iN=oT("form-floating"),aN=["controlId","as"],oN=t.forwardRef((function(e,n){var r=e.controlId,i=e.as,a=void 0===i?"div":i,o=p(e,aN),u=(0,t.useMemo)((function(){return{controlId:r}}),[r]);return(0,y.jsx)(KC.Provider,{value:u,children:(0,y.jsx)(a,h(h({},o),{},{ref:n}))})}));oN.displayName="FormGroup";var uN=oN,sN=["as","bsPrefix","className"],cN=["className"];function lN(e){var n=e.as,r=e.bsPrefix,i=e.className,a=p(e,sN);r=b(r,"col");var o=(0,t.useContext)(k).breakpoints,u=(0,t.useContext)(k).minBreakpoint,s=[],c=[];return o.forEach((function(e){var t,n,i,o=a[e];delete a[e],"object"===typeof o&&null!=o?(t=o.span,n=o.offset,i=o.order):t=o;var l=e!==u?"-".concat(e):"";t&&s.push(!0===t?"".concat(r).concat(l):"".concat(r).concat(l,"-").concat(t)),null!=i&&c.push("order".concat(l,"-").concat(i)),null!=n&&c.push("offset".concat(l,"-").concat(n))})),[h(h({},a),{},{className:m().apply(void 0,[i].concat(s,c))}),{as:n,bsPrefix:r,spans:s}]}var fN=t.forwardRef((function(e,t){var n=u(lN(e),2),r=n[0],i=r.className,a=p(r,cN),o=n[1],s=o.as,c=void 0===s?"div":s,l=o.bsPrefix,f=o.spans;return(0,y.jsx)(c,h(h({},a),{},{ref:t,className:m()(i,!f.length&&l)}))}));fN.displayName="Col";var hN=fN,dN=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],pN=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,a=e.bsPrefix,o=e.column,u=e.visuallyHidden,s=e.className,c=e.htmlFor,l=p(e,dN),f=(0,t.useContext)(KC).controlId;a=b(a,"form-label");var d="col-form-label";"string"===typeof o&&(d="".concat(d," ").concat(d,"-").concat(o));var v=m()(s,a,u&&"visually-hidden",o&&d);return c=c||f,o?(0,y.jsx)(hN,h({ref:n,as:"label",className:v,htmlFor:c},l)):(0,y.jsx)(i,h({ref:n,className:v,htmlFor:c},l))}));pN.displayName="FormLabel",pN.defaultProps={column:!1,visuallyHidden:!1};var vN=pN,mN=["bsPrefix","className","id"],yN=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.id,o=p(e,mN),u=(0,t.useContext)(KC).controlId;return r=b(r,"form-range"),(0,y.jsx)("input",h(h({},o),{},{type:"range",ref:n,className:m()(i,r),id:a||u}))}));yN.displayName="FormRange";var gN=yN,kN=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],bN=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.size,a=e.htmlSize,o=e.className,u=e.isValid,s=void 0!==u&&u,c=e.isInvalid,l=void 0!==c&&c,f=e.id,d=p(e,kN),v=(0,t.useContext)(KC).controlId;return r=b(r,"form-select"),(0,y.jsx)("select",h(h({},d),{},{size:a,ref:n,className:m()(o,r,i&&"".concat(r,"-").concat(i),s&&"is-valid",l&&"is-invalid"),id:f||v}))}));bN.displayName="FormSelect";var wN=bN,xN=["bsPrefix","className","as","muted"],_N=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,o=e.muted,u=p(e,xN);return n=b(n,"form-text"),(0,y.jsx)(a,h(h({},u),{},{ref:t,className:m()(r,n,o&&"text-muted")}))}));_N.displayName="FormText";var IN=_N,SN=t.forwardRef((function(e,t){return(0,y.jsx)(eN,h(h({},e),{},{ref:t,type:"switch"}))}));SN.displayName="Switch";var EN=Object.assign(SN,{Input:eN.Input,Label:eN.Label}),TN=["bsPrefix","className","children","controlId","label"],CN=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,o=e.label,u=p(e,TN);return n=b(n,"form-floating"),(0,y.jsxs)(uN,h(h({ref:t,className:m()(r,n),controlId:a},u),{},{children:[i,(0,y.jsx)("label",{htmlFor:a,children:o})]}))}));CN.displayName="FloatingLabel";var NN=CN,DN=["className","validated","as"],AN={_ref:NC().any,validated:NC().bool,as:NC().elementType},PN=t.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,o=p(e,DN);return(0,y.jsx)(a,h(h({},o),{},{ref:t,className:m()(n,r&&"was-validated")}))}));PN.displayName="Form",PN.propTypes=AN;var RN=Object.assign(PN,{Group:uN,Control:rN,Floating:iN,Check:eN,Switch:EN,Label:vN,Text:IN,Range:gN,Select:wN,FloatingLabel:NN}),ON=["as","bsPrefix","variant","size","active","className"],LN=t.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=e.size,o=e.active,s=e.className,c=p(e,ON),l=b(r,"btn"),f=u(jT(h({tagName:n},c)),2),d=f[0],v=f[1].tagName;return(0,y.jsx)(v,h(h(h({},d),c),{},{ref:t,className:m()(s,l,o&&"active",i&&"".concat(l,"-").concat(i),a&&"".concat(l,"-").concat(a),c.href&&c.disabled&&"disabled")}))}));LN.displayName="Button",LN.defaultProps={variant:"primary",active:!1,disabled:!1};var MN=LN;function FN(){var e=u((0,t.useState)([]),2),n=(e[0],e[1],(0,t.useRef)()),r=(0,t.useRef)(),i=PS(),a=i.login,o=(i.currentUser,i.userInfo,i.setUserInfo,u((0,t.useState)(""),2)),s=o[0],c=o[1],l=u((0,t.useState)(!1),2),f=l[0],h=l[1],d=sS();function p(){return(p=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,c(""),h(!0),e.next=6,a(n.current.value,r.current.value);case 6:d("/home"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c("Failed to log in");case 12:h(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(TT,{children:[(0,y.jsx)("div",{className:"logo",children:(0,y.jsx)("img",{src:DS,alt:"tweeter-logo"})}),(0,y.jsxs)(TT.Body,{children:[(0,y.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),s&&(0,y.jsx)(VC,{variant:"danger",children:s}),(0,y.jsxs)(RN,{onSubmit:function(e){return p.apply(this,arguments)},children:[(0,y.jsxs)(RN.Group,{id:"email",children:[(0,y.jsx)(RN.Label,{children:"Email"}),(0,y.jsx)(RN.Control,{type:"email",ref:n,required:!0})]}),(0,y.jsxs)(RN.Group,{id:"password",children:[(0,y.jsx)(RN.Label,{children:"Password"}),(0,y.jsx)(RN.Control,{type:"password",ref:r,required:!0})]}),(0,y.jsx)(MN,{disabled:f,className:"w-100",type:"submit",style:{marginTop:"15px"},children:"Log In"})]}),(0,y.jsx)("div",{className:"w-100 text-center mt-3"})]})]}),(0,y.jsx)("div",{className:"w-100 text-center mt-2",children:(0,y.jsx)(TS,{style:{fontSize:"15px"},to:"/signup",children:"Sign Up"})})]})}function UN(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=PS(),i=r.signup,a=(r.currentUser,r.loadUserInfo,r.createUser),o=u((0,t.useState)(""),2),s=o[0],c=o[1],l=u((0,t.useState)(!1),2),f=l[0],h=l[1],d=sS();function p(){return(p=T(S().mark((function t(r){var o;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,c(""),h(!0),t.next=6,i(e.current.value,n.current.value);case 6:return o=t.sent,t.next=9,a(o.user.uid,o.user.email);case 9:d("/home"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),c("error"+t.t0);case 15:h(!1);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(TT,{children:[(0,y.jsx)("div",{className:"logo",children:(0,y.jsx)("img",{src:DS,alt:"tweeter-logo"})}),(0,y.jsxs)(TT.Body,{children:[(0,y.jsx)("h2",{className:"text-center mb-4",children:"Create Account"}),s&&(0,y.jsx)(VC,{variant:"danger",children:s}),(0,y.jsxs)(RN,{onSubmit:function(e){return p.apply(this,arguments)},children:[(0,y.jsxs)(RN.Group,{id:"email",children:[(0,y.jsx)(RN.Label,{children:"Email"}),(0,y.jsx)(RN.Control,{type:"email",ref:e,required:!0})]}),(0,y.jsxs)(RN.Group,{id:"password",children:[(0,y.jsx)(RN.Label,{children:"Password"}),(0,y.jsx)(RN.Control,{type:"password",ref:n,required:!0})]}),(0,y.jsx)(MN,{disabled:f,className:"w-100",type:"submit",style:{marginTop:"15px"},children:"Sign Up"})]})]})]}),(0,y.jsx)("div",{className:"w-100 text-center mt-2",children:(0,y.jsx)(TS,{style:{fontSize:"15px"},to:"/",children:"Log In"})})]})}var jN=function(){var e=u((0,t.useState)(""),2),n=(e[0],e[1]),r=PS(),i=r.currentUser,a=r.logout,o=JSON.parse(localStorage.getItem("tweets")),s=u((0,t.useState)(),2),c=s[0],l=s[1],f=sS(),h=JSON.parse(localStorage.getItem("currentUserInfo"));function d(){return(d=T(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Uy(zv(fI,"tweets",t));case 3:console.log("deleted tweet",t),window.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error deleting tweet",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function p(){return(p=T(S().mark((function e(t){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=zv(fI,"tweets",t),e.next=4,Fy(n,{likes:Qy(i.uid)});case 4:console.log("liked tweet",t),window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error liking tweet",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function v(){return(v=T(S().mark((function e(t){var n,r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=zv(fI,"profiles",t),r=zv(fI,"profiles",i.uid),e.next=5,Fy(n,{followers:Qy(i.uid)});case 5:return e.next=7,Fy(r,{following:Qy(t)});case 7:return e.next=9,Fy();case 9:console.log(i.uid+"followed User "+t),window.location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error following user",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function m(){return(m=T(S().mark((function e(t,n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jy(Bv(fI,"comments"),{commentorid:i.uid,username:h.username,tweetid:t,content:n,createTime:new Date,likes:[]});case 3:r=e.sent,window.location.reload(),console.log("Tweet comment written with ID: ",r.id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function g(){return(g=T(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,a();case 4:f("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return(0,y.jsxs)("div",{className:"ProfilePage",children:[(0,y.jsxs)("div",{className:"SideBar",children:[(0,y.jsx)("div",{className:"profileLogo",children:(0,y.jsx)("img",{src:DS,alt:"logo"})}),(0,y.jsxs)("div",{className:"welcome",children:[(0,y.jsxs)("h2",{children:["Hello, ",h.username,"!"]}),(0,y.jsx)("img",{src:h.profileImgUrl,style:{height:"60px",width:"60px"}}),(0,y.jsxs)("div",{hidden:!h.verified,children:[(0,y.jsx)("img",{src:DS,alt:"logo",style:{height:"20px",width:"20px"}}),(0,y.jsx)("p",{children:"Verified"})]}),(0,y.jsx)("div",{hidden:h.verified,children:(0,y.jsx)("p",{children:"Not Verified"})})]}),(0,y.jsx)("div",{className:"profileNavigation",children:(0,y.jsx)(TS,{style:{textDecoration:"none"},to:"/home",children:"Home"})}),(0,y.jsxs)("div",{className:"profileNavigation forButtons",children:[(0,y.jsx)("button",{onClick:function(){var e=o.filter((function(e){return e.authorid==i.uid}));l(e)},children:"Tweeted"}),(0,y.jsx)("button",{onClick:function(){var e=[];o.forEach((function(t){t.likes.includes(i.uid)&&e.push(t)})),l(e)},children:"Liked"}),(0,y.jsx)("br",{}),(0,y.jsx)("button",{onClick:function(){var e=h.following,t=[];o.forEach((function(n){e.includes(n.authorid)&&t.push(n)})),l(t)},children:"Following"}),(0,y.jsx)("br",{})]}),(0,y.jsx)("div",{className:"profileNavigation",children:(0,y.jsx)(TS,{style:{textDecoration:"none"},to:"/updateProfile",children:"Edit Profile"})}),(0,y.jsx)("div",{className:"profileNavigation",children:(0,y.jsx)(TS,{style:{textDecoration:"none"},onClick:function(){return g.apply(this,arguments)},children:"LogOut"})})]}),(0,y.jsx)("div",{className:"MainHeader",children:(0,y.jsx)("h1",{children:"Profile"})}),(0,y.jsx)("div",{className:"Mainfeed",children:(0,y.jsx)(GE,{tweets:c,likeTweet:function(e){return p.apply(this,arguments)},commentTweet:function(e,t){return m.apply(this,arguments)},followUser:function(e){return v.apply(this,arguments)},deleteTweet:function(e){return d.apply(this,arguments)}})})]})},VN={},BN=function(){return(0,y.jsxs)("div",{className:"ProfilePage",children:[(0,y.jsxs)("div",{className:"SideBar",children:[(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/home",style:VN,children:"Home"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/tweeted",style:VN,children:"Tweeted"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/liked",style:VN,children:"Liked"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/following",style:VN,children:"Following"})})]}),(0,y.jsx)("div",{className:"Mainfeed",children:"Tweeted"})]})},zN={},qN=function(){return(0,y.jsxs)("div",{className:"ProfilePage",children:[(0,y.jsxs)("div",{className:"SideBar",children:[(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/home",style:zN,children:"Home"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/tweeted",style:zN,children:"Tweeted"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/liked",style:zN,children:"Liked"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/following",style:zN,children:"Following"})})]}),(0,y.jsx)("div",{className:"Mainfeed",children:"Liked"})]})},WN={},KN=function(){return(0,y.jsxs)("div",{className:"ProfilePage",children:[(0,y.jsxs)("div",{className:"SideBar",children:[(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/home",style:WN,children:"Home"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/tweeted",style:WN,children:"Tweeted"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/liked",style:WN,children:"Liked"})}),(0,y.jsx)("div",{className:"navigation",children:(0,y.jsx)(TS,{to:"/following",style:WN,children:"Following"})})]}),(0,y.jsx)("div",{className:"Mainfeed",children:"Following"})]})};function HN(){var e=(0,t.useRef)(),n=(0,t.useRef)(),r=JSON.parse(localStorage.getItem("currentUserInfo")),i=u((0,t.useState)(null),2),a=i[0],o=i[1],s=u((0,t.useState)(r.profileImgUrl),2),c=s[0],l=s[1],f=u((0,t.useState)(),2),h=(f[0],f[1],PS()),d=h.currentUser,p=h.updatePassword,v=u((0,t.useState)(""),2),m=v[0],g=v[1],k=u((0,t.useState)(!1),2),b=k[0],w=k[1],x=sS();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(TT,{children:(0,y.jsxs)(TT.Body,{children:[(0,y.jsx)("h2",{className:"text-center mb-4",children:"Update Profile"}),m&&(0,y.jsx)(VC,{variant:"danger",children:m}),(0,y.jsxs)(RN,{onSubmit:function(t){t.preventDefault();var r=[];w(!0),g(""),n.current.value&&r.push(p(n.current.value)),Promise.all(r).then((function(){var t=e.current.value;(console.log(t),null!=a)&&(I_(E_(hI,"images/".concat(a.name+tT())),a).then((function(e){S_(e.ref).then(function(){var e=T(S().mark((function e(n){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zv(fI,"profiles",d.uid),e.next=3,Fy(r,{username:t,profileImgUrl:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),x("/profile"))})).catch((function(e){g("Failed to update account"+e)})).finally((function(){w(!1)}))},children:[(0,y.jsxs)(RN.Group,{id:"email",children:[(0,y.jsx)(RN.Label,{children:"Username"}),(0,y.jsx)(RN.Control,{type:"text",ref:e,required:!0,defaultValue:r.username})]}),(0,y.jsxs)(RN.Group,{id:"password",children:[(0,y.jsx)(RN.Label,{children:"Password"}),(0,y.jsx)(RN.Control,{type:"password",ref:n,placeholder:"Leave blank to keep same"})]}),(0,y.jsxs)("div",{style:{textAlign:"center"},children:[(0,y.jsx)("p",{children:"Current Profile Picture"}),(0,y.jsx)("img",{src:c,style:{height:"100px",width:"100px"}}),(0,y.jsx)("input",{type:"file",onChange:function(e){o(e.target.files[0]),l(URL.createObjectURL(e.target.files[0]))}})]}),(0,y.jsx)(MN,{disabled:b,className:"w-100",style:{marginTop:"20px"},type:"submit",children:"Update"})]})]})}),(0,y.jsx)("div",{className:"w-100 text-center mt-2",children:(0,y.jsx)(TS,{to:"/profile",children:"Cancel"})})]})}var GN=function(){var e=u((0,t.useState)([]),2),n=(e[0],e[1],uy(Bv(fI,"tweets"),cy("content","!=","")));return(0,t.useEffect)((function(){var e=Vy(n,(function(t){var n=[];return t.forEach((function(e){var t=e.data();t.id=e.id,function(e){Ay(zv(fI,"profiles",e)).then((function(t){var n=t.data();localStorage.setItem(e+"Data",JSON.stringify(n))}))}(t.authorid),n.push(t)})),localStorage.setItem("tweets",""),localStorage.setItem("tweets",JSON.stringify(n)),e}))}),[]),(0,y.jsx)(_,{children:(0,y.jsx)("div",{children:(0,y.jsx)(ES,{children:(0,y.jsx)(RS,{children:(0,y.jsxs)(bS,{children:[(0,y.jsx)(gS,{exact:!0,path:"/",element:(0,y.jsx)(FN,{})}),(0,y.jsx)(gS,{path:"/signup",element:(0,y.jsx)(UN,{})}),(0,y.jsx)(gS,{path:"/updateProfile",element:(0,y.jsx)(HN,{})}),(0,y.jsx)(gS,{path:"/home",element:(0,y.jsx)(nT,{tweets:JSON.parse(localStorage.getItem("tweets"))})}),(0,y.jsx)(gS,{path:"/profile",element:(0,y.jsx)(jN,{})}),(0,y.jsx)(gS,{path:"/tweeted",element:(0,y.jsx)(BN,{})}),(0,y.jsx)(gS,{path:"/liked",element:(0,y.jsx)(qN,{})}),(0,y.jsx)(gS,{path:"/following",element:(0,y.jsx)(KN,{})})]})})})})})},QN=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,y.jsx)(t.StrictMode,{children:(0,y.jsx)("div",{children:(0,y.jsx)(GN,{})})})),QN()}()}();
//# sourceMappingURL=main.894b4e31.js.map